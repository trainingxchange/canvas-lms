(function(){var t=function(t,e){return function(){return t.apply(e,arguments)}};define(["jquery","underscore"],function(e,i){var s;return s=function(){function s(s,o){null==o&&(o={}),this._loadScript=t(this._loadScript,this),this._onMove=t(this._onMove,this),this.options=i.extend({},this.defaultOptions,o),this._cacheElements(s),this.deferred=e.Deferred().then(this._loadScript),this.$el.length&&this._attachEvents()}return s.prototype.defaultOptions={callback:e.noop,delay:200,dependencies:[],threshold:150},s.prototype._cacheElements=function(t){return this.$el=e(t),this.$body=e("body")},s.prototype._attachEvents=function(){return this.$body.on(this._eventName(),i.throttle(this._onMove,this.options.delay))},s.prototype._eventName=function(){return"mousemove.proximity."+this.$el.guid},s.prototype._dimensions=function(){return this.__dimensions||(this.__dimensions={bottom:this.$el.offset().top+this.$el.height()+this.options.threshold,left:this.$el.offset().left-this.options.threshold,right:this.$el.offset().left+this.$el.width()+this.options.threshold,top:this.$el.offset().top-this.options.threshold,centerX:this.$el.offset().left+this.$el.width()/2,centerY:this.$el.offset().top+this.$el.height()/2})},s.prototype._onMove=function(t){return this._isBounded(t.pageX,t.pageY)&&this._hasVelocity(t.pageX,t.pageY)&&this.deferred.resolve(),this.pageX=t.pageX,this.pageY=t.pageY,t},s.prototype._loadScript=function(){return this.$body.off(this._eventName()),require(this.options.dependencies,this.options.callback)},s.prototype._isBounded=function(t,e){return this._dimensions().left<t&&this._dimensions().right>t&&this._dimensions().top<e&&this._dimensions().bottom>e},s.prototype._hasVelocity=function(t,e){return Math.abs(this.pageX-this._dimensions().centerX)>Math.abs(t-this._dimensions().centerX)&&Math.abs(this.pageY-this._dimensions().centerY)>Math.abs(e-this._dimensions().centerY)},s}()})}).call(this);