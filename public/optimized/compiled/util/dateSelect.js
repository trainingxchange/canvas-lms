(function(){define(["i18n!instructure","jquery","underscore","str/htmlEscape"],function(e,n,t,a){var r,o;return r={year:function(e,t){var a,r,o;for(o=e.startYear<e.endYear?1:-1,a=n("<select />",t),e.includeBlank&&a.append("<option />"),r=e.startYear;r*o<=e.endYear*o;)r+=o,a.append(n('<option value="'+r+'">'+r+"</option>"));return a},month:function(e,t,r){var o,l,d,p;for(d=r.month_names,o=n("<select />",t),e.includeBlank&&o.append("<option />"),l=p=1;12>=p;l=++p)o.append(n('<option value="'+l+'">'+a(d[l])+"</option>"));return o},day:function(e,t){var a,r,o;for(a=n("<select />",t),e.includeBlank&&a.append("<option />"),r=o=1;31>=o;r=++o)a.append(n('<option value="'+r+'">'+r+"</option>"));return a}},o=function(a,o,l){var d,p,u,i,c,s,f,Y,h,y,v,m,k,B;for(null==l&&(l=t.clone(o)),Y=["type","startYear","endYear","includeBlank","order"],y=0,m=Y.length;m>y;y++)i=Y[y],delete l[i];for(null==(k=l["class"])&&(l["class"]=""),l["class"]+=" date-select",h=(new Date).getFullYear(),c={year:1,month:2,day:3},p=e.lookup("#date"),"birthdate"===o.type&&t.defaults(o,{startYear:h-1,endYear:h-125,includeBlank:!0}),t.defaults(o,{startYear:h-5,endYear:h+5,order:p.order||["year","month","day"]}),d=n("<span>"),u=v=0,B=o.order.length;B>=0?B>v:v>B;u=B>=0?++v:--v)f=o.order[u],s=a.replace(/(\]?)$/,"("+c[f]+"i)$1"),d.append(r[f](o,t.extend({name:s},l),p)),delete l.id;return d}})}).call(this);