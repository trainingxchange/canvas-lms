(function(){define(["underscore"],function(n){var o;return o={fromCanvas:function(o,e){var i,l,r,t;return null==e&&(e="image/jpeg"),t=o.toDataURL(e),i=atob(t.split(",")[1]),l=n.map(i,function(n){return n.charCodeAt(0)}),r=new Uint8Array(l),this._newBlob(r,e)},fromXHR:function(n,o){return null==o&&(o="image/jpeg"),this._newBlob(n,o)},_newBlob:function(n,o){var e;return(e=this._blobBuilder())?(e.append(n),e.getBlob(o)):new Blob([n],{type:o})},_blobBuilder:function(){return"function"==typeof window.Blob?null:(window.BlobBuilder=window.BlobBuilder||window.WebKitBlobBuilder||window.MozBlobBuilder||window.MSBlobBuilder,"undefined"==typeof window.BlobBuilder?null:new BlobBuilder)}}})}).call(this);