(function(){define(["jquery","underscore","str/htmlEscape","compiled/util/listWithOthers","jquery.instructure_misc_helpers"],function(t,e,r,n){var i,u,a;return a=function(t,r){return t=e.clone(t),t.activeFilter=e.include(r,""+t.type+"_"+t.id),t.sortBy=""+(t.activeFilter?0:1)+"_"+t.name.toLowerCase(),t},u=function(e,n){var i;return i=r(e.name),e.activeFilter&&(i="<span class='active-filter'>"+i+"</span>"),n&&"course"===e.type&&(i="<a href='"+r(e.url)+"'>"+i+"</a>"),t.raw(i)},i=function(t,r,i){var c,l,o,s,f;null==i&&(i={}),l=null!=(f=i.filters)?f:[],c=[];for(s in t)o=t[s],c=c.concat(e.values(e.pick(r[s],o)));return c=e.chain(c).map(function(t){return a(t,l)}).sortBy("sortBy").map(function(t){return u(t,i.linkToContexts)}).value(),i.hardCutoff&&(c=c.slice(0,i.hardCutoff)),n(c)}})}).call(this);