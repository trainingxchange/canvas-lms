(function(){var t=function(t,e){return function(){return t.apply(e,arguments)}},e={}.hasOwnProperty,s=function(t,s){function i(){this.constructor=t}for(var o in s)e.call(s,o)&&(t[o]=s[o]);return i.prototype=s.prototype,t.prototype=new i,t.__super__=s.prototype,t};define(["Backbone","jquery","i18n!comm_messages","jst/accounts/admin_tools/commMessagesContentPane","jst/accounts/admin_tools/commMessagesSearchOverview","jquery.instructure_date_and_time"],function(e,i,o,r,n){var a,c;return a=function(e){function a(){return this.getDisplayDateText=t(this.getDisplayDateText,this),this.buildOverviewText=t(this.buildOverviewText,this),this.onFail=t(this.onFail,this),this.fetchMessages=t(this.fetchMessages,this),c=a.__super__.constructor.apply(this,arguments)}return s(a,e),a.child("searchForm","#commMessagesSearchForm"),a.child("resultsView","#commMessagesSearchResults"),a.prototype.template=r,a.prototype.els={"#commMessagesSearchOverview":"$overview"},a.prototype.attach=function(){return this.collection.on("setParams",this.fetchMessages)},a.prototype.fetchMessages=function(){return this.buildOverviewText(),this.collection.fetch().fail(this.onFail)},a.prototype.onFail=function(){return this.collection.reset(),this.resultsView.detachScroll()},a.prototype.buildOverviewText=function(){var t;return t=i(this.searchForm.el).toJSON(),this.$overview.hide(),this.$overview.html(n({user:this.searchForm.model.get("name"),start_date:this.getDisplayDateText(t.start_time,o.t("from_beginning","the beginning")),end_date:this.getDisplayDateText(t.end_time,o.t("to_now","now"))})),this.$overview.show()},a.prototype.getDisplayDateText=function(t,e){return t?i.datetimeString(i.unfudgeDateForProfileTimezone(t)):e},a}(e.View)})}).call(this);