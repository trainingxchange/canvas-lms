(function(){var t={}.hasOwnProperty,e=function(e,o){function r(){this.constructor=e}for(var i in o)t.call(o,i)&&(e[i]=o[i]);return r.prototype=o.prototype,e.prototype=new r,e.__super__=o.prototype,e};define(["underscore","Backbone","jquery","jst/accounts/admin_tools/autocomplete"],function(t,o,r,i){var s;return s=function(t){function o(t){var e,r,i,s,n,a;this.options=t,this.collection=this.options.collection,o.__super__.constructor.apply(this,arguments),(e=this.options).minLength||(e.minLength=3),(r=this.options).labelProperty||(r.labelProperty="name"),(i=this.options).valueProperty||(i.valueProperty="id"),(s=this.options).fieldName||(s.fieldName=this.options.valueProperty),(n=this.options).placeholder||(n.placeholder=this.options.fieldName),(a=this.options).sourceParameters||(a.sourceParameters={})}return e(o,t),o.prototype.template=i,o.prototype.els={"[data-name=autocomplete_search_term]":"$searchTerm","[data-name=autocomplete_search_value]":"$searchValue"},o.prototype.toJSON=function(){return this.options},o.prototype.afterRender=function(){return this.$searchTerm.autocomplete({minLength:this.options.minLength,select:r.proxy(this.autocompleteSelect,this),source:r.proxy(this.autocompleteSource,this),change:r.proxy(this.autocompleteSelect,this)})},o.prototype.autocompleteSource=function(t,e){var o,i,s;return this.$searchTerm.addClass("loading"),i={data:this.options.sourceParameters},i.data.search_term=t.term,o=this.options.labelProperty,s=function(){var t;return t=this.collection.map(function(t){var e;return r.isFunction(o)&&(e=o(t)),e||(e=t.get(o)),{model:t,label:e}}),this.$searchTerm.removeClass("loading"),e(t)},this.collection.fetch(i).success(r.proxy(s,this))},o.prototype.autocompleteSelect=function(t,e){return this.$searchValue.val(e.item&&e.item.value?e.item.model.id:null)},o}(o.View)})}).call(this);