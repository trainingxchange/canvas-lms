(function(){var t={}.hasOwnProperty,e=function(e,r){function o(){this.constructor=e}for(var s in r)t.call(r,s)&&(e[s]=r[s]);return o.prototype=r.prototype,e.prototype=new o,e.__super__=r.prototype,e};define(["jquery","i18n!accounts","compiled/views/ValidatedFormView","str/htmlEscape","jst/accounts/settings/Quotas","compiled/jquery.rails_flash_notifications"],function(t,r,o,s,n){var i,a;return i=function(o){function i(){return a=i.__super__.constructor.apply(this,arguments)}return e(i,o),i.prototype.template=n,i.INTEGER_REGEX=/^[+-]?\d+$/,i.prototype.tag="form",i.prototype.id="default-quotas",i.prototype.className="form-horizontal account_settings",i.prototype.integerFields=["default_storage_quota_mb","default_user_storage_quota_mb","default_group_storage_quota_mb"],i.prototype.events={submit:"submit"},i.prototype.initialize=function(){var t,e,r,o;for(this.events||(this.events=[]),this.els||(this.els=[]),o=this.integerFields,e=0,r=o.length;r>e;e++)t=o[e],this.events['input [name="'+t+'"]']="validate",this.els['[name="'+t+'"]']="$"+t;return this.on("success",this.submitSuccess),this.on("fail",this.submitFail),i.__super__.initialize.apply(this,arguments)},i.prototype.submitSuccess=function(){return t.flashMessage(r.t("default_account_quotas_updated","Default account quotas updated"))},i.prototype.submitFail=function(e){var o,s,n,i,a;for(s=!0,a=this.integerFields,n=0,i=a.length;i>n;n++)o=a[n],o in e&&(s=!1);return s?t.flashError(r.t("default_account_quotas_not_updated","Default account quotas were not updated")):void 0},i.prototype.validateFormData=function(t){var e,o,s,n,i;for(e={},i=this.integerFields,s=0,n=i.length;n>s;s++)o=i[s],t[o].match(this.constructor.INTEGER_REGEX)||(e[o]=[{type:"integer_required",message:r.t("integer_required","An integer value is required")}]);return e},i.prototype.validateBeforeSave=function(){return{}},i.prototype.hideErrors=function(){var t;return t=this.$("div.control-group.error"),t.removeClass("error"),t.find(".help-inline").remove()},i.prototype.showErrors=function(e){var r,o,n,i,a,u,p,l,c;for(l=this.integerFields,c=[],u=0,p=l.length;p>u;u++)n=l[u],r=this["$"+n].closest("div.control-group"),a=e[n],r.toggleClass("error",null!=a),a?(o=t('<span class="help-inline"></span>'),o.html(function(){var t,e,r;for(r=[],t=0,e=a.length;e>t;t++)i=a[t].message,r.push(s(i));return r}().join("<br/>")),c.push(r.find(".controls").append(o))):c.push(void 0);return c},i}(o)})}).call(this);