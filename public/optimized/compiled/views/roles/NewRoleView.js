(function(){var e={}.hasOwnProperty,t=function(t,o){function r(){this.constructor=t}for(var n in o)e.call(o,n)&&(t[n]=o[n]);return r.prototype=o.prototype,t.prototype=new r,t.__super__=o.prototype,t};define(["i18n!editor","jquery","underscore","Backbone","jst/roles/newRole","compiled/models/Role","compiled/models/Account"],function(e,o,r,n,i){var a,l;return a=function(o){function r(){return l=r.__super__.constructor.apply(this,arguments)}return t(r,o),r.prototype.template=i,r.prototype.els={"input[type=text]":"$role_name",select:"$base_role_type"},r.prototype.events={"click button":"createRole","submit form":"createRole"},r.prototype.initialize=function(){var e,t;return r.__super__.initialize.apply(this,arguments),this.base_role_types=null!=(e=this.options)?e.base_role_types:void 0,this.adminRoles=null!=(t=this.options)?t.admin_roles:void 0},r.prototype.toJSON=function(){var e;return e=r.__super__.toJSON.apply(this,arguments),e.base_role_types=this.base_role_types,e.adminRoles=this.adminRoles,e},r.prototype.createRole=function(t){var o,r,n,i=this;return t.preventDefault(),n=this.$role_name.val(),r=this.$base_role_type.val(),o={base_role_type:r,role:n,account:ENV.CURRENT_ACCOUNT.account},this.$el.find("a.dropdown-toggle").after('<img class="loading-icon" src="/images/ajax-reload-animated.gif">'),this.collection.create(o,{success:function(){return i.clearForm()},error:function(){return alert(e.t("role.duplicate_role_error","Could not create this role because a role with this name already exists. Please try a different name")),i.clearForm()},wait:!0})},r.prototype.clearForm=function(){return this.$role_name.val(""),this.$base_role_type.val(""),this.$el.find(".loading-icon").remove()},r}(n.View)})}).call(this);