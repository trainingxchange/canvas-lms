(function(){var t=function(t,e){return function(){return t.apply(e,arguments)}},e={}.hasOwnProperty,n=function(t,n){function o(){this.constructor=t}for(var r in n)e.call(n,r)&&(t[r]=n[r]);return o.prototype=n.prototype,t.prototype=new o,t.__super__=n.prototype,t};define(["i18n!gradebook2","jquery","underscore","Backbone","jst/gradebook2/section_to_show_menu","compiled/jquery.kylemenu","vendor/jquery.ba-tinypubsub"],function(e,o,r,i,c){var s,u;return u=i.View,s=function(i){function s(e){this.onSectionChange=t(this.onSectionChange,this),s.__super__.constructor.apply(this,arguments),this.sections.unshift({name:this.defaultSection,checked:!e.currentSection})}return n(s,i),s.optionProperty("sections"),s.optionProperty("currentSection"),s.prototype.template=c,s.prototype.defaultSection=e.t("all_sections","All Sections"),s.prototype.render=function(){return this.detachEvents(),s.__super__.render.apply(this,arguments),this.$("button").kyleMenu(),this.attachEvents()},s.prototype.detachEvents=function(){return o.unsubscribe("currentSection/change",this.onSectionChange),this.$(".section-select-menu").off("menuselect")},s.prototype.attachEvents=function(){var t=this;return o.subscribe("currentSection/change",this.onSectionChange),this.$(".section-select-menu").on("click",function(t){return t.preventDefault()}),this.$(".section-select-menu").on("menuselect",function(e,n){var r;return r=t.$("[aria-checked=true] input[name=section_to_show_radio]").val()||void 0,o.publish("currentSection/change",[r,t.cid]),t.trigger("menuselect",e,n,t.currentSection)})},s.prototype.onSectionChange=function(t){return this.currentSection=t,this.updateSections(),this.render()},s.prototype.updateSections=function(){var t=this;return r.map(this.sections,function(e){return e.checked=e.id===t.currentSection,e})},s.prototype.toJSON=function(){var t;return{sections:this.sections,currentSection:(null!=(t=r.findWhere(this.sections,{id:this.currentSection}))?t.name:void 0)||this.defaultSection}},s}(u)})}).call(this);