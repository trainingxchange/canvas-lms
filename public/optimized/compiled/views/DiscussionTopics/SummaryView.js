(function(){var e={}.hasOwnProperty,t=function(t,o){function r(){this.constructor=t}for(var s in o)e.call(o,s)&&(t[s]=o[s]);return r.prototype=o.prototype,t.prototype=new r,t.__super__=o.prototype,t};define(["i18n!discussion_topics","Backbone","jquery","underscore","jst/DiscussionTopics/SummaryView","jst/_avatar"],function(e,o,r,s,n){var i,l;return i=function(o){function i(){return l=i.__super__.constructor.apply(this,arguments)}return t(i,o),i.prototype.template=n,i.prototype.attributes=function(){return{"class":"discussion-topic "+this.model.get("read_state")+" "+(this.model.selected?"selected":""),"data-id":this.model.id}},i.prototype.events={"change .toggleSelected":"toggleSelected",click:"openOnClick"},i.prototype.initialize=function(){return i.__super__.initialize.apply(this,arguments),this.model.on("change reset",this.render,this),this.model.on("destroy",this.remove,this)},i.prototype.toJSON=function(){var t;return t=i.__super__.toJSON.apply(this,arguments),s.extend(t,{permissions:s.extend(this.options.permissions,t.permissions),selected:this.model.selected,unread_count_tooltip:e.t("unread_count_tooltip",{zero:"No unread replies.",one:"1 unread reply.",other:"%{count} unread replies."},{count:this.model.get("unread_count")}),reply_count_tooltip:e.t("reply_count_tooltip",{zero:"No replies.",one:"1 reply.",other:"%{count} replies."},{count:this.model.get("discussion_subentry_count")}),summary:this.model.summary()})},i.prototype.render=function(){return i.__super__.render.apply(this,arguments),this.$el.attr(this.attributes()),this},i.prototype.toggleSelected=function(){return this.model.selected=!this.model.selected,this.model.trigger("change:selected"),this.$el.toggleClass("selected",this.model.selected)},i.prototype.openOnClick=function(e){return r(e.target).closest(":focusable, label").length?void 0:window.location=this.model.get("html_url")},i}(o.View)})}).call(this);