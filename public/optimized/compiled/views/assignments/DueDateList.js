(function(){var e=function(e,t){return function(){return e.apply(t,arguments)}},t={}.hasOwnProperty,i=function(e,i){function r(){this.constructor=e}for(var s in i)t.call(i,s)&&(e[s]=i[s]);return r.prototype=i.prototype,e.prototype=new r,e.__super__=i.prototype,e};define(["Backbone","underscore","compiled/views/assignments/DueDateView","compiled/views/assignments/SectionDropdownView"],function(t,r,s,n){var o,u;return o=function(t){function o(){return this.addDueDateView=e(this.addDueDateView,this),this.getOverrides=e(this.getOverrides,this),this.hideOrShowRemoveButtons=e(this.hideOrShowRemoveButtons,this),this.afterRender=e(this.afterRender,this),this.validateBeforeSave=e(this.validateBeforeSave,this),this.updateOverrides=e(this.updateOverrides,this),this.reRenderSections=e(this.reRenderSections,this),this._removeDueDateView=e(this._removeDueDateView,this),u=o.__super__.constructor.apply(this,arguments)}return i(o,t),o.prototype.initialize=function(){var e=this;return o.__super__.initialize.apply(this,arguments),this.dueDateList=this.model,this.dueDateViews=[],this.dueDateList.overrides.forEach(function(t){return e.addDueDateView(t,!1)}),this.dueDateList.overrides.on("add",this.addDueDateView),this.dueDateList.overrides.on("change:course_section_id",this.reRenderSections)},o.prototype._removeDueDateView=function(e){return this.dueDateViews=r.reject(this.dueDateViews,function(t){return t.model===e}),this.dueDateList.overrides.remove(e),e.off(),this.reRenderSections(),this.hideOrShowRemoveButtons(),this.trigger("remove:override")},o.prototype.reRenderSections=function(){var e=this;return r.each(this.dueDateViews,function(t){return t.reRenderSections(e.dueDateList.availableSectionsPlusOverride(t.model))})},o.prototype.updateOverrides=function(){return r.each(this.dueDateViews,function(e){return e.updateOverride()})},o.prototype.validateBeforeSave=function(e,t){var i,r,s,n;for(n=e.assignment_overrides||[],r=0,s=n.length;s>r;r++)i=n[r],this.dueDateViews[0].validateBeforeSave(i,t);return t},o.prototype.afterRender=function(){var e=this;return r.each(this.dueDateViews,function(t){return e.$el.append(t.render().el)}),this.hideOrShowRemoveButtons()},o.prototype.hideOrShowRemoveButtons=function(){var e;return e=this.dueDateViews[0],null!=e?this.dueDateViews.length>1?e.showRemoveButton():e.hideRemoveButton():void 0},o.prototype._generateDueDateView=function(e){return new s({model:e,views:{"section-list":new n({sections:this.dueDateList.availableSectionsPlusOverride(e),override:e})}})},o.prototype.getOverrides=function(){return this.overrides.toJSON()},o.prototype.addDueDateView=function(e,t){var i,r;return null==t&&(t=!0),i=this._generateDueDateView(e),i.on("remove",this._removeDueDateView),this.dueDateViews.push(i),this.hideOrShowRemoveButtons(),t?(r=i.render().$el,this.$el.append(r),this.reRenderSections(),r.find(".section-list").focus()):void 0},o}(t.View)})}).call(this);