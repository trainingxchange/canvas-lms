(function(){var t=function(t,e){return function(){return t.apply(e,arguments)}},e={}.hasOwnProperty,n=function(t,n){function s(){this.constructor=t}for(var r in n)e.call(n,r)&&(t[r]=n[r]);return s.prototype=n.prototype,t.prototype=new s,t.__super__=n.prototype,t};define(["i18n!assignment","Backbone","underscore","jquery","compiled/views/assignments/AssignmentGroupCreateDialog","jst/assignments/AssignmentGroupSelector"],function(e,s,r,o,i,a){var p,u;return p=function(s){function r(){return this._validateAssignmentGroupId=t(this._validateAssignmentGroupId,this),this.validateBeforeSave=t(this.validateBeforeSave,this),this.toJSON=t(this.toJSON,this),this.showAssignmentGroupCreateDialog=t(this.showAssignmentGroupCreateDialog,this),u=r.__super__.constructor.apply(this,arguments)}var p;return n(r,s),r.prototype.template=a,p="#assignment_group_id",r.prototype.els=function(){var t;return t={},t[""+p]="$assignmentGroupId",t}(),r.prototype.events=function(){var t;return t={},t["change "+p]="showAssignmentGroupCreateDialog",t}(),r.optionProperty("parentModel"),r.optionProperty("assignmentGroups"),r.optionProperty("nested"),r.prototype.showAssignmentGroupCreateDialog=function(){var t=this;return"new"===this.$assignmentGroupId.val()?(this.dialog=(new i).render(),this.dialog.on("assignmentGroup:created",function(e){var n;return n=o("<option>"),n.val(e.id),n.text(e.name),t.$assignmentGroupId.prepend(n),t.$assignmentGroupId.val(e.id)}),this.dialog.on("assignmentGroup:canceled",function(){return t.$assignmentGroupId.val(t.assignmentGroups[0].id)})):void 0},r.prototype.toJSON=function(){return{assignmentGroups:this.assignmentGroups,assignmentGroupId:this.parentModel.assignmentGroupId(),frozenAttributes:this.parentModel.frozenAttributes(),nested:this.nested}},r.prototype.fieldSelectors={assignmentGroupSelector:"#assignment_group_id"},r.prototype.validateBeforeSave=function(t,e){return e=this._validateAssignmentGroupId(t,e)},r.prototype._validateAssignmentGroupId=function(t,n){var s;return s=this.nested?t.assignment.assignmentGroupId():t.assignment_group_id,"new"===s&&(n.assignmentGroupSelector=[{message:e.t("assignment_group_must_have_group","Please select an assignment group for this assignment")}]),n},r}(s.View)})}).call(this);