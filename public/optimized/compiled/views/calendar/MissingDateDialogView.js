(function(){var t=function(t,i){return function(){return t.apply(i,arguments)}},i={}.hasOwnProperty,n=function(t,n){function e(){this.constructor=t}for(var s in n)i.call(n,s)&&(t[s]=n[s]);return e.prototype=n.prototype,t.prototype=new e,t.__super__=n.prototype,t};define(["jquery","underscore","Backbone","i18n!calendar.edit","jst/calendar/missingDueDateDialog","jqueryui/dialog","compiled/jquery/fixDialogButtons"],function(i,e,s,o,a){var r,l,c;return l=s.View,r=function(s){function r(){return this.cancel=t(this.cancel,this),this.onAction=t(this.onAction,this),c=r.__super__.constructor.apply(this,arguments)}return n(r,s),r.prototype.dialogTitle='<span>\n  <i class="icon-warning"></i>\n  '+o.t("titles.warning","Warning")+"\n</span>",r.prototype.initialize=function(t){return r.__super__.initialize.apply(this,arguments),this.validationFn=t.validationFn,this.labelFn=t.labelFn||this.defaultLabelFn,this.success=t.success},r.prototype.defaultLabelFn=function(t){return i("label[for="+i(t).attr("id")+"]").text()},r.prototype.render=function(){return this.invalidFields=this.validationFn(),this.invalidFields===!0?!1:(this.invalidSectionNames=e.map(this.invalidFields,this.labelFn),this.showDialog(),this)},r.prototype.getInvalidFields=function(){var t,n;return t=e.select(this.$dateFields,function(t){return""===i(t).val()}),n=e.map(t,this.labelFn),n.length>0?[t,n]:!1},r.prototype.showDialog=function(){var t,n;return t=o.t("missingDueDate",{one:"%{sections} does not have a due date assigned.",other:"%{sections} do not have a due date assigned."},{sections:"",count:this.invalidSectionNames.length}),n=a({description:t,sections:this.invalidSectionNames}),this.$dialog=i(n).dialog({dialogClass:"dialog-warning",draggable:!1,modal:!0,resizable:!1,title:i(this.dialogTitle)}).fixDialogButtons().on("click",".btn",this.onAction),this.$dialog.parents(".ui-dialog:first").focus()},r.prototype.onAction=function(t){return i(t.currentTarget).hasClass("btn-primary")?this.cancel(this.invalidFields,this.sectionNames):this.success(this.$dialog)},r.prototype.cancel=function(){return this.$dialog.dialog("close").remove(),this.invalidFields[0].focus()},r}(l)})}).call(this);