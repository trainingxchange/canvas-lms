(function(){var t=function(t,e){return function(){return t.apply(e,arguments)}},e={}.hasOwnProperty,n=function(t,n){function i(){this.constructor=t}for(var r in n)e.call(n,r)&&(t[r]=n[r]);return i.prototype=n.prototype,t.prototype=new i,t.__super__=n.prototype,t};define(["jquery","Backbone"],function(e,i){var r,o;return r=function(i){function r(){return this.onKeyDown=t(this.onKeyDown,this),o=r.__super__.constructor.apply(this,arguments)}return n(r,i),r.prototype.keyCodes={32:"Space",38:"UpArrow",40:"DownArrow"},r.prototype.els={"#nav_enabled_list":"$enabled_list","#nav_disabled_list":"$disabled_list"},r.prototype.afterRender=function(){return this.keyCodes="function"==typeof Object.freeze?Object.freeze(this.keyCodes):void 0,e("li.navitem").on("keydown",this.onKeyDown)},r.prototype.onKeyDown=function(t){var n,i;return n=e(t.target),i="on"+this.keyCodes[t.keyCode]+"Key",this[i]?this[i].call(this,t,n)&&t.preventDefault():void 0},r.prototype.onUpArrowKey=function(t,e){var n;return n=e.prev("li.navitem"),this.empty(n)&&(n=e.children("li.navitem").first()),this.empty(n)&&this.disabled(e)&&(n=this.$enabled_list.children("li.navitem").last(),this.empty(n)&&(n=this.$enabled_list,n.attr("tabindex",0),n.bind("keydown",this.onKeyDown))),n.focus()},r.prototype.onDownArrowKey=function(t,e){var n;return n=e.next("li.navitem"),this.empty(n)&&(n=e.children("li.navitem").first()),this.empty(n)&&this.enabled(e)&&(n=this.$disabled_list.children("li.navitem").first(),this.empty(n)&&(n=this.$disabled_list,n.attr("tabindex",-1),n.bind("keydown",this.onKeyDown))),n.focus()},r.prototype.onSpaceKey=function(t,e){var n;return(n=this.$el.data("drag"))?(e.is(n)||(e.is("li.navitem")?e.after(n):(e.append(n),e.attr("tabindex",-1),e.unbind("keydown"))),n.attr("aria-grabbed",!1),this.$el.data("drag",null),n.focus()):e.is("li.navitem")?(e.attr("aria-grabbed",!0),n=e,this.$el.data("drag",n),n.blur(),n.focus()):void 0},r.prototype.empty=function(t){return 0===t.length},r.prototype.enabled=function(t){return t.parent().attr("id")===this.$enabled_list.attr("id")},r.prototype.disabled=function(t){return t.parent().attr("id")===this.$disabled_list.attr("id")},r}(i.View)})}).call(this);