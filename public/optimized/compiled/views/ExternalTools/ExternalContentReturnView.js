(function(){var t=function(t,e){return function(){return t.apply(e,arguments)}},e={}.hasOwnProperty,n=function(t,n){function o(){this.constructor=t}for(var r in n)e.call(n,r)&&(t[r]=n[r]);return o.prototype=n.prototype,t.prototype=new o,t.__super__=n.prototype,t};define(["jquery","jst/ExternalTools/ExternalContentReturnView"],function(e,o){var r,i;return r=function(r){function a(){return this._contentCancel=t(this._contentCancel,this),this._contentReady=t(this._contentReady,this),this.removeDialog=t(this.removeDialog,this),i=a.__super__.constructor.apply(this,arguments)}return n(a,r),a.prototype.template=o,a.optionProperty("launchType"),a.optionProperty("launchParams"),a.optionProperty("displayAsModal"),a.prototype.defaults={displayAsModal:!0},a.prototype.els={"iframe.tool_launch":"$iframe"},a.prototype.attach=function(){var t=this;return this.model.on("change",function(){return t.render()})},a.prototype.toJSON=function(){var t;return t=a.__super__.toJSON.apply(this,arguments),t.launch_url=this.model.launchUrl(this.launchType,this.launchParams),t},a.prototype.afterRender=function(){var t,e;return this.attachLtiEvents(),t=this.model.get(this.launchType)||{},this.$iframe.width("100%"),this.$iframe.height(t.selection_height),this.displayAsModal?this.$el.dialog({title:(null!=(e=this.model.get(this.launchType))?e.label:void 0)||"",width:t.selection_width,height:t.selection_height,resizable:!0,close:this.removeDialog}):void 0},a.prototype.attachLtiEvents=function(){return e(window).on("externalContentReady",this._contentReady),e(window).on("externalContentCancel",this._contentCancel)},a.prototype.detachLtiEvents=function(){return e(window).off("externalContentReady",this._contentReady),e(window).off("externalContentCancel",this._contentCancel)},a.prototype.removeDialog=function(){return this.detachLtiEvents(),this.remove()},a.prototype._contentReady=function(t,e){return this.trigger("ready",e),this.removeDialog()},a.prototype._contentCancel=function(t,e){return this.trigger("cancel",e),this.removeDialog()},a}(Backbone.View)})}).call(this);