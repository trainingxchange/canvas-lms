(function(){define(["underscore","jquery"],function(e,t){var i,r,n,o,s,l;return o="ui-cnvs-scrollable",s=10,r=n=i=null,l=function(e){return parseInt(e,10)},{afterRender:function(){var t=this;if(!this._rendered)return this.$el.addClass(o),this.$el.css("overflowY","auto"),this._initializeDragAndDropHandling(),e.defer(function(){return t._initializeAutoResize()}),this._rendered=!0},_initializeAutoResize:function(){var i,r,o,s,c=this;return n||(n=t(window)),(r=e.find(this.$el.parents(),function(e){return l(t(e).css("minHeight"))>30}))?(i=t(r),o=i.css("maxHeight"),i.css("maxHeight",i.css("minHeight")),s=i.offset().top||0,s+=l(i.css("paddingTop")),this._minHeight=i.height()+s,i.css("maxHeight",o),n.resize(e.throttle(function(){return c._resize()},50)),this._resize()):void 0},_resize:function(){var o;return r||(r=t("#footer")),i||(i=t(document)),o=e.reduce(this.$el.parents(),function(e,i){var r;return r=t(i),e+=l(r.css("marginBottom")),e+=l(r.css("paddingBottom")),e+=l(r.css("borderBottomWidth"))},0),this._resize=function(){var e,t;return t=this.$el.offset().top,e=n.height(),e-=r.outerHeight(!0),e-=t,e-=o,this.$el.height(Math.max(e,this._minHeight-t))},this._resize()},_initializeDragAndDropHandling:function(){var e=this;return this.$el.on("dragstart",function(){return e._$pointerScrollable=e.$el}),this.$el.on("drag",function(i,r){var n,l;return n=i.pageX,l=i.pageY,clearTimeout(e._checkScrollTimeout),e._checkScroll=function(){var i,c,h,u;return r.helper.hide(),i=t(document.elementFromPoint(n,l)),r.helper.show(),c=i.closest("."+o),c.length||(c=e._$pointerScrollable),u=c.scrollTop(),h=c.offset().top,u>0&&r.offset.top<h?c.scrollTop(u-s):r.offset.top+r.helper.height()>h+c.height()&&c.scrollTop(u+s),e._$pointerScrollable=c,e._checkScrollTimeout=setTimeout(e._checkScroll,50)},e._checkScroll()}),this.$el.on("dragstop",function(){return clearTimeout(e._checkScrollTimeout)})}}})}).call(this);