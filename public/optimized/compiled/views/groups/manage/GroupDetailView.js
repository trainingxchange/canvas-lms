(function(){var t=function(t,e){return function(){return t.apply(e,arguments)}},e={}.hasOwnProperty,o=function(t,o){function r(){this.constructor=t}for(var u in o)e.call(o,u)&&(t[u]=o[u]);return r.prototype=o.prototype,t.prototype=new r,t.__super__=o.prototype,t};define(["i18n!GroupDetailView","jquery","Backbone","compiled/views/groups/manage/GroupEditView","jst/groups/manage/groupDetail","compiled/jquery.rails_flash_notifications"],function(e,r,u,i,n){var s,p,c;return p=u.View,s=function(u){function s(){return this.deleteGroup=t(this.deleteGroup,this),this.editGroup=t(this.editGroup,this),c=s.__super__.constructor.apply(this,arguments)}return o(s,u),s.optionProperty("users"),s.prototype.template=n,s.prototype.events={"click .edit-group":"editGroup","click .delete-group":"deleteGroup"},s.prototype.els={".toggle-group":"$toggleGroup",".al-trigger":"$groupActions",".edit-group":"$editGroupLink"},s.prototype.attach=function(){return this.model.on("change",this.render)},s.prototype.summary=function(){var t;return t=this.model.usersCount(),this.model.theLimit()?"student"===ENV.group_user_type?e.t("student_count_max","%{count} / %{max} students",{count:t,max:this.model.theLimit()}):e.t("user_count_max","%{count} / %{max} users",{count:t,max:this.model.theLimit()}):"student"===ENV.group_user_type?e.t("student_count","student",{count:t}):e.t("user_count","user",{count:t})},s.prototype.editGroup=function(t){var e;return t.preventDefault(),null==(e=this.editView)&&(this.editView=new i({model:this.model,groupCategory:this.model.collection.category})),this.editView.setTrigger(this.$editGroupLink),this.editView.open()},s.prototype.deleteGroup=function(t){return t.preventDefault(),confirm(e.t("delete_confirm","Are you sure you want to remove this group?"))?this.model.destroy({success:function(){return r.flashMessage(e.t("flash.removed","Group successfully removed."))},error:function(){return r.flashError(e.t("flash.removeError","Unable to remove the group. Please try again later."))}}):void this.$groupActions.focus()},s.prototype.closeMenu=function(){var t;return null!=(t=this.$groupActions.data("kyleMenu"))?t.$menu.popup("close"):void 0},s.prototype.toJSON=function(){var t;return t=this.model.toJSON(),t.leader=this.model.get("leader"),t.canAssignUsers=ENV.IS_LARGE_ROSTER&&!this.model.isLocked(),t.canEdit=!this.model.isLocked(),t.summary=this.summary(),t},s}(p)})}).call(this);