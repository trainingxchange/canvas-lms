(function(){var t=function(t,e){return function(){return t.apply(e,arguments)}},e={}.hasOwnProperty,n=function(t,n){function o(){this.constructor=t}for(var i in n)e.call(n,i)&&(t[i]=n[i]);return o.prototype=n.prototype,t.prototype=new o,t.__super__=n.prototype,t};define(["Backbone","jquery","underscore","i18n!content_migrations","jst/content_migrations/SelectContent","jst/EmptyDialogFormWrapper","jst/content_migrations/ContentCheckboxCollection","compiled/views/DialogFormView","compiled/views/CollectionView","compiled/collections/content_migrations/ContentCheckboxCollection","compiled/views/content_migrations/ContentCheckboxView","compiled/views/content_migrations/NavigationForTree","compiled/views/content_migrations/ExpandCollapseContentSelectTreeItems","compiled/views/content_migrations/CheckingCheckboxesForTree","compiled/views/content_migrations/ScrollPositionForTree"],function(e,o,i,r,s,c,l,a,h,p,u,m,d,f,g){var C,_;return C=function(e){function o(){return this.maintainTheTree=t(this.maintainTheTree,this),this.selectContentDialogEvents=t(this.selectContentDialogEvents,this),this.setSubmitButtonState=t(this.setSubmitButtonState,this),this.firstOpen=t(this.firstOpen,this),this.submit=t(this.submit,this),_=o.__super__.constructor.apply(this,arguments)}return n(o,e),o.prototype.els={".form-dialog-content":"$formDialogContent","#selectContentBtn":"$selectContentBtn"},o.prototype.template=s,o.prototype.wrapperTemplate=c,o.prototype.submit=function(t){var e,n,s=this;return e=i.pick(this.model.attributes,"id","workflow_state","user_id"),this.model.clear({silent:!0}),this.model.set(e),i.isEmpty(this.getFormData())?(t.preventDefault(),alert(r.t("no_content_selected","You have not selected any content to import.")),!1):(n=o.__super__.submit.apply(this,arguments),null!=n?n.done(function(){return s.model.trigger("continue")}):void 0)},o.prototype.firstOpen=function(){var t,e,n,i=this;return o.__super__.firstOpen.apply(this,arguments),this.checkboxCollection||(this.checkboxCollection=new p(null,{courseID:null!=(e=this.model)?e.course_id:void 0,migrationID:null!=(n=this.model)?n.get("id"):void 0,isTopLevel:!0,ariaLevel:1})),this.checkboxCollectionView||(this.checkboxCollectionView=new h({collection:this.checkboxCollection,itemView:u,el:this.$formDialogContent,template:l})),t=this.checkboxCollection.fetch(),this.$el.disableWhileLoading(t),t.done(function(){return i.maintainTheTree(i.$el.find("ul[role=tree]")),i.selectContentDialogEvents()}),this.checkboxCollectionView.render()},o.prototype.setSubmitButtonState=function(){var t;return t=!0,this.$el.find("input[type=checkbox]").each(function(){return this.checked?t=!1:void 0}),this.$selectContentBtn.prop("disabled",t)},o.prototype.selectContentDialogEvents=function(){var t=this;return this.$el.on("click","#cancelSelect",function(){return t.close()}),this.$el.on("change","input[type=checkbox]",this.setSubmitButtonState)},o.prototype.maintainTheTree=function(t){return new m(t),new d(t),new f(t),new g(t,this.$formDialogContent)},o}(a)})}).call(this);