(function(){var t={}.hasOwnProperty,e=function(e,s){function r(){this.constructor=e}for(var o in s)t.call(s,o)&&(e[o]=s[o]);return r.prototype=s.prototype,e.prototype=new r,e.__super__=s.prototype,e};define(["Backbone","jst/content_migrations/ProgressStatus"],function(t,s){var r,o;return r=function(t){function r(){return o=r.__super__.constructor.apply(this,arguments)}return e(r,t),r.prototype.template=s,r.prototype.initialize=function(){return r.__super__.initialize.apply(this,arguments),this.progress=this.model.progressModel},r.prototype.render=function(){var t,e,s;return(t=null!=(e=this.model.collection)&&null!=(s=e.view)?s.getStatusView(this.model):void 0)?this.$el.html(t):r.__super__.render.apply(this,arguments)},r.prototype.afterRender=function(){return this.model.on("change:workflow_state",this.render),this.progress.on("change:workflow_state",this.render)},r.prototype.toJSON=function(){var t;return t=r.__super__.toJSON.apply(this,arguments),t.statusLabel=this.statusLabel(),t.status=this.status({humanize:!0}),t},r.prototype.statusLabelClassMap={completed:"label-success",completed_with_issues:"label-warning",failed:"label-important",running:"label-info"},r.prototype.statusLabel=function(){return this.statusLabelClassMap[this.statusLabelKey()]},r.prototype.statusLabelKey=function(){var t,e;return t=this.model.get("migration_issues_count"),e=this.status(),"completed"===this.status()&&t?"completed_with_issues":this.status()},r.prototype.status=function(t){var e,s,r,o;return null==t&&(t={}),e=t.humanize,s=this.model.get("workflow_state"),r=this.progress.get("workflow_state"),o="running"!==s?s:r||"queued",e&&(o=o.charAt(0).toUpperCase()+o.substring(1).toLowerCase(),o=o.replace(/_/g," ")),o},r}(t.View)})}).call(this);