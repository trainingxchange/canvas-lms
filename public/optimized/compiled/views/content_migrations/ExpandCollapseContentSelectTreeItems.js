(function(){var e=function(e,t){return function(){return e.apply(t,arguments)}},t=[].indexOf||function(e){for(var t=0,r=this.length;r>t;t++)if(t in this&&this[t]===e)return t;return-1};define(["underscore","jquery"],function(r,n){var i;return i=function(){function i(t,r){this.$tree=t,null==r&&(r=!0),this.caretEvent=e(this.caretEvent,this),this.collapse=e(this.collapse,this),this.expand=e(this.expand,this),r&&this.bindEvents()}var o;return o=["assignments","quizzes","discussion_topics"],i.prototype.bindEvents=function(){return this.$tree.on("click",".checkbox-caret",this.caretEvent),this.$tree.on("expand","[role=treeitem]",this.expand),this.$tree.on("collapse","[role=treeitem]",this.collapse)},i.prototype.expand=function(e){return e.stopPropagation(),this.expandTreeItem(n(e.currentTarget))},i.prototype.collapse=function(e){return e.stopPropagation(),this.collapseTreeItem(n(e.currentTarget))},i.prototype.caretEvent=function(e){var t;return e.preventDefault(),e.stopPropagation(),t=n(e.currentTarget).closest("[role=treeitem]"),"true"===t.attr("aria-expanded")?this.collapseTreeItem(t):this.expandTreeItem(t)},i.prototype.expandTreeItem=function(e){return e.attr("aria-expanded",!0),this.triggerTreeItemFetches(e)},i.prototype.collapseTreeItem=function(e){return e.attr("aria-expanded",!1)},i.prototype.triggerTreeItemFetches=function(e){var r;return e.trigger("fetchCheckboxes"),r=e.data("type"),t.call(o,r)>=0?this.triggerLinkedResourcesCheckboxes(r):void 0},i.prototype.triggerLinkedResourcesCheckboxes=function(e){var t,n=this;return t=r.without(o,e),r.each(t,function(e){return n.$tree.find("[data-type="+e+"]").trigger("fetchCheckboxes",{silent:!0})})},i}()})}).call(this);