(function(){var e=function(e,t){return function(){return e.apply(t,arguments)}};define(["underscore","jquery"],function(t,r){var i;return i=function(){function t(t){this.$tree=t,this.clickHeaderEvent=e(this.clickHeaderEvent,this),this.setInitialSelectedState(),this.bindKeyboardEvents()}var i;return t.prototype.up=function(){var e;return e=this.findTreeItem(this.$currentSelected,"up"),this.selectTreeItem(e)},t.prototype.down=function(){var e;return e=this.findTreeItem(this.$currentSelected,"down"),this.selectTreeItem(e)},t.prototype.left=function(){var e;return"true"===this.$currentSelected.attr("aria-expanded")?this.$currentSelected.trigger("collapse"):(e=this.$currentSelected.closest("[aria-expanded=true]"),this.selectTreeItem(e))},t.prototype.right=function(){var e;return"true"===this.$currentSelected.attr("aria-expanded")?(e=this.findTreeItem(this.$currentSelected,"down"),this.selectTreeItem(e)):"false"===this.$currentSelected.attr("aria-expanded")?this.$currentSelected.trigger("expand"):void 0},t.prototype.spacebar=function(){return this.$currentSelected.find("input[type=checkbox]").first().click()},t.prototype.home=function(){var e,t;return t=this.$tree.find('[role="treeitem"]:visible'),e=t.first(),this.selectTreeItem(e)},t.prototype.end=function(){var e,t;return t=this.$tree.find('[role="treeitem"]:visible'),e=t.last(),this.selectTreeItem(e)},t.prototype.clickHeaderEvent=function(e){var t;return e.stopPropagation(),t=r(e.currentTarget),this.selectTreeItem(t.closest("[role=treeitem]"))},i={38:"up",75:"up",40:"down",74:"down",37:"left",72:"left",39:"right",76:"right",32:"spacebar",35:"end",36:"home"},t.prototype.setInitialSelectedState=function(){var e;return e=this.$tree.find("[role=treeitem]"),e.each(function(){return r(this).attr("aria-selected",!1)}),this.$tree.on("click","li .treeitem-heading",this.clickHeaderEvent)},t.prototype.bindKeyboardEvents=function(){var e=this;return this.$tree.on("keyup",function(t){var r;return e.$currentSelected=e.$tree.find('[aria-selected="true"]'),"function"==typeof e[r=i[t.which]]?e[r]():void 0})},t.prototype.selectTreeItem=function(e){return e.length?(this.$tree.attr("aria-activedescendant",e.attr("id")),this.$tree.find('[aria-selected="true"]').attr("aria-selected","false"),e.attr("aria-selected","true")):void 0},t.prototype.findTreeItem=function(e,t){var i,n,c,a;return i=this.$tree.find('[role="treeitem"]:visible'),n=i.index(e),c=n,"up"===t?c--:c++,a=i.get(c>=0?c:n),r(a)},t}()})}).call(this);