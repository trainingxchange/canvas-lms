(function(){var t=function(t,e){return function(){return t.apply(e,arguments)}},e={}.hasOwnProperty,n=function(t,n){function o(){this.constructor=t}for(var a in n)e.call(n,a)&&(t[a]=n[a]);return o.prototype=n.prototype,t.prototype=new o,t.__super__=n.prototype,t};define(["jquery","Backbone","compiled/views/content_migrations/subviews/DaySubstitutionView","compiled/models/DaySubstitution","jst/content_migrations/subviews/DateShift"],function(e,o,a,i,r){var d,s;return d=function(o){function a(){return this.updateNewDates=t(this.updateNewDates,this),this.createDaySubView=t(this.createDaySubView,this),this.toggleContent=t(this.toggleContent,this),s=a.__super__.constructor.apply(this,arguments)}return n(a,o),a.prototype.template=r,a.child("daySubstitution","#daySubstitution"),a.optionProperty("oldStartDate"),a.optionProperty("oldEndDate"),a.optionProperty("addHiddenInput"),a.prototype.els={".dateShiftContent":"$dateShiftContent","#oldStartDate":"$oldStartDate","#oldEndDate":"$oldEndDate","#newStartDate":"$newStartDate","#newEndDate":"$newEndDate","#daySubstitution":"$daySubstitution"},a.prototype.events={"click #dateShiftCheckbox":"toggleContent","click #addDaySubstitution":"createDaySubView"},a.prototype.afterRender=function(){var t=this;return this.$el.find("input[type=text]").datetime_field({addHiddenInput:this.addHiddenInput}),this.$oldStartDate.on("change",function(e){return t.model.setDateShiftOptions({property:"old_start_date",value:e.target.value})}),this.$oldEndDate.on("change",function(e){return t.model.setDateShiftOptions({property:"old_end_date",value:e.target.value})}),this.$newStartDate.on("change",function(e){return t.model.setDateShiftOptions({property:"new_start_date",value:e.target.value})}),this.$newEndDate.on("change",function(e){return t.model.setDateShiftOptions({property:"new_end_date",value:e.target.value})}),this.oldStartDate&&this.$newStartDate.val(this.oldStartDate).trigger("change"),this.oldEndDate&&this.$newEndDate.val(this.oldEndDate).trigger("change"),this.collection.on("remove",function(){return t.$el.find("#addDaySubstitution").focus()})},a.prototype.toggleContent=function(t){var n;return n=e(t.target).is(":checked"),this.model.setDateShiftOptions({property:"shift_dates",value:n}),this.model.daySubCollection=n?this.collection:null,this.$dateShiftContent.toggle()},a.prototype.createDaySubView=function(t){var e,n;return t.preventDefault(),this.collection.add(new i),e=null!=(n=this.collection.last())?n.view.$el:void 0,e.find("select").first().focus()},a.prototype.updateNewDates=function(t){return this.$oldStartDate.val(t.start_at).trigger("change"),this.$oldEndDate.val(t.end_at).trigger("change")},a}(o.View)})}).call(this);