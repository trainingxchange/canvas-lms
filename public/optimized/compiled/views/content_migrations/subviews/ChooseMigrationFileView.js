(function(){var e={}.hasOwnProperty,t=function(t,i){function o(){this.constructor=t}for(var r in i)e.call(i,r)&&(t[r]=i[r]);return o.prototype=i.prototype,t.prototype=new o,t.__super__=i.prototype,t};define(["Backbone","jst/content_migrations/subviews/ChooseMigrationFile","i18n!content_migrations"],function(e,i,o){var r,n;return r=function(e){function r(){return n=r.__super__.constructor.apply(this,arguments)}return t(r,e),r.prototype.template=i,r.prototype.els={"#migrationFileUpload":"$migrationFileUpload"},r.prototype.events={"change #migrationFileUpload":"setAttributes"},r.optionProperty("fileSizeLimit"),r.prototype.setAttributes=function(e){var t,i;return i=e.target.value.replace(/^.*\\/,""),t=this.$migrationFileUpload[0],this.model.set("pre_attachment",{file_size:this.fileSize(t),name:i,fileElement:t})},r.prototype.fileSize=function(e){var t;return null!=(t=e.files)?t[0].size:void 0},r.prototype.validations=function(){var e,t,i,r;return e={},r=this.model.get("pre_attachment"),i=[],t=null!=r?r.fileElement:void 0,(null!=r?r.name:void 0)&&t||i.push({type:"required",message:o.t("file_required","You must select a file to import content from")}),this.fileSize(t)>this.fileSizeLimit&&i.push({type:"upload_limit_exceeded",message:o.t("file_too_large","Your migration cannot exceed %{file_size}",{file_size:this.humanReadableSize(this.fileSizeLimit)})}),i.length&&(e.file=i),e},r.prototype.humanReadableSize=function(e){var t,i;for(e=parseFloat(e),i=["Bytes","KB","MB","GB","TB","PB","EB","ZB","YB"],t=0;e>=1024;)e/=1024,++t;return e.toFixed(1)+" "+i[t]},r}(e.View)})}).call(this);