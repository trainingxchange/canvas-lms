(function(){var t=function(t,e){return function(){return t.apply(e,arguments)}},e={}.hasOwnProperty,r=function(t,r){function n(){this.constructor=t}for(var o in r)e.call(r,o)&&(t[o]=r[o]);return n.prototype=r.prototype,t.prototype=new n,t.__super__=r.prototype,t};define(["i18n!conversations","jquery","underscore","Backbone"],function(e,n,o,i){var s,h,a;return h=i.View,s=function(i){function s(){return this.handleRightArrow=t(this.handleRightArrow,this),this.handleUpArrow=t(this.handleUpArrow,this),this.handleDownArrow=t(this.handleDownArrow,this),this.search=t(this.search,this),a=s.__super__.constructor.apply(this,arguments)}return r(s,i),s.prototype.initialize=function(){var t,r;return s.__super__.initialize.apply(this,arguments),this.$field=n("<input />").attr({"class":"dropdown-search",type:"search",placeholder:e.t("course_name","Course name")}).keyup(o.debounce(this.search,100)).keydown(this.handleDownArrow),r=this.getMenuRoot().text(),t=n("<label>").append(n("<span />").addClass("screenreader-only").text(e.t("search_category","Search %{category}",{category:r}))).append(this.$field),this.$submenu=this.$el.children(".dropdown-menu").prepend(t).find(".inner").keydown(this.handleUpArrow),this.getMenuRoot().keydown(this.handleRightArrow),this.$contents=this.$el.find("li")},s.prototype.search=function(){var t;return t=this.$field.val().toLowerCase(),t?this.$contents.each(function(){var e,r,o,i;return r=n(this),e=r.find("abbr"),i=e.length?e.attr("title"):r.find("span").text(),o=-1!==i.toLowerCase().indexOf(t),r[o?"show":"hide"]()}):void this.$contents.show()},s.prototype.clearSearch=function(){return this.$field.val(""),this.search()},s.prototype.getFirstEntry=function(){return this.$submenu.find("li:not(.divider):visible > a").first()},s.prototype.getMenuRoot=function(){return this.$el.children("[role=menuitem]")},s.prototype.handleDownArrow=function(t){return 40===t.keyCode?(t.preventDefault(),this.getFirstEntry().focus()):void 0},s.prototype.handleUpArrow=function(t){return 38===t.keyCode&&t.target===this.getFirstEntry()[0]?(t.stopPropagation(),this.$field.focus()):void 0},s.prototype.handleRightArrow=function(t){return 39===t.keyCode?(t.stopPropagation(),this.$field.focus()):void 0},s}(h)})}).call(this);