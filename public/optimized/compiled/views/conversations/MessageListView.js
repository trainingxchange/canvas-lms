(function(){var e=function(e,t){return function(){return e.apply(t,arguments)}},t={}.hasOwnProperty,s=function(e,s){function o(){this.constructor=e}for(var n in s)t.call(s,n)&&(e[n]=s[n]);return o.prototype=s.prototype,e.prototype=new o,e.__super__=s.prototype,e};define(["compiled/views/PaginatedCollectionView","compiled/views/conversations/MessageView","jst/conversations/messageList"],function(t,o,n){var r;return r=function(t){function r(){this.updateMessage=e(this.updateMessage,this),this.trackSelectedMessages=e(this.trackSelectedMessages,this),r.__super__.constructor.apply(this,arguments),this.attachEvents()}return s(r,t),r.prototype.tagName="div",r.prototype.itemView=o,r.prototype.template=n,r.prototype.course={},r.prototype.selectedMessages=[],r.prototype.autoFetch=!0,r.prototype.events={click:"onClick"},r.prototype.attachEvents=function(){return this.collection.on("change:selected",this.trackSelectedMessages)},r.prototype.trackSelectedMessages=function(e){return e.get("selected")?this.selectedMessages.push(e):this.selectedMessages.splice(this.selectedMessages.indexOf(e),1)},r.prototype.onClick=function(e){return e.target===this.el?this.collection.each(function(e){return e.set("selected",!1)}):void 0},r.prototype.updateCourse=function(e){return this.course=e},r.prototype.selectedMessage=function(){return this.selectedMessages[0]},r.prototype.updateMessage=function(e,t){var s,o;return s=this.collection.where({selected:!0})[0],o=this.collection.get(t.id),o.set({last_message:t.last_message,last_authored_message_at:(new Date).toString(),message_count:o.get("messages").length}),this.collection.sort(),this.render(),null!=s?s.view.select():void 0},r.prototype.afterRender=function(){return r.__super__.afterRender.apply(this,arguments),this.$(".current-context").text(this.course.name),this.$(".list-header")[this.course.name?"show":"hide"]()},r.prototype.selectAll=function(){return this.collection.each(function(e){return e.set("selected",!0)})},r}(t)})}).call(this);