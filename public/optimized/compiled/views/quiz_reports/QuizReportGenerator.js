(function(){var t=function(t,e){return function(){return t.apply(e,arguments)}},e={}.hasOwnProperty,r=function(t,r){function o(){this.constructor=t}for(var n in r)e.call(r,n)&&(t[n]=r[n]);return o.prototype=r.prototype,t.prototype=new o,t.__super__=r.prototype,t};define(["jquery","underscore","Backbone","jst/quiz_reports/quizReportGenerator","compiled/models/QuizReport"],function(e,o,n,i){var s,p,u;return p=n.View,s=function(o){function n(){return this.reportReady=t(this.reportReady,this),u=n.__super__.constructor.apply(this,arguments)}return r(n,o),n.prototype.template=i,n.prototype.initialize=function(){var t;return n.__super__.initialize.apply(this,arguments),(t=this.model.get("progress"))&&this.model.progressModel.set(t),this.model.progressModel.on("change",this.render),this.model.on("progressResolved",this.reportReady)},n.prototype.events={"click .create-report":function(){return this.autoDownload=!0,this.model.save({},{type:"POST",url:this.model.baseUrl()})}},n.prototype.reportReady=function(){return this.render(),this.autoDownload?this.triggerDownload():void 0},n.prototype.triggerDownload=function(){var t;return t=this.model.get("file").url,e(document.body).append(e("<iframe>",{style:"display:none",src:t}))},n}(p)})}).call(this);