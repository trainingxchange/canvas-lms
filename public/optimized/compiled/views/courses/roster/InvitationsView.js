(function(){var t=function(t,e){return function(){return t.apply(e,arguments)}},e={}.hasOwnProperty,n=function(t,n){function i(){this.constructor=t}for(var o in n)e.call(n,o)&&(t[o]=n[o]);return i.prototype=n.prototype,t.prototype=new i,t.__super__=n.prototype,t};define(["i18n!course_settings","jquery","underscore","compiled/views/DialogBaseView","jst/courses/roster/InvitationsView","compiled/jquery.rails_flash_notifications"],function(e,i,o,r,s){var l,a;return l=function(r){function l(){return this.resend=t(this.resend,this),a=l.__super__.constructor.apply(this,arguments)}return n(l,r),l.prototype.dialogOptions=function(){return{id:"enrollment_dialog",title:e.t("re_send_invitation","Re-Send Invitation"),buttons:[{text:e.t("cancel","Cancel"),click:this.cancel},{text:e.t("re_send_invitation","Re-Send Invitation"),"class":"btn-primary",click:this.resend}]}},l.prototype.render=function(){var t,e,n;return this.showDialogButtons(),e=this.model.toJSON(),e.time=i.datetimeString(o.last(this.model.get("enrollments")).updated_at),this.$el.html(s(e)),n=this.model.pending(),t=this.$el.parents(".teacher_enrollments,.ta_enrollments").length>0,this.$(".student_enrollment_re_send").showIf(n&&!t),this.$(".admin_enrollment_re_send").showIf(n&&t),this.$(".accepted_enrollment_re_send").showIf(!n),!n||t||e.course.available||this.hideDialogButtons(),this},l.prototype.showDialogButtons=function(){return this.$el.parent().next(".ui-dialog-buttonpane").show()},l.prototype.hideDialogButtons=function(){return this.$el.parent().next(".ui-dialog-buttonpane").hide()},l.prototype.resend=function(t){var n,o,r,s;for(t.preventDefault(),this.close(),s=this.model.get("enrollments"),o=0,r=s.length;r>o;o++)t=s[o],n="/confirmations/"+this.model.get("id")+"/re_send?enrollment_id="+t.id,i.ajaxJSON(n);return i.flashMessage(e.t("flash.invitation","Invitation sent."))},l}(r)})}).call(this);