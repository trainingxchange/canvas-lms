(function(){var e={}.hasOwnProperty,t=function(t,n){function r(){this.constructor=t}for(var a in n)e.call(n,a)&&(t[a]=n[a]);return r.prototype=n.prototype,t.prototype=new r,t.__super__=n.prototype,t};define(["jquery","underscore","Backbone","jst/courses/Syllabus"],function(e,n,r,a){var i,l;return i=function(r){function i(){return l=i.__super__.constructor.apply(this,arguments)}return t(i,r),i.prototype.template=a,i.prototype.initialize=function(e){return this.can_read=e.can_read,this.is_valid_user=e.is_valid_user,i.__super__.initialize.apply(this,arguments)},i.prototype.toJSON=function(){var t,r,a,l,u,s,o,_,d,p,g,c,m,h,v;p=new Date,m=new Date(p.getFullYear(),p.getMonth(),p.getDate()),u=this.can_read,s=this.can_read&&this.is_valid_user,c={},_=null,d=null,t=function(t,r){var a,i,l,o,p,g,h,v,f,y,D,T,w;return g=r.related_id,null==g&&(g=r.id),r.assignment?(y="assignment",u&&(o=r.html_url)):(y="event",s&&(o=r.html_url)),f=r.title,r.start_at&&(h=e.fudgeDateForProfileTimezone(Date.parse(r.start_at))),r.end_at&&(i=e.fudgeDateForProfileTimezone(Date.parse(r.end_at))),(null!=(D=r.assignment)?D.due_at:void 0)&&(a=e.fudgeDateForProfileTimezone(Date.parse(r.assignment.due_at))),p=null,n.each(null!=(T=r.assignment_overrides)?T:[],function(e){return null==p&&(p={}),p.title=e.title}),v=null,h&&(v=new Date(h.getFullYear(),h.getMonth(),h.getDate())),l=null,i&&(l=new Date(i.getFullYear(),i.getMonth(),i.getDate())),_&&(null!=(w=_.date)?w.getTime():void 0)===(null!=v?v.getTime():void 0)?d&&(d.last=!1):(_={date:v,passed:v&&m>v,events:[]},t.push(_),d=null),d={related_id:g,type:y,title:f,html_url:o,start_at:h,end_at:i,due_at:a,same_day:(null!=v?v.getTime():void 0)===(null!=l?l.getTime():void 0),same_time:(null!=h?h.getTime():void 0)===(null!=i?i.getTime():void 0),last:!0,override:p,json:r},_.events.push(d),g in c||(c[g]=[]),c[g].push(d),t},r=n.reduce(i.__super__.toJSON.apply(this,arguments),t,[]),g=!1;for(o in c)if(l=c[o],1===l.length)l[0].override=null;else for(h=0,v=l.length;v>h;h++)a=l[h],g|=null!==a.override;return{dates:r,overrides_present:g}},i}(r.View)})}).call(this);