(function(){var t={}.hasOwnProperty,e=function(e,r){function o(){this.constructor=e}for(var n in r)t.call(r,n)&&(e[n]=r[n]);return o.prototype=r.prototype,e.prototype=new o,e.__super__=r.prototype,e};define(["underscore","Backbone"],function(t,r){var o,n,i;return n=["reloadMessage","warning"],o=function(r){function o(){return i=o.__super__.constructor.apply(this,arguments)}return e(o,r),o.prototype.setViewProperties=!1,o.prototype.template=function(){return"<div class='alert alert-"+(this.options.warning?"warning":"info")+" reload-changed-page'>"+this.reloadMessage+"</div>"},o.prototype.defaults={modelAttributes:["title","url","body"],warning:!1},o.prototype.events={"click a.reload":"reload"},o.prototype.initialize=function(e){return o.__super__.initialize.apply(this,arguments),t.extend(this,t.pick(e||{},n))},o.prototype.pollForChanges=function(){var t,e,r;if(this.model)return r=this,e=this.model,t=this.latestRevision=e.latestRevision(),t&&!e.isNew()?(t.on("change:revision_id",function(){return t.fetch({data:{summary:!1}}).done(function(){return r.render(),r.trigger("changed")})}),t.pollForChanges()):void 0},o.prototype.stopPolling=function(){var t;return null!=(t=this.latestRevision)?t.stopPolling():void 0},o.prototype.reload=function(e){return null!=e&&e.preventDefault(),this.model.set(t.pick(this.latestRevision.attributes,this.options.modelAttributes)),this.trigger("reload")},o}(r.View)})}).call(this);