(function(){var t={}.hasOwnProperty,e=function(e,o){function r(){this.constructor=e}for(var i in o)t.call(o,i)&&(e[i]=o[i]);return r.prototype=o.prototype,e.prototype=new r,e.__super__=o.prototype,e};define(["jquery","underscore","Backbone","jst/wiki/WikiPageRevision"],function(t,o,r,i){var n,l;return n=function(r){function n(){return l=n.__super__.constructor.apply(this,arguments)}return e(n,r),n.prototype.tagName="li",n.prototype.className="revision clearfix",n.prototype.template=i,n.prototype.events={"click .restore-link":"restore"},n.prototype.initialize=function(){var t=this;return n.__super__.initialize.apply(this,arguments),this.model.on("change",function(){return t.render()})},n.prototype.afterRender=function(){return n.__super__.afterRender.apply(this,arguments),this.$el.toggleClass("selected",!!this.model.get("selected")),this.$el.toggleClass("latest",!!this.model.get("latest"))},n.prototype.toJSON=function(){var e,r,i,l;return r=null!=(i=this.model.collection)?i.latest:void 0,e=o.extend({},n.__super__.toJSON.apply(this,arguments),{IS:{LATEST:!!this.model.get("latest"),SELECTED:!!this.model.get("selected"),LOADED:!!this.model.get("title")&&!!this.model.get("body")}}),e.IS.SAME_AS_LATEST=e.IS.LOADED&&this.model.get("title")===(null!=r?r.get("title"):void 0)&&this.model.get("body")===(null!=r?r.get("body"):void 0),e.updated_at=t.datetimeString(e.updated_at),e.edited_by=null!=(l=e.edited_by)?l.display_name:void 0,e},n.prototype.restore=function(t){var e=this;return null!=t&&t.preventDefault(),this.model.restore().done(function(t){return e.pages_path?window.location.href=""+e.pages_path+"/"+t.url+"/revisions":window.location.reload()})},n}(r.View)})}).call(this);