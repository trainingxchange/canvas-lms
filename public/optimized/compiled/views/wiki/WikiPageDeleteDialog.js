(function(){var t={}.hasOwnProperty,e=function(e,i){function n(){this.constructor=e}for(var o in i)t.call(i,o)&&(e[o]=i[o]);return n.prototype=i.prototype,e.prototype=new n,e.__super__=i.prototype,e};define(["jquery","underscore","i18n!pages","str/htmlEscape","compiled/views/DialogFormView"],function(t,i,n,o,r){var l,a,s;return a={fixDialogButtons:!1,title:n.t("delete_dialog_title","Delete Wiki Page"),width:400,height:160},l=function(r){function l(){return s=l.__super__.constructor.apply(this,arguments)}return e(l,r),l.prototype.setViewProperties=!1,l.prototype.wrapperTemplate=function(){return'<div class="outlet"></div>'},l.prototype.template=function(){return n.t("delete_confirmation","Are you sure you wish to delete this wiki page?")},l.optionProperty("wiki_pages_path"),l.prototype.initialize=function(t){return l.__super__.initialize.call(this,i.extend({},a,t))},l.prototype.submit=function(e){var i,r,l,a,s=this;return null!=e&&e.preventDefault(),i=this.model.destroy({wait:!0}),r=t.Deferred(),l=this.model.get("title"),a=this.wiki_pages_path,i.then(function(){var e,i;return a?(e=new Date,e.setMinutes(e.getMinutes()+1),i="/",t.cookie("deleted_page_title",l,{expires:e,path:i}),window.location.href=a):(t.flashMessage(n.t("notices.page_deleted",'The page "%{title}" has been deleted.',{title:l})),r.resolve(),s.close())}),i.fail(function(){return t.flashError(o(n.t("notices.delete_failed",'The page "%{title}" could not be deleted.',{title:l}))),r.reject()}),this.$el.disableWhileLoading(r)},l.prototype.setupDialog=function(){var t,e;return l.__super__.setupDialog.apply(this,arguments),e=this,t=[{"class":"btn",text:n.t("cancel_button","Cancel"),click:function(){return e.$el.dialog("close")}},{"class":"btn btn-danger",text:n.t("delete_button","Delete"),"data-text-while-loading":n.t("deleting_button","Deleting..."),click:function(){return e.submit()}}],this.$el.dialog("option","buttons",t)},l}(r)})}).call(this);