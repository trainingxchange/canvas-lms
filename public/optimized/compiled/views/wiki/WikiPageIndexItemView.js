(function(){var e={}.hasOwnProperty,t=function(t,i){function n(){this.constructor=t}for(var o in i)e.call(i,o)&&(t[o]=i[o]);return n.prototype=i.prototype,t.prototype=new n,t.__super__=i.prototype,t};define(["Backbone","compiled/views/wiki/WikiPageIndexEditDialog","compiled/views/wiki/WikiPageDeleteDialog","compiled/views/PublishIconView","jst/wiki/WikiPageIndexItem","compiled/jquery/redirectClickTo"],function(e,i,n,o,r){var l,p;return l=function(e){function l(){return p=l.__super__.constructor.apply(this,arguments)}return t(l,e),l.prototype.template=r,l.prototype.tagName="tr",l.prototype.className="clickable",l.prototype.attributes={role:"row"},l.prototype.els={".wiki-page-link":"$wikiPageLink",".publish-cell":"$publishCell"},l.prototype.events={"click a.al-trigger":"settingsMenu","click .edit-menu-item":"editPage","click .delete-menu-item":"deletePage","click .use-as-front-page-menu-item":"useAsFrontPage"},l.optionProperty("indexView"),l.optionProperty("collection"),l.optionProperty("WIKI_RIGHTS"),l.optionProperty("contextName"),l.prototype.initialize=function(){var e=this;return l.__super__.initialize.apply(this,arguments),this.WIKI_RIGHTS||(this.WIKI_RIGHTS={}),this.model.set("unpublishable",!0),this.model.on("change",function(){return e.render()})},l.prototype.toJSON=function(){var e;return e=l.__super__.toJSON.apply(this,arguments),e.CAN={MANAGE:!!this.WIKI_RIGHTS.manage,PUBLISH:!!this.WIKI_RIGHTS.manage&&"courses"===this.contextName},e},l.prototype.render=function(){var e;return null!=(e=this.publishIconView)&&e.$el.detach(),l.__super__.render.apply(this,arguments),this.publishIconView||(this.publishIconView=new o({model:this.model}),this.model.view=this),this.publishIconView.$el.appendTo(this.$publishCell),this.publishIconView.render()},l.prototype.afterRender=function(){return this.$el.redirectClickTo(this.$wikiPageLink)},l.prototype.settingsMenu=function(e){return null!=e?e.preventDefault():void 0},l.prototype.editPage=function(e){var t,n,o;return null!=e&&e.preventDefault(),n=new i({model:this.model}),n.open(),o=this.indexView,t=this.collection,n.on("success",function(){return o.currentSortField=null,o.renderSortHeaders(),t.fetch({page:"current"})})},l.prototype.deletePage=function(e){var t;return null!=e&&e.preventDefault(),this.model.get("deletable")?(t=new n({model:this.model}),t.open()):void 0},l.prototype.useAsFrontPage=function(e){return null!=e&&e.preventDefault(),this.model.get("published")?this.model.setFrontPage():void 0},l}(e.View)})}).call(this);