(function(){var t=function(t,e){return function(){return t.apply(e,arguments)}},e={}.hasOwnProperty,r=function(t,r){function a(){this.constructor=t}for(var n in r)e.call(r,n)&&(t[n]=r[n]);return a.prototype=r.prototype,t.prototype=new a,t.__super__=r.prototype,t};define(["Backbone","i18n!discussions","compiled/views/DiscussionTopic/EntryView","jst/discussions/results_entry"],function(e,a,n,o){var s,i,p;return i=e.View,s=function(e){function n(){return this.updateReadState=t(this.updateReadState,this),p=n.__super__.constructor.apply(this,arguments)}return r(n,e),n.prototype.els={".discussion_entry:first":"$entryContent",".discussion-read-state-btn:first":"$readStateToggle"},n.prototype.events={click:"click","click .discussion-read-state-btn":"toggleRead"},n.prototype.tagName="li",n.prototype.className="entry",n.prototype.template=o,n.prototype.initialize=function(){return n.__super__.initialize.apply(this,arguments),this.model.on("change:read_state",this.updateReadState)},n.prototype.toJSON=function(){return this.model.attributes},n.prototype.click=function(){return this.trigger("click",this)},n.prototype.afterRender=function(){return n.__super__.afterRender.apply(this,arguments),this.updateReadState()},n.prototype.toggleRead=function(t){return t.stopPropagation(),t.preventDefault(),"read"===this.model.get("read_state")?this.model.markAsUnread():this.model.markAsRead()},n.prototype.updateReadState=function(){return this.updateTooltip(),this.$entryContent.toggleClass("unread","unread"===this.model.get("read_state")),this.$entryContent.toggleClass("read","read"===this.model.get("read_state"))},n.prototype.updateTooltip=function(){var t;return t="unread"===this.model.get("read_state")?a.t("mark_as_read","Mark as Read"):a.t("mark_as_unread","Mark as Unread"),this.$readStateToggle.attr("title",t)},n}(i)})}).call(this);