(function(){var e={}.hasOwnProperty,t=function(t,r){function n(){this.constructor=t}for(var o in r)e.call(r,o)&&(t[o]=r[o]);return n.prototype=r.prototype,t.prototype=new n,t.__super__=r.prototype,t};define(["i18n!conferences","jquery","Backbone","jst/conferences/newConference","jquery.google-analytics"],function(e,r,n,o){var a,i,l;return i=n.View,a=function(n){function a(){return l=a.__super__.constructor.apply(this,arguments)}return t(a,n),a.prototype.tagName="li",a.prototype.className="conference",a.prototype.template=o,a.prototype.events={"click .edit_conference_link":"edit","click .delete_conference_link":"delete","click .close_conference_link":"close","click .start-button":"start","click .external_url":"external"},a.prototype.initialize=function(){return a.__super__.initialize.apply(this,arguments),this.model.on("change",this.render)},a.prototype["delete"]=function(t){return t.preventDefault(),confirm(e.t("confirm.delete","Are you sure you want to delete this conference?"))?this.model.destroy():void 0},a.prototype.close=function(t){var n=this;return t.preventDefault(),confirm(e.t("confirm.close","Are you sure you want to end this conference?\n\nYou will not be able to reopen it."))?r.ajaxJSON(r(t.currentTarget).attr("href"),"POST",{},function(){return window.router.close(n.model)}):void 0},a.prototype.start=function(e){var t,r;return this.model.isNew()?void e.preventDefault():(r=window.open(e.currentTarget.href,"_blank"))?(e.preventDefault(),r.onload=function(){return window.location.reload(!0)},t=setInterval(function(){var n;if(r)try{return n=r.location.href}catch(o){return e=o,clearInterval(t),window.location.reload(!0)}},100)):void 0},a.prototype.external=function(t){var n,o,a;return r.trackEvent("Conference","External URL"),t.preventDefault(),a=e.t("loading_urls_message","Loading, please wait..."),n=r(t.currentTarget),o=n.text(),o!==a?(n.text(a),r.ajaxJSON(n.attr("href"),"GET",{},function(t){var a,i,l,c,u;if(n.text(o),0===t.length)return r.flashError(e.t("no_urls_error","Sorry, it looks like there aren't any %{type} pages for this conference yet.",{type:n.attr("name")}));if(t.length>1){for(i=r(document.createElement("DIV")),i.append(r("<p />").text(e.t("multiple_urls_message","There are multiple %{type} pages available for this conference. Please select one:",{type:n.attr("name")}))),c=0,u=t.length;u>c;c++)l=t[c],a=r("<a />",{href:l.url||n.attr("href")+"&url_id="+l.id,target:"_blank"}),a.text(l.name),i.append(a).append("<br>");return i.dialog({width:425,minWidth:425,minHeight:215,resizable:!0,height:"auto",title:n.text()})}return window.open(t[0].url)})):void 0},a}(i)})}).call(this);