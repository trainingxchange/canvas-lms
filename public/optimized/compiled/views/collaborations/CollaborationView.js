(function(){var t=function(t,e){return function(){return t.apply(e,arguments)}},e={}.hasOwnProperty,o=function(t,o){function r(){this.constructor=t}for(var i in o)e.call(o,i)&&(t[i]=o[i]);return r.prototype=o.prototype,t.prototype=new r,t.__super__=o.prototype,t};define(["i18n!collaborations","jquery","underscore","Backbone","compiled/views/collaborations/CollaboratorPickerView","jst/collaborations/edit"],function(e,r,i,n,l,a){var s,c,u,p;return u=i.extend,c=n.View,s=function(i){function n(){return this["delete"]=t(this["delete"],this),p=n.__super__.constructor.apply(this,arguments)}return o(n,i),n.prototype.events={"click .edit_collaboration_link":"onEdit","click .delete_collaboration_link":"onDelete","click .cancel_button":"onCloseForm"},n.prototype.initialize=function(){return n.__super__.initialize.apply(this,arguments),this.id=this.$el.data("id")},n.prototype.formTemplate=function(t){var e,o,i,n;return o=t.action,i=t.className,n=t.data,e=r(a(u(n,{action:o,id:this.id,token:ENV.AUTHENTICITY_TOKEN})))},n.prototype.confirmGoogleDocsDelete=function(){var t;return t=r("#delete_collaboration_dialog").data("collaboration",this.$el),t.dialog({title:e.t("titles.delete","Delete collaboration?"),width:350})},n.prototype.confirmDelete=function(t){return this.$el.confirmDelete({message:e.t("collaboration.delete","Are you sure you want to delete this collaboration?"),success:this["delete"],url:t})},n.prototype["delete"]=function(){var t=this;return this.$el.slideUp(function(){return t.$el.remove()}),this.trigger("delete",this)},n.prototype.onEdit=function(t){var e;return t.preventDefault(),e=this.formTemplate({action:r(t.currentTarget).attr("href"),className:this.$el.attr("class"),data:this.$el.getTemplateData({textValues:["title","description"]})}),this.$el.children().hide(),this.$el.append(e),this.addCollaboratorPicker(e)},n.prototype.onDelete=function(t){var e;return t.preventDefault(),e=r(t.currentTarget).attr("href"),this.$el.hasClass("google_docs")?this.confirmGoogleDocsDelete():this.confirmDelete(e)},n.prototype.onCloseForm=function(){return this.$el.find("form").remove(),this.$el.children().show()},n.prototype.addCollaboratorPicker=function(t){var e;return e=new l({edit:!0,el:t.find(".collaborator_list"),id:this.id}),e.render()},n}(c)})}).call(this);