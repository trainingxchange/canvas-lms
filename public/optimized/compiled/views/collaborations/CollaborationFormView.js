(function(){var t={}.hasOwnProperty,e=function(e,r){function o(){this.constructor=e}for(var i in r)t.call(r,i)&&(e[i]=r[i]);return o.prototype=r.prototype,e.prototype=new o,e.__super__=r.prototype,e};define(["i18n!collaborations","Backbone","compiled/views/collaborations/CollaboratorPickerView"],function(t,r,o){var i,n,a;return n=r.View,i=function(r){function i(){return a=i.__super__.constructor.apply(this,arguments)}return e(i,r),i.prototype.translations={errors:{noName:t.t("errors.no_name","Please enter a name for this collaboration."),titleTooLong:t.t("errors.title_too_long","Please use %{maxLength} characters or less for the name. Use the description for additional content.",{maxLength:ENV.TITLE_MAX_LEN})}},i.prototype.events={submit:"onSubmit","click .cancel_button":"onCancel"},i.prototype.initialize=function(){return i.__super__.initialize.apply(this,arguments),this.cacheElements(),this.picker=new o({el:this.$collaborators}),this.titleMaxLength=ENV.TITLE_MAX_LEN},i.prototype.cacheElements=function(){return this.$titleInput=this.$el.find("#collaboration_title"),this.$collaborators=this.$el.find(".collaborator_list")},i.prototype.render=function(t){return null==t&&(t=!0),this.$el.show(),t&&this.$el.find("h2").focus(),this.$collaborators.is(":empty")&&this.picker.render(),this},i.prototype.onSubmit=function(t){var e;return e=this.$el.getFormData(),e["collaboration[title]"]?this.titleMaxLength&&e["collaboration[title]"].length>this.titleMaxLength?(t.preventDefault(),t.stopPropagation(),this.raiseTitleLengthError()):setTimeout(function(){return window.location=window.location.pathname},2500):(t.preventDefault(),t.stopPropagation(),this.raiseTitleError())},i.prototype.onCancel=function(t){return t.preventDefault(),this.$el.hide(),this.trigger("hide")},i.prototype.raiseTitleError=function(){return this.trigger("error",this.$titleInput,this.translations.errors.noName),!1},i.prototype.raiseTitleLengthError=function(){return this.trigger("error",this.$titleInput,this.translations.errors.titleTooLong),!1},i}(n)})}).call(this);