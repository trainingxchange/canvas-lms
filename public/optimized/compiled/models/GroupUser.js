(function(){var t=function(t,r){return function(){return t.apply(r,arguments)}},r={}.hasOwnProperty,o=function(t,o){function e(){this.constructor=t}for(var i in o)r.call(o,i)&&(t[i]=o[i]);return e.prototype=o.prototype,t.prototype=new e,t.__super__=o.prototype,t};define(["jquery","compiled/models/User","jquery.ajaxJSON"],function(r,e){var i,n;return i=function(e){function i(){return this.moved=t(this.moved,this),this.sync=t(this.sync,this),n=i.__super__.constructor.apply(this,arguments)}return o(i,e),i.prototype.sync=function(){var t,r;return t=this.get("group"),r=this.previous("group"),t!==r?(null!=t&&this.joinGroup(t),r&&(null==t||this.get("category").get("allows_multiple_memberships"))?this.leaveGroup(r):void 0):void 0},i.prototype.joinGroup=function(t){var o=this;return r.ajaxJSON("/api/v1/groups/"+t.id+"/memberships","POST",{user_id:this.get("id")},function(t){return o.trigger("ajaxJoinGroupSuccess",t)})},i.prototype.leaveGroup=function(t){return r.ajaxJSON("/api/v1/groups/"+t.id+"/users/"+this.get("id"),"DELETE")},i.prototype.moved=function(){return this.trigger("moved",this)},i}(e)})}).call(this);