(function(){var r=function(r,e){return function(){return r.apply(e,arguments)}},e={}.hasOwnProperty,t=function(r,t){function n(){this.constructor=r}for(var s in t)e.call(t,s)&&(r[s]=t[s]);return n.prototype=t.prototype,r.prototype=new n,r.__super__=t.prototype,r};define(["Backbone","jquery","i18n!course_restore","jquery.instructure_forms"],function(e,n,s){var o,u;return o=function(e){function o(){return this.restore=r(this.restore,this),u=o.__super__.constructor.apply(this,arguments)}return t(o,e),o.prototype.baseUrl=function(){return"/api/v1/accounts/"+this.get("account_id")+"/courses"},o.prototype.searchUrl=function(){return""+this.baseUrl()+"/"+this.get("id")+"?include[]=all_courses"},o.prototype.search=function(r){var e=this;return this.trigger("searching"),this.set("id",r,{silent:!0}),this.fetch({url:this.searchUrl(),success:function(r){return r.trigger("doneSearching")},error:function(r,t){var s,o;return s=e.get("account_id"),e.clear({silent:!0}),e.set("account_id",s,{silent:!0}),o=n.parseJSON(t.responseText),e.set(o)}})},o.prototype.parse=function(r){return r.account_id=this.get("account_id"),this.clear({silent:!0}),r},o.prototype.restore=function(){var r,e,t,o,u,i,c=this;return this.trigger("restoring"),e=n.Deferred(),i=!1,u=function(){return i=!0},setTimeout(u,6e4),r=function(r,e){return null==e&&(e="GET"),n.ajax({url:r,type:e,success:o,error:t})},t=function(r){return null==r&&(r={}),n.flashError(s.t("restore_error","There was an error attempting to restore the course. Course was not restored.")),e.reject()},o=function(n){if(i)return t();switch(n.workflow_state){case"queued":case"running":return setTimeout(function(){return r(n.url)},1e3);case"completed":return c.set({workflow_state:"unpublished",restored:!0}),c.trigger("doneRestoring"),e.resolve();case"failed":return t()}},r(""+this.baseUrl()+"/?course_ids[]="+this.get("id")+"&event=undelete","PUT"),e},o}(e.Model)})}).call(this);