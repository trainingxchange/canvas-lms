(function(){var t={}.hasOwnProperty,e=function(e,r){function o(){this.constructor=e}for(var n in r)t.call(r,n)&&(e[n]=r[n]);return o.prototype=r.prototype,e.prototype=new o,e.__super__=r.prototype,e};define(["Backbone","compiled/collections/GroupUserCollection"],function(t,r){var o,n;return o=function(o){function i(){return n=i.__super__.constructor.apply(this,arguments)}return e(i,o),i.prototype.modelType="group",i.prototype.resourceName="groups",i.prototype.initialize=function(t,e){return i.__super__.initialize.apply(this,arguments),this.newAndEmpty=null!=e?e.newAndEmpty:void 0},i.prototype.users=function(){var t,e,o=this;return t=this.newAndEmpty?[]:null,this._users=new r(t,{group:this,category:null!=(e=this.collection)?e.category:void 0}),this._users.on("fetched:last",function(){return o.set("members_count",o._users.length)}),this.users=function(){return this._users},this._users},i.prototype.usersCount=function(){return this.get("members_count")},i.prototype.sync=function(e,r,o){return null==o&&(o={}),o.url=this.urlFor(e),t.sync(e,r,o)},i.prototype.urlFor=function(t){return"create"===t?"/api/v1/group_categories/"+this.get("group_category_id")+"/groups":"/api/v1/groups/"+this.id},i.prototype.theLimit=function(){var t,e,r;return t=this.get("max_membership"),t||(null!=(e=this.collection)&&null!=(r=e.category)?r.get("group_limit"):void 0)},i.prototype.isFull=function(){var t;return t=this.get("max_membership"),!t&&this.groupCategoryLimitMet()||t&&this.get("members_count")>=t},i.prototype.groupCategoryLimitMet=function(){var t,e,r;return t=null!=(e=this.collection)&&null!=(r=e.category)?r.get("group_limit"):void 0,t&&this.get("members_count")>=t},i.prototype.isLocked=function(){var t,e;return null!=(t=this.collection)&&null!=(e=t.category)?e.isLocked():void 0},i.prototype.toJSON=function(){var t;return ENV.student_mode?{name:this.get("name")}:(t=i.__super__.toJSON.apply(this,arguments),t.isFull=this.isFull(),t)},i}(t.Model)})}).call(this);