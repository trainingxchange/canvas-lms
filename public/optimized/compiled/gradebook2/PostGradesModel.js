(function(){var t={}.hasOwnProperty,n=function(n,i){function e(){this.constructor=n}for(var s in i)t.call(i,s)&&(n[s]=i[s]);return e.prototype=i.prototype,n.prototype=new e,n.__super__=i.prototype,n};define(["i18n!modules","jquery","underscore","Backbone"],function(t,i,e,s){var r,o;return r=function(t){function i(){return o=i.__super__.constructor.apply(this,arguments)}return n(i,t),i.prototype.initialize=function(){return this.ignored_assignment_ids=[]},i.prototype.defaults=function(){return{assignments:{},course_id:null,integration_course_id:null,integration_section_id:null}},i.prototype.assignment_list=function(){return e.values(this.get("assignments"))},i.prototype.assignments_to_post=function(){var t,n=this;return t=function(t){return e.contains(n.ignored_assignment_ids,t.id)},e.reject(this.assignment_list(),t)},i.prototype.assignment_count=function(){return e.size(this.get("assignments"))},i.prototype.update_assignment=function(t,n){var i;return i=this.get("assignments")[t],i.modified=!0,e.extend(i,n),this.update_bound_attributes()},i.prototype.modified_assignments=function(){return e.filter(this.get("assignments"),function(t){return null!=t.modified})},i.prototype.assignments_with_errors_count=function(){return this.missing_and_not_unique().length-this.ignored_assignment_ids.length},i.prototype.update_bound_attributes=function(){return this.set({assignments_to_post:this.assignments_to_post()}),this.set({assignments_with_errors_count:this.assignments_with_errors_count()})},i.prototype.ignore_assignment=function(t){return this.ignored_assignment_ids.push(t),this.update_bound_attributes()},i.prototype.ignore_all=function(){return this.ignored_assignment_ids=e.map(this.missing_and_not_unique(),function(t){return t.id}),this.update_bound_attributes()},i.prototype.reset_ignored_assignments=function(){return this.ignored_assignment_ids=[],this.update_bound_attributes()},i.prototype.course_id=function(){return this.get("course_id")},i.prototype.integration_course_id=function(){return this.get("integration_course_id")},i.prototype.integration_section_id=function(){return this.get("integration_section_id")},i.prototype.not_unique_assignments=function(){var t,n;return n=function(t){return t.length>1},t=function(t){return e.extend({},t,{not_unique:!0})},e.chain(this.assignment_list()).groupBy("name").filter(n).flatten().map(t).value()},i.prototype.missing_due_date=function(){var t;return t=e.chain(this.assignment_list()).filter(function(t){return!t.due_at}).flatten().value()},i.prototype.missing_and_not_unique=function(){var t,n,i,s,r,o=this;return n=function(t){return t.id},s=e.map(this.missing_due_date(),n),r=e.map(this.not_unique_assignments,n),i=e.union(s,r),t=function(t){return e.find(o.assignment_list(),function(n){return t===n.id})},e.map(i,t)},i.prototype.ungraded_submissions=function(){return e.filter(this.assignment_list(),function(t){return t.needs_grading_count>0})},i}(s.Model)})}).call(this);