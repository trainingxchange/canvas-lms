(function(){define(["underscore","jquery","jqueryui/tooltip"],function(t,o){var i,e;return function(t){return t.widget("custom.timeoutTooltip",t.ui.tooltip,{_open:function(o,i){var e,n=this;if(!this.timeout)return e=this._superApply.bind(this,arguments),this.timeout=setTimeout(function(){return delete n.timeout,n._off(i,"mouseleave focusout keyup"),e.call(n)},20),this._on(i,{mouseleave:"close",focusout:"close",keyup:function(o){var e;return o.keyCode===t.ui.keyCode.ESCAPE?(e=t.Event(o),e.currentTarget=i[0],this.close(e,!0)):void 0}})},close:function(){return this.timeout?(clearTimeout(this.timeout),void delete this.timeout):this._superApply(arguments)}})}(o),e=function(t,i){return o(this).css(t).removeClass("left right top bottom center middle vertical horizontal").addClass([i.horizontal,i.vertical,i.important].join(" "))},i=function(t){var o,i;return o=function(){var o;return(null!=(o=t.tooltipClass)?o.match("popover"):void 0)?30:5},i={right:{my:"left center",at:"right+"+o()+" center",collision:"flipfit flipfit"},left:{my:"right center",at:"left-"+o()+" center",collision:"flipfit flipfit"},top:{my:"center bottom",at:"center top-"+o(),collision:"flipfit flipfit"},bottom:{my:"center top",at:"center bottom+"+o(),collision:"flipfit flipfit"}},t.position in i?t.position=i[t.position]:void 0},o("body").on("mouseenter focusin","[data-tooltip]",function(){var t,n,l;return t=o(this),n=t.data("tooltip"),("right"===n||"left"===n||"top"===n||"bottom"===n)&&(n={position:n}),n||(n={}),n.position||(n.position="top"),i(n),n.collision&&(n.position.collision=n.collision),(l=n.position).using||(l.using=e),t.data("tooltip-title")&&(n.content=function(){return o(this).data("tooltip-title")},n.items="[data-tooltip-title]"),t.removeAttr("data-tooltip").timeoutTooltip(n).timeoutTooltip("open").click(function(){return t.timeoutTooltip("close")})})})}).call(this);