(function(){define(["i18n!license_help","jquery","jqueryui/dialog","jquery.instructure_misc_plugins","jquery.loadingImg"],function(e,n){var i,t,l,a;return t=["by","nc","nd","sa"],l=function(e,i){return n(e).toggleClass("selected",!!i).attr("aria-checked",!!i)},i=function(e){return l(e,!0)},a=function(e){return l(e,!1)},n(".license_help_link").live("click",function(c){var s,r;return c.preventDefault(),s=n("#license_help_dialog"),r=n(this).prev("select"),0===s.length&&(s=n("<div/>").attr("id","license_help_dialog").hide().loadingImage().appendTo("body").delegate(".option","click",function(e){var t;e.preventDefault(),t=!n(this).is(".selected"),l(this,t),t?(i(s.find(".option.by")),n(this).hasClass("sa")?a(s.find(".option.nd")):n(this).hasClass("nd")&&a(s.find(".option.sa"))):n(this).hasClass("by")&&a(s.find(".option")),s.triggerHandler("option_change")}).delegate(".select_license","click",function(){return s.data("select")&&s.data("select").val(s.data("current_license")||"private"),s.dialog("close")}).bind("license_change",function(e,n){var l,c,r,o;if(s.find(".license").removeClass("active").filter("."+n).addClass("active"),a(s.find(".option")),0===s.find(".license.active").length&&(n="private",s.find(".license.private").addClass("active")),s.data("current_license",n),n.match(/^cc/)){for(o=[],c=0,r=t.length;r>c;c++)l=t[c],("by"===l||n.match("_"+l))&&o.push(i(s.find(".option."+l)));return o}}).bind("option_change",function(){var e,n,i,l,a;for(e=["cc"],l=0,a=t.length;a>l;l++)i=t[l],s.find(".option."+i).is(".selected")&&e.push(i);return n=1===e.length?"private":e.join("_"),s.triggerHandler("license_change",n)}).dialog({autoOpen:!1,title:e.t("content_license_help","Content Licensing Help"),width:700}),n.get("/partials/_license_help.html",function(e){return s.loadingImage("remove").html(e).triggerHandler("license_change",r.val()||"private")})),s.find(".select_license").showIf(r.length),s.data("select",r),s.triggerHandler("license_change",r.val()||"private"),s.dialog("open")})})}).call(this);