(function(){var e=function(e,t){return function(){return e.apply(t,arguments)}},t={}.hasOwnProperty,r=function(e,r){function n(){this.constructor=e}for(var o in r)t.call(r,o)&&(e[o]=r[o]);return n.prototype=r.prototype,e.prototype=new n,e.__super__=r.prototype,e},n=[].indexOf||function(e){for(var t=0,r=this.length;r>t;t++)if(t in this&&this[t]===e)return t;return-1};define("compiled/models/Progress",["Backbone","jquery"],function(t,o){var a,s,i;return a=t.Model,s=function(t){function a(){return this.onPoll=e(this.onPoll,this),this.poll=e(this.poll,this),i=a.__super__.constructor.apply(this,arguments)}return r(a,t),a.prototype.defaults={completion:0,url:null,timeout:1e3},a.prototype.pollStates=["queued","running"],a.prototype.isPolling=function(){var e;return e=this.get("workflow_state"),n.call(this.pollStates,e)>=0},a.prototype.initialize=function(){var e=this;return this.pollDfd=new o.Deferred,this.on("change:url",function(){return e.isPolling()?e.poll():void 0}),o(window).on("beforeunload",function(){return clearTimeout(e.timeout)})},a.prototype.url=function(){return this.get("url")},a.prototype.poll=function(){var e=this;return this.fetch().then(this.onPoll,function(){return e.pollDfd.rejectWith(e,arguments)}),this.pollDfd},a.prototype.onPoll=function(){return this.isPolling()?this.timeout=setTimeout(this.poll,this.get("timeout")):(this.pollDfd.resolve(),this.trigger("complete"))},a}(a)})}).call(this),function(){define("compiled/models/progressable",["compiled/models/Progress","underscore"],function(e){var t;return t={initialize:function(){return this.progressModel=new e,this.attachProgressable()},saveWithProgressDeferred:function(){return this.save(),this.progressModel.pollDfd},attachProgressable:function(){var e=this;return this.on("change:progress_url",function(t,r){return e.progressModel.set({url:r,workflow_state:"queued"})}),this.progressModel.on("complete",function(){return e.fetch({success:function(){return e.trigger("progressResolved")}})})}}})}.call(this),function(){var e={}.hasOwnProperty,t=function(t,r){function n(){this.constructor=t}for(var o in r)e.call(r,o)&&(t[o]=r[o]);return n.prototype=r.prototype,t.prototype=new n,t.__super__=r.prototype,t};define("compiled/models/QuizReport",["jquery","underscore","compiled/models/progressable","Backbone","jquery.instructure_date_and_time"],function(e,r,n,o){var a,s,i;return a=o.Model,s=function(o){function a(){return i=a.__super__.constructor.apply(this,arguments)}return t(a,o),a.mixin(n),a.prototype.url=function(){return this.get("url")},a.prototype.baseUrl=function(){return this.url().replace(RegExp("/"+this.get("id")+"$"),"")},a.prototype.toJSON=function(){return{quiz_report:r.pick(a.__super__.toJSON.apply(this,arguments),"report_type","includes_all_versions")}},a.prototype.present=function(){var t;return t=r.extend({},this.attributes),this.progressModel.id&&(t.progress=this.progressModel.toJSON()),t.file&&(t.dateAndTime=e.datetimeString(t.file.created_at)),t},a}(a)})}.call(this),define("translations/quiz_reports.quiz_report_generator",["i18nObj","jquery"],function(e,t){t.extend(!0,e,{translations:{ar:{quiz_reports:{quiz_report_generator:{download_report_name:"تنزيل %{report_name}",generate_report_name:"إنشاء %{report_name}",generated_at_date_time:"تم الإنشاء في %{dateAndTime}",generating_report_name:"جارٍ إنشاء %{report_name}...",item_analysis_not_available:"تحليل العنصر غير متاح للاستبيانات"}}},de:{quiz_reports:{quiz_report_generator:{download_report_name:"%{report_name} herunterladen",generate_report_name:"%{report_name} generieren",generated_at_date_time:"Generiert %{dateAndTime}",generating_report_name:"%{report_name} wird generiert...",item_analysis_not_available:"Elementanalyse steht für Befragungen nicht zur Verfügung"}}},"en-AU":{quiz_reports:{quiz_report_generator:{download_report_name:"Download %{report_name}",generate_report_name:"Generate %{report_name}",generated_at_date_time:"Generated %{dateAndTime}",generating_report_name:"Generating %{report_name}...",item_analysis_not_available:"Item Analysis is not available for Surveys"}}},"en-GB":{quiz_reports:{quiz_report_generator:{download_report_name:"Download %{report_name}",generate_report_name:"Generate %{report_name}",generated_at_date_time:"Generated %{dateAndTime}",generating_report_name:"Generating %{report_name}...",item_analysis_not_available:"Item Analysis is not available for Surveys"}}},es:{quiz_reports:{quiz_report_generator:{download_report_name:"Descargar %{report_name}",generate_report_name:"Generar %{report_name}",generated_at_date_time:"Generado %{dateAndTime}",generating_report_name:"Generando %{report_name}...",item_analysis_not_available:"El análisis de elementos no está disponible para las encuestas"}}},"fa-IR":{quiz_reports:{quiz_report_generator:{download_report_name:"بارگیری %{report_name}",generate_report_name:"ایجاد %{report_name}",generated_at_date_time:"%{dateAndTime} ایجاد شده",generating_report_name:"در حال ایجاد %{report_name}...",item_analysis_not_available:"تحلیل پرسش برای نظرسنجی ها موجود نیست"}}},fr:{quiz_reports:{quiz_report_generator:{download_report_name:"Télécharger %{report_name}",generate_report_name:"Générer %{report_name}",generated_at_date_time:"Généré le %{dateAndTime}",generating_report_name:"Génération de %{report_name}...",item_analysis_not_available:"L’analyse des éléments n’est pas possible pour les enquêtes"}}},ja:{quiz_reports:{quiz_report_generator:{download_report_name:"%{report_name} のダウンロード",generate_report_name:"%{report_name} の生成",generated_at_date_time:"作成日: %{dateAndTime}",generating_report_name:"%{report_name}を生成しています...",item_analysis_not_available:"サーベイではアイテム分析は利用できません"}}},ko:{quiz_reports:{quiz_report_generator:{download_report_name:"%{report_name} 다운로드",generate_report_name:"%{report_name} 생성",generated_at_date_time:"%{dateAndTime}에 생성",generating_report_name:"%{report_name} 생성 중..."}}},nb:{quiz_reports:{quiz_report_generator:{download_report_name:"Last ned %{report_name}",generate_report_name:"Generer %{report_name}",generated_at_date_time:"Generert %{dateAndTime}",generating_report_name:"Genererer %{report_name} …",item_analysis_not_available:"Elementanalyse er ikke tilgjengelig for undersøkelser."}}},nl:{quiz_reports:{quiz_report_generator:{download_report_name:"Downloaden %{report_name}",generate_report_name:"Genereren %{report_name}",generated_at_date_time:"%{dateAndTime} gegenereerd",generating_report_name:"%{report_name} Bezig met genereren...",item_analysis_not_available:"Analyse van item is niet voor enquêtes beschikbaar"}}},pl:{quiz_reports:{quiz_report_generator:{download_report_name:"Pobieranie %{report_name}",generate_report_name:"Generuj raport o nazwie %{report_name}",generated_at_date_time:"Wygenerowano %{dateAndTime}",generating_report_name:"Trwa generowanie raportu o nazwie %{report_name}...",item_analysis_not_available:"Analiza elementu nie jest dostępna w przypadku ankiet"}}},pt:{quiz_reports:{quiz_report_generator:{download_report_name:"Transferir %{report_name}",generate_report_name:"Criar %{report_name}",generated_at_date_time:"Criado %{dateAndTime}",generating_report_name:"A criar %{report_name}...",item_analysis_not_available:"A análise de item não está disponível para questionários"}}},"pt-BR":{quiz_reports:{quiz_report_generator:{download_report_name:"Baixar %{report_name}",generate_report_name:"Gerar %{report_name}",generated_at_date_time:"Gerado em %{dateAndTime}",generating_report_name:"Gerando %{report_name}...",item_analysis_not_available:"A análise do item não está disponível para questionários"}}},ru:{quiz_reports:{quiz_report_generator:{download_report_name:"Скачать %{report_name}",generate_report_name:"Создать %{report_name}",generated_at_date_time:"Создан %{dateAndTime}",generating_report_name:"Создание %{report_name}…",item_analysis_not_available:"Анализ элемента недоступен для опросов"}}},tr:{quiz_reports:{quiz_report_generator:{download_report_name:"%{report_name} indir",generate_report_name:"%{report_name} yarat",generated_at_date_time:"%{dateAndTime} yaratıldı",generating_report_name:"%{report_name} yaratılıyor...",item_analysis_not_available:"Anketler için Öğe Analizi kullanılamaz"}}},zh:{quiz_reports:{quiz_report_generator:{download_report_name:"下载 %{report_name}",generate_report_name:"生成 %{report_name}",generated_at_date_time:"生成时间 %{dateAndTime}",generating_report_name:"正在生成 %{report_name}...",item_analysis_not_available:"项目分析对调查不可用"}}}}})}),define("jst/quiz_reports/quizReportGenerator",["compiled/handlebars_helpers","i18n!quiz_reports.quiz_report_generator"],function(e){var t=e.template,r=e.templates=e.templates||{};return r["quiz_reports/quizReportGenerator"]=t(function(e,t,r,n,o){function a(e,t){var n,o,a,s="";return s+='\n  <a href="'+f((n=e&&e.file,n=null==n||n===!1?n:n.url,typeof n===h?n.apply(e):n))+'" class="btn button-sidebar-wide "target="_blank">\n    <i class="icon-download"></i>\n    ',o=r.t||e&&e.t,a={hash:{scope:"quiz_reports.quiz_report_generator"},data:t},n=o?o.call(e,"download_report_name","Download %{report_name}",a):z.call(e,"t","download_report_name","Download %{report_name}",a),(n||0===n)&&(s+=n),s+="<br>\n    <small>",o=r.t||e&&e.t,a={hash:{scope:"quiz_reports.quiz_report_generator"},data:t},n=o?o.call(e,"generated_at_date_time","Generated %{dateAndTime}",a):z.call(e,"t","generated_at_date_time","Generated %{dateAndTime}",a),(n||0===n)&&(s+=n),s+="</small>\n  </a>\n"}function s(e,t){var n,o="";return o+="\n  ",n=r["if"].call(e,e&&e.progress,{hash:{},inverse:q.program(9,l,t),fn:q.program(4,i,t),data:t}),(n||0===n)&&(o+=n),o+="\n"}function i(e,t){var n,o,a,s="";return s+="\n    ",o=r.t||e&&e.t,a={hash:{scope:"quiz_reports.quiz_report_generator"},data:t},n=o?o.call(e,"generating_report_name","Generating %{report_name}...",a):z.call(e,"t","generating_report_name","Generating %{report_name}...",a),(n||0===n)&&(s+=n),s+='\n    <div class="progress progress-small progress-striped ',o=r.ifEqual||e&&e.ifEqual,a={hash:{},inverse:q.program(7,_,t),fn:q.program(5,u,t),data:t},n=o?o.call(e,"completed",(n=e&&e.progress,null==n||n===!1?n:n.workflow_state),a):z.call(e,"ifEqual","completed",(n=e&&e.progress,null==n||n===!1?n:n.workflow_state),a),(n||0===n)&&(s+=n),s+='" style="margin: 0 0 10px">\n      <div class="bar" style="width:'+f((n=e&&e.progress,n=null==n||n===!1?n:n.completion,typeof n===h?n.apply(e):n))+'%;"></div>\n    </div>\n  '}function u(){return"progress-success"}function _(){return"active"}function l(e,t){var n,o,a,s="";return s+='\n    <a href="javascript:void(0)" class="btn button-sidebar-wide ',n=r["if"].call(e,e&&e.generatable,{hash:{},inverse:q.program(12,d,t),fn:q.program(10,p,t),data:t}),(n||0===n)&&(s+=n),s+='"\n       ',n=r.unless.call(e,e&&e.generatable,{hash:{},inverse:q.noop,fn:q.program(14,m,t),data:t}),(n||0===n)&&(s+=n),s+='>\n      <i class="icon-ms-excel"></i>\n      ',o=r.t||e&&e.t,a={hash:{scope:"quiz_reports.quiz_report_generator"},data:t},n=o?o.call(e,"generate_report_name","Generate %{report_name}",a):z.call(e,"t","generate_report_name","Generate %{report_name}",a),(n||0===n)&&(s+=n),s+="\n    </a>\n  "}function p(){return"create-report"}function d(){return"disabled"}function m(e,t){var n,o,a,s="";return s+='\n         data-tooltip title="',o=r.t||e&&e.t,a={hash:{scope:"quiz_reports.quiz_report_generator"},data:t},n=o?o.call(e,"item_analysis_not_available","Item Analysis is not available for Surveys",a):z.call(e,"t","item_analysis_not_available","Item Analysis is not available for Surveys",a),(n||0===n)&&(s+=n),s+='"\n       '}this.compilerInfo=[4,">= 1.0.0"],r=this.merge(r,e.helpers),o=o||{};var c,g="",h="function",f=this.escapeExpression,z=r.helperMissing,q=this;return c=r["if"].call(t,t&&t.file,{hash:{},inverse:q.program(3,s,o),fn:q.program(1,a,o),data:o}),(c||0===c)&&(g+=c),g+="\n\n"}),r["quiz_reports/quizReportGenerator"]}),function(){var e=function(e,t){return function(){return e.apply(t,arguments)}},t={}.hasOwnProperty,r=function(e,r){function n(){this.constructor=e}for(var o in r)t.call(r,o)&&(e[o]=r[o]);return n.prototype=r.prototype,e.prototype=new n,e.__super__=r.prototype,e};define("compiled/views/quiz_reports/QuizReportGenerator",["jquery","underscore","Backbone","jst/quiz_reports/quizReportGenerator","compiled/models/QuizReport"],function(t,n,o,a){var s,i,u;return i=o.View,s=function(n){function o(){return this.reportReady=e(this.reportReady,this),u=o.__super__.constructor.apply(this,arguments)}return r(o,n),o.prototype.template=a,o.prototype.initialize=function(){var e;return o.__super__.initialize.apply(this,arguments),(e=this.model.get("progress"))&&this.model.progressModel.set(e),this.model.progressModel.on("change",this.render),this.model.on("progressResolved",this.reportReady)},o.prototype.events={"click .create-report":function(){return this.autoDownload=!0,this.model.save({},{type:"POST",url:this.model.baseUrl()})}},o.prototype.reportReady=function(){return this.render(),this.autoDownload?this.triggerDownload():void 0},o.prototype.triggerDownload=function(){var e;return e=this.model.get("file").url,t(document.body).append(t("<iframe>",{style:"display:none",src:e}))},o}(i)})}.call(this),define("translations/quizzes.statistics",["i18nObj","jquery"],function(e,t){t.extend(!0,e,{translations:{ar:{quizzes:{statistics:{count_attempts:{one:"محاولة واحدة",other:"%{count} من المحاولات"},titles:{submitted_users_for_quesiton:"المستخدمون المقدمون لـ %{user}"},uncounted_submissions:{one:"عملية إرسال أخرى",other:"%{count} من عمليات الإرسال الأخرى"}}}},de:{quizzes:{statistics:{count_attempts:{one:"1 Versuch",other:"%{count} Versuche"},titles:{submitted_users_for_quesiton:"Benutzer mit Einsendung für %{user}"},uncounted_submissions:{one:"1 weitere Einsendung",other:"%{count} weitere Einsendungen"}}}},"en-AU":{quizzes:{statistics:{count_attempts:{one:"1 attempt",other:"%{count} attempts"},titles:{submitted_users_for_quesiton:"Submitted Users for %{user}"},uncounted_submissions:{one:"1 other submission",other:"%{count} other submissions"}}}},"en-GB":{quizzes:{statistics:{count_attempts:{one:"1 attempt",other:"%{count} attempts"},titles:{submitted_users_for_quesiton:"Submitted Users for %{user}"},uncounted_submissions:{one:"1 other submission",other:"%{count} other submissions"}}}},es:{quizzes:{statistics:{count_attempts:{one:"1 intento",other:"%{count} intentos"},titles:{submitted_users_for_quesiton:"Preguntas Presentadas para %{user}"},uncounted_submissions:{one:"1 envío extra",other:"%{count} envíos extras"}}}},"fa-IR":{quizzes:{statistics:{count_attempts:{one:"%{count} تلاش",other:"%{count} تلاش"},titles:{submitted_users_for_quesiton:"کاربرانی که ارسال کرده اند برای %{user}"},uncounted_submissions:{one:"%{count} مورد ارسالی دیگر",other:"%{count} مورد ارسالی دیگر"}}}},fr:{quizzes:{statistics:{count_attempts:{one:"1 tentative",other:"%{count} tentatives"},titles:{submitted_users_for_quesiton:"Utilisateurs envoyés pour %{user}"},uncounted_submissions:{one:"1 autre envoi",other:"%{count} autres envois"}}}},ja:{quizzes:{statistics:{count_attempts:{one:"%{count} 回の試行",other:"%{count} 回の試行"},titles:{submitted_users_for_quesiton:"%{user} のために提出したユーザ"},uncounted_submissions:{one:"%{count} 件の他の提出物",other:"%{count} 件の他の提出物"}}}},ko:{quizzes:{statistics:{count_attempts:{one:"시도 %{count}번",other:"시도 %{count}번"},titles:{submitted_users_for_quesiton:"%{user}의 제출한 사용자"},uncounted_submissions:{one:"다른 제출물 %{count}개",other:"다른 제출물 %{count}개"}}}},nb:{quizzes:{statistics:{count_attempts:{one:"1 forsøk",other:"%{count} forsøk"},titles:{submitted_users_for_quesiton:"Innleverte brukere for %{user}"},uncounted_submissions:{one:"1 annen levering",other:"%{count} andre leveringer"}}}},nl:{quizzes:{statistics:{count_attempts:{one:"1 poging",other:"%{count} pogingen"},titles:{submitted_users_for_quesiton:"Gebruikers met inzending voor %{user}"},uncounted_submissions:{one:"1 andere inzending",other:"%{count} andere inzendingen"}}}},pl:{quizzes:{statistics:{count_attempts:{one:" 1 próba",other:"%{count} prób"},titles:{submitted_users_for_quesiton:"Przesłani użytkownicy dla użytkownika %{user}"},uncounted_submissions:{one:"1 inne zadanie",other:"%{count} innych zadań"}}}},pt:{quizzes:{statistics:{count_attempts:{one:"1 tentativa",other:"%{count} tentativas"},titles:{submitted_users_for_quesiton:"Utilizadores enviados para %{user}"},uncounted_submissions:{one:"1 outro envio",other:"%{count} outros envios"}}}},"pt-BR":{quizzes:{statistics:{count_attempts:{one:"1 tentativa",other:"%{count} tentativas"},titles:{submitted_users_for_quesiton:"Usuários enviados para %{user}"},uncounted_submissions:{one:"1 outro envio",other:"%{count} outros envios"}}}},ru:{quizzes:{statistics:{count_attempts:{one:"1 попытка",other:"%{count} попытки(ок)"},titles:{submitted_users_for_quesiton:"Отправленные пользователи для %{user}"},uncounted_submissions:{one:"1 другая отправка",other:" %{count} других отправок"}}}},tr:{quizzes:{statistics:{count_attempts:{one:"1 hak",other:"%{count} hak"},titles:{submitted_users_for_quesiton:"%{user} için Gönderilen Kullanıcılar"},uncounted_submissions:{one:"1 diğer gönderi",other:"%{count} diğer gönderi"}}}},zh:{quizzes:{statistics:{count_attempts:{one:"%{count} 次尝试",other:"%{count} 次尝试"},titles:{submitted_users_for_quesiton:"%{user} 的已提交用户"},uncounted_submissions:{one:"%{count} 个其它提交文件",other:"%{count} 个其它提交文件"}}}}}})}),require(["i18n!quizzes.statistics","jquery","jqueryui/dialog","jquery.instructure_misc_helpers","jquery.templateData"],function(e,t){t.scrollSidebar(),t(".essay_answer").live("click",function(e){e.preventDefault(),t(this).addClass("expanded")}),t(".download_submissions_link").click(function(e){e.preventDefault(),INST.downloadSubmissions(t(this).attr("href"))}),t(".answer,.number_answer").live("click",function(){var r=t(this).getTemplateData({textValues:["user_ids"],dataValues:["responses"]}),n=r.user_ids,o=parseInt(r.responses,10)||0;if(null!=n&&o>0){var a=t("#submitted_users_dialog");a.find(".user:not(.blank)").remove();for(var s=t(this).find(".answer_text").text(),i=t(this).parents("tr");i.length&&0==i.find("td .question_name").length;)i=i.prev();var u=i.find("td .question_name").text();n=n.split(",");var _=o-n.length,l=t.unique(n);for(var p in l){var d=l[p],m=t.grep(n,function(e){return e==d}).length,c=t("#submitted_users .user.user_"+d).text();if(m>1&&(c=c+" ("+e.t("count_attempts","attempt",{count:m})+")"),c){var g=a.find(".user.blank:first").clone(!0).removeClass("blank");g.fillTemplateData({data:{name:c}}),a.find(".users").append(g.show())}else _++}if(_>0){var g=a.find(".user.blank:first").clone(!0).removeClass("blank");g.fillTemplateData({data:{name:e.t("uncounted_submissions",{one:"1 other submission",other:"%{count} other submissions"},{count:_})}}),g.addClass("uncounted"),a.find(".users").append(g.show())}a.fillTemplateData({data:{answer_text:s,question_name:u}}),a.dialog({title:e.t("titles.submitted_users_for_quesiton","Submitted Users for %{user}",{user:u}),width:500,height:300})}})}),define("quiz_statistics",function(){}),function(){require(["jquery","compiled/models/QuizReport","compiled/views/quiz_reports/QuizReportGenerator","quiz_statistics"],function(e,t,r){var n,o,a,s,i,u,_,l;for(n=e(".quiz-reports"),_=ENV.quiz_reports,l=[],i=0,u=_.length;u>i;i++)s=_[i],o=e("<div>").appendTo(n),s.report_name=s.readable_type,a=new t(s),l.push(new r({el:o,model:a}).render());return l})}.call(this),define("compiled/bundles/quiz_statistics",function(){});