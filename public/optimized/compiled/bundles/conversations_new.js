define("translations/conversations",["i18nObj","jquery"],function(e,t){t.extend(!0,e,{translations:{ar:{conversations:{all_courses:"جميع المساقات",all_in_context:"الكل في %{context}",archive:"أرشيف",archive_conversation:"أرشفة محادثات",back:"عودة",cannot_add_to_private:"لا يمكنك إضافة مشاركين إلى محادثة خاصة.",cannot_be_empty:"لا يمكن أن تكون الرسالة فارغة",confirm:{delete_conversation:"هل تريد بالتأكيد حذف نسختك من هذه المحادثة؟ لن يمكن التراجع عن هذا الإجراء.",delete_message:"هل تريد بالتأكيد حذف نسختك من هذه الرسالة؟ لن يمكن التراجع عن هذا الإجراء."},course_name:"اسم المساق",hide:"إخفاء",mark_as_read:"وضع علامة كمقروء",mark_as_unread:"وضع علامة غير مقروء",message_deleted:"تم حذف الرسالة!",more_participants:"+%{total} أكثر",no_recipients_choose_another_group:"لا يوجد مستلمون في هذه المجموعة. الرجاء اختيار مجموعة أخرى.",no_results_found:"لم يتم العثور على نتائج",other:{one:"واحد آخر",other:"%{count} آخرين"},search_category:"بحث في %{category}",star:"وضع نجمة",star_conversation:"وضع نجمة على محادثة",unarchive:"إلغاء الأرشفة",unarchive_conversation:"إلغاء أرشفة محادثة",unstar:"إلغاء النجمة",unstar_conversation:"إزالة النجمة من محادثة"}},de:{conversations:{all_courses:"Alle Kurse",all_in_context:"Alle in %{context}",archive:"Archivieren",archive_conversation:"Konversation archivieren",back:"Zurück",cannot_add_to_private:"Sie können keine Teilnehmer zu einer privaten Konversation hinzufügen.",cannot_be_empty:"Nachricht darf nicht leer sein",confirm:{delete_conversation:"Möchten Sie Ihre Kopie dieser Konversation wirklich löschen? Diese Aktion kann nicht rückgängig gemacht werden.",delete_message:"Möchten Sie Ihre Kopie dieser Nachricht wirklich löschen? Diese Aktion kann nicht rückgängig gemacht werden."},course_name:"Kursname",hide:"Ausblenden",mark_as_read:"Als gelesen markieren",mark_as_unread:"Als ungelesen markieren",message_deleted:"Nachricht gelöscht!",more_participants:"+%{total} weitere",no_recipients_choose_another_group:"Diese Gruppe enthält keine Empfänger. Wählen Sie eine andere Gruppe aus.",no_results_found:"Keine Ergebnisse gefunden",other:{one:"1 weitere/r",other:"%{count} weitere"},search_category:"%{category} durchsuchen",star:"Mit Stern markieren",star_conversation:"Konversation mit Stern markieren",unarchive:"Archivierung rückgängig machen",unarchive_conversation:"Archivierung der Konversation rückgängig machen",unstar:"Sternmarkierung entfernen",unstar_conversation:"Sternmarkierung für Konversation entfernen"}},"en-AU":{conversations:{all_courses:"All Courses",all_in_context:"All in %{context}",archive:"Archive",archive_conversation:"Archive conversation",back:"Back",cannot_add_to_private:"You cannot add participants to a private conversation.",cannot_be_empty:"Message cannot be blank",confirm:{delete_conversation:"Are you sure you want to delete your copy of this conversation? This action cannot be undone.",delete_message:"Are you sure you want to delete your copy of this message? This action cannot be undone."},course_name:"Course name",hide:"Hide",mark_as_read:"Mark as read",mark_as_unread:"Mark as unread",message_deleted:"Message Deleted!",more_participants:"+%{total} more",no_recipients_choose_another_group:"No recipients are in this group. Please choose another group.",no_results_found:"No results found",other:{one:"1 other",other:"%{count} others"},search_category:"Search %{category}",star:"Star",star_conversation:"Star conversation",unarchive:"Unarchive",unarchive_conversation:"Unarchive conversation",unstar:"Unstar",unstar_conversation:"Unstar conversation"}},"en-GB":{conversations:{all_courses:"All courses",all_in_context:"All in %{context}",archive:"Archive",archive_conversation:"Archive conversation",back:"Back",cannot_add_to_private:"You cannot add participants to a private conversation.",cannot_be_empty:"Message cannot be blank",confirm:{delete_conversation:"Are you sure you want to delete your copy of this conversation? This action cannot be undone.",delete_message:"Are you sure you want to delete your copy of this message? This action cannot be undone."},course_name:"Course name",hide:"Hide",mark_as_read:"Mark as read",mark_as_unread:"Mark as unread",message_deleted:"Message deleted!",more_participants:"+%{total} more",no_recipients_choose_another_group:"No recipients are in this group. Please choose another group.",no_results_found:"No results found",other:{one:"1 other",other:"%{count} others"},search_category:"Search %{category}",star:"Star",star_conversation:"Star conversation",unarchive:"Unarchive",unarchive_conversation:"Unarchive conversation",unstar:"Unstar",unstar_conversation:"Unstar conversation"}},es:{conversations:{all_courses:"Todos los cursos",all_in_context:"Todo lo incluido en %{context}",archive:"Archivo",archive_conversation:"Archivar conversación",back:"Volver",cannot_add_to_private:"No puede añadir participantes a una conversación privada.",cannot_be_empty:"El mensaje no puede estar vacío",confirm:{delete_conversation:"¿Está seguro de que desea borrar su copia de esta conversación? Esta acción no se puede deshacer.",delete_message:"¿Está seguro de que quiere borrar su copia de este mensaje? Esta acción no se puede deshacer."},course_name:"Nombre del curso",hide:"Esconder",mark_as_read:"Marcar como leído",mark_as_unread:"Marcar como no leído",message_deleted:"Mensaje eliminado",more_participants:"+%{total} más",no_recipients_choose_another_group:"No hay destinatarios en este grupo. Por favor, elija otro grupo.",no_results_found:"No se encontraron resultados",other:{one:"1 más",other:"%{count} más"},search_category:"Buscar %{category}",star:"Señalar",star_conversation:"Marcar conversación como destacada",unarchive:"Desarchivar",unarchive_conversation:"Desarchivar conversación",unstar:"No Señalar",unstar_conversation:"Eliminar la conversación de destacados"}},"fa-IR":{conversations:{all_courses:"همه درس ها",all_in_context:"همه در %{context} ",archive:"بایگانی",archive_conversation:"بایگانی گفتگو",back:"بازگشت",cannot_add_to_private:"نمی توانید به یک گفت و گوی خصوصی شرکت کننده اضافه کنید.",cannot_be_empty:"پیام نمی تواند خالی باشد",confirm:{delete_conversation:"مطمئنید که می خواهید نسحه کپی این گفت و گو حذف شود؟ این اقدام را نمی توان لغو کرد.",delete_message:"مطمئنید که می خواهید نسخه این پیام حذف شود؟ این اقدام را نمی توان لغو کرد."},course_name:"نام درس",hide:"مخفی کردن",mark_as_read:"علامتگذاری به عنوان خوانده شده ",mark_as_unread:"علامتگذاری به عنوان خوانده نشده",message_deleted:"پیام حذف شد!",more_participants:"+%{total} دیگر",no_recipients_choose_another_group:"هیچ گیرنده ای در این گروه یافت نشد. گروه دیگری را انتخاب کنید.",no_results_found:"نتیجه ای یافت نشد",other:{one:"%{count} نفر دیگر",other:"%{count} نفر دیگر"},search_category:"جستجوی  %{category}",star:"ستاره دار کردن",star_conversation:"ستاره دار کردن گفتگو",unarchive:"لغو بایگانی",unarchive_conversation:"لغو بایگانی گفتگو",unstar:"برداشتن ستاره",unstar_conversation:"برداشتن ستاره گفتگو"}},fr:{conversations:{all_courses:"Tous les cours",all_in_context:"Tout ce qui concerne %{context}",archive:"Archiver",archive_conversation:"Archiver la conversation",back:"Précédent",cannot_add_to_private:"Vous ne pouvez pas ajouter de participants dans une conversation privée.",cannot_be_empty:"Le message ne doit pas être vide",confirm:{delete_conversation:"Voulez-vous vraiment supprimer le contenu de cette conversation ? Cette action est irréversible.",delete_message:"Voulez-vous vraiment supprimer le contenu de ce message ? Cette action est irréversible."},course_name:"Nom du cours",hide:"Masquer",mark_as_read:"Marquer comme lues",mark_as_unread:"Marquer comme non lues",message_deleted:"Message supprimé !",more_participants:"+%{total} en plus",no_recipients_choose_another_group:"Ce groupe ne contient aucun destinataire. Veuillez choisir un autre groupe.",no_results_found:"Aucun résultat trouvé",other:{one:"1 autre",other:"%{count} autres"},search_category:"Rechercher dans %{category}",star:"Marquer d’un astérisque",star_conversation:"Marquer la conversation d’une étoile",unarchive:"Désarchiver",unarchive_conversation:"Désarchiver la conversation",unstar:"Supprimer l’astérisque",unstar_conversation:"Retirer l’étoile de la conversation"}},ja:{conversations:{all_courses:"すべてのコース",all_in_context:"%{context} のすべて",archive:"アーカイブ",archive_conversation:"会話のアーカイブ",back:"戻る",cannot_add_to_private:"非公開の会話には参加者を追加できません。",cannot_be_empty:"メッセージは空白にできません",confirm:{delete_conversation:"この会話のコピーを削除してもよろしいですか? この操作は取り消しできません。",delete_message:"このメッセージのコピーを削除してもよろしいですか? この操作は取り消しできません。"},course_name:"コース名",hide:"非表示",mark_as_read:"既読にする",mark_as_unread:"未読にする",message_deleted:"メッセージが削除されました!",more_participants:"+%{total} 分、表示を増やす",no_recipients_choose_another_group:"このグループには受信者がいません。別のグループを選択してください。",no_results_found:"結果が見つかりません",other:{one:"その他 %{count} 件",other:"その他 %{count} 件"},search_category:"%{category} の検索",star:"スター",star_conversation:"会話にスターを付ける",unarchive:"アーカイブ解凍",unarchive_conversation:"会話のアーカイブを解凍",unstar:"スター取り消し",unstar_conversation:"会話からスターを削除"}},ko:{conversations:{all_courses:"모든 과목",all_in_context:"%{context}에 속한 모두",archive:"저장소",archive_conversation:"대화 저장",back:"뒤로",cannot_add_to_private:"사적인 대화에 참여자를 추가할 수 없습니다.",cannot_be_empty:"메시지 내용이 있어야 함",confirm:{delete_conversation:"이 대화의 사본을 삭제하시겠습니까? 이 작업은 실행을 취소할 수 없습니다.",delete_message:"이 메시지의 사본을 삭제하시겠습니까? 이 작업은 실행을 취소할 수 없습니다."},course_name:"과목 이름",hide:"숨기기",mark_as_read:"읽음으로 표시",mark_as_unread:"읽지 않음으로 표시",more_participants:"+%{total}개 더",no_recipients_choose_another_group:"이 그룹에 수신인이 없습니다. 다른 그룹을 선택하시기 바랍니다.",no_results_found:"결과 없음",other:{one:"외 %{count}명",other:"외 %{count}명"},search_category:"%{category} 검색",star:"별표 표시",star_conversation:"대화 별표하기",unarchive:"보관 해제",unarchive_conversation:"대화 저장 해제",unstar:"별표 해제",unstar_conversation:"대화 별표 취소"}},nb:{conversations:{all_courses:"Alle kurs",all_in_context:"Alle i %{context}",archive:"Arkiv",archive_conversation:"Arkiver samtale",back:"Tilbake",cannot_add_to_private:"Du kan ikke legge til deltakere i private samtaler.",cannot_be_empty:"Beskjeden kan ikke være tom",confirm:{delete_conversation:"Er du sikker på at du vil slette din kopi av denne samtalen? Denne handlingen kan ikke angres.",delete_message:"Er du sikker på at du vil slette din kopi av denne meldingen? Denne handlingen kan ikke gjøres om."},course_name:"Kursnavn",hide:"Skjul",mark_as_read:"Merk som lest",mark_as_unread:"Merk som ulest",message_deleted:"Melding slettet!",more_participants:"+%{total} til",no_recipients_choose_another_group:"Det er ingen mottakere i denne gruppen. Velg en annen gruppe.",no_results_found:"Ingen resultater funnet",other:{one:"1 annen",other:"%{count} andre"},search_category:"Søk %{category}",star:"Merk med stjerne",star_conversation:"Merk samtalen med stjerne",unarchive:"Fjern arkivering",unarchive_conversation:"Fjern samtalen fra arkivering",unstar:"Fjern stjernemerking",unstar_conversation:"Fjern stjernemerking fra samtalen"}},nl:{conversations:{all_courses:"Alle cursussen",all_in_context:"Alles in %{context}",archive:"Archieveren",archive_conversation:"Gesprek archieveren",back:"Terug",cannot_add_to_private:"Je kunt geen deelnemers toevoegen aan een privé discussie.",cannot_be_empty:"Bericht kan niet leeg zijn",confirm:{delete_conversation:"Weet je zeker dat je jouw kopie van het gesprek wilt verwijderen? Deze actie kan niet teruggedraaid worden.",delete_message:"Weet je zeker dat je jouw kopie van dit bericht wilt verwijderen? Deze actie kan niet ongedaan gemaakt worden."},course_name:"Cursusnaam",hide:"Verbergen",mark_as_read:"Als gelezen markeren",mark_as_unread:"Als ongelezen markeren",message_deleted:"Bericht verwijderd!",more_participants:"+%{total} meer",no_recipients_choose_another_group:"Er bevinden zich geen geadresseerden in deze groep. Kies een andere groep",no_results_found:"Geen resultaten gevonden",other:{one:"1 andere",other:"%{count} anderen"},search_category:"Zoeken %{category}",star:"Ster",star_conversation:"Gesprek met ster",unarchive:"Uit het archief halen",unarchive_conversation:"Gesprek uit het archief halen",unstar:"Ster verwijderen",unstar_conversation:"Ster van gesprek verwijderen"}},pl:{conversations:{all_courses:"Wszystkie kursy",all_in_context:"Wszystko w %{context}",archive:"Archiwum",archive_conversation:"Dodaj konwersację do archiwum",back:"Wstecz",cannot_add_to_private:"Nie można dodawać uczestników do prywatnej rozmowy.",cannot_be_empty:"Wiadomość nie może być pusta",confirm:{delete_conversation:"Czy na pewno chcesz usunąć kopię tej konwersacji? Tej czynności nie można cofnąć.",delete_message:"Czy na pewno usunąć kopię tej wiadomości? Tej czynności nie można cofnąć."},course_name:"Nazwa kursu",hide:"Ukryj",mark_as_read:"Oznacz jako przeczytane",mark_as_unread:"Oznacz jako nieprzeczytane",message_deleted:"Wiadomość usunięta!",more_participants:"+%{total} więcej",no_recipients_choose_another_group:"Brak odbiorców w tej grupie. Wybierz inną grupę.",no_results_found:"Nie znaleziono wyników",other:{one:"i 1 inna",other:"i %{count} innych"},search_category:"Wyszukaj %{category}",star:"Oznaczone gwiazdą",star_conversation:"Oznacz konwersację gwiazdką",unarchive:"Usuń z archiwum",unarchive_conversation:"Usuń rozmowę z archiwum",unstar:"Nieoznaczone gwiazdą",unstar_conversation:"Odznacz gwiazdkę z konwersacji"}},pt:{conversations:{all_courses:"Todas as disciplinas",all_in_context:"Tudo em %{context}",archive:"Arquivar",archive_conversation:"Arquivar conversa",back:"Voltar",cannot_add_to_private:"Não é possível adicionar participantes a uma conversa privada.",cannot_be_empty:"A mensagem não pode ficar em branco",confirm:{delete_conversation:"Tem a certeza de que pretende eliminar a cópia desta conversa? Esta ação é irreversível.",delete_message:"Tem a certeza de que pretende eliminar a sua cópia desta mensagem? Esta ação não pode ser anulada."},course_name:"Nome da disciplina",hide:"Ocultar",mark_as_read:"Marcar como lidas",mark_as_unread:"Marcar como não lidas",message_deleted:"Mensagem eliminada!",more_participants:"+ outros %{total}",no_recipients_choose_another_group:"Não existem destinatários neste grupo. Selecione outro grupo.",no_results_found:"Sem resultados",other:{one:"mais 1",other:"mais %{count}"},search_category:"Procurar %{category}",star:"Marcar",star_conversation:"Marcar conversa",unarchive:"Desarquivar",unarchive_conversation:"Desarquivar conversa",unstar:"Desmarcar",unstar_conversation:"Desmarcar conversa"}},"pt-BR":{conversations:{all_courses:"Todos os cursos",all_in_context:"Tudo em %{context}",archive:"Arquivar",archive_conversation:"Arquivar conversa",back:"Voltar",cannot_add_to_private:"Você não pode adicionar participantes a uma conversa privada.",cannot_be_empty:"Mensagem não pode estar em branco",confirm:{delete_conversation:"Tem certeza que deseja excluir sua cópia desta conversa? Esta ação não pode ser desfeita.",delete_message:"Tem certeza que deseja excluir sua cópia desta mensagem? Esta ação não pode ser desfeita."},course_name:"Nome do curso",hide:"Ocultar",mark_as_read:"Marcar como lido",mark_as_unread:"Marcar como não lido",message_deleted:"Mensagem excluída!",more_participants:"+%{total} mais",no_recipients_choose_another_group:"Nenhum recipiente está neste grupo. Escolha outro grupo.",no_results_found:"Nenhum resultado encontrado",other:{one:"1 outro",other:"%{count} outros"},search_category:"Pesquisar %{category}",star:"Adicionar aos favoritos",star_conversation:"Adicionar conversa aos favoritos",unarchive:"Desarquivar",unarchive_conversation:"Cancelar arquivamento da conversa",unstar:"Remover dos favoritos",unstar_conversation:"Remover conversa dos favoritos"}},ru:{conversations:{all_courses:"Все курсы",all_in_context:"Включая все %{context}",archive:"Архив",archive_conversation:"Архивировать разговор",back:"Назад",cannot_add_to_private:"Вы не можете добавлять участников к приватному разговору.",cannot_be_empty:"Сообщение не может быть пустым",confirm:{delete_conversation:"Вы уверены, что хотите удалить свою копию этого разговора? Это действие не может быть отменено.",delete_message:"Вы уверены, что хотите удалить свою копию этого сообщения? Это действие не может быть отменено."},course_name:"Название курса",hide:"Скрыть",mark_as_read:"Отметить как прочитанное",mark_as_unread:"Отметить как непрочитанное",message_deleted:"Сообщение удалено!",more_participants:"+%{total} больше",no_recipients_choose_another_group:"В данной группе нет получателей. Выберите другую группу.",no_results_found:"Результаты не найдены",other:{one:"1 другой",other:"%{count} других"},search_category:"Поиск %{category}",star:"Отметить звездочкой ",star_conversation:"Отметить разговор звездочкой",unarchive:"Разархивировать",unarchive_conversation:"Разархивировать разговор",unstar:"Снять метку",unstar_conversation:"Снять метку с разговора"}},tr:{conversations:{all_courses:"Tüm Dersler",all_in_context:"%{context}'ın Tümü",archive:"Arşiv",archive_conversation:"Arşivdeki Karşılıklı Görüşmeler",back:"Geri",cannot_add_to_private:"Özel olan karşılıklı konuşmaya kişi eklenemiyor.",cannot_be_empty:"Mesaj boş olamaz",confirm:{delete_conversation:"Bu karşılıklı konuşmanın sizdeki kopyasını silmek istediğinize emin misiniz? Bu eylem geri alınamaz.",delete_message:"Bu mesajın sizdeki kopyasını silmek istediğinize emin misiniz? Bu eylem geri alınamaz."},course_name:"Ders adı",hide:"Gizle",mark_as_read:"Okundu olarak işaretle",mark_as_unread:"Okunmadı olarak işaretle",message_deleted:"Mesaj Silindi!",more_participants:"+%{total} daha fazla",no_recipients_choose_another_group:"Bu grupta alıcılar bulunamadı. Lütfen farklı bir grup seçiniz.",no_results_found:"Sonuç bulunamadı",other:{one:"diğer 1",other:"diğer %{count}"},search_category:"%{category} Ara",star:"Yıldız Ver",star_conversation:"Ka",unarchive:"Arşivlenmemiş",unarchive_conversation:"Arşivlenmemiş karşılıklı konuşma",unstar:"Yıldız Al",unstar_conversation:"Tartışmadan yıldızı kaldır"}},zh:{conversations:{all_courses:"所有课程",all_in_context:"全部在 %{context} 中",archive:"存档",archive_conversation:"存档会话",back:"返回",cannot_add_to_private:"不能将参与者添加到私人会话。",cannot_be_empty:"消息不能为空",confirm:{delete_conversation:"是否确定要删除您拥有的此会话的副本？此操作将不可恢复。",delete_message:"是否确定要删除您拥有的此消息的副本? 此操作将不可恢复。"},course_name:"课程名称",hide:"隐藏",mark_as_read:"标记为已读",mark_as_unread:"标记为未读",message_deleted:"消息已删除！",more_participants:"+%{total} 更多",no_recipients_choose_another_group:"该小组中没有收件人。请另选一个小组。",no_results_found:"未找到结果",other:{one:"其它 %{count} 门课程",other:"其它 %{count} 门课程"},search_category:"搜索 %{category}",star:"标记",star_conversation:"标记会话",unarchive:"取消存档",unarchive_conversation:"取消存档会话",unstar:"取消标记",unstar_conversation:"取消标记会话"}}}})}),function(){var e={}.hasOwnProperty,t=function(t,n){function o(){this.constructor=t}for(var s in n)e.call(n,s)&&(t[s]=n[s]);return o.prototype=n.prototype,t.prototype=new o,t.__super__=n.prototype,t};define("compiled/models/Message",["underscore","Backbone","compiled/str/TextHelper"],function(e,n,o){var s,a,r,i;return r=n.Model,s=n.Collection,a=function(n){function a(){return i=a.__super__.constructor.apply(this,arguments)}return t(a,n),a.prototype.initialize=function(){return this.messageCollection=new s,this.on("change:messages",this.handleMessages)},a.prototype.parse=function(t){var n;return t.messages&&(n=function(n){return e.find(t.participants,{id:n})}),e.each(t.messages,function(e){var s,a,r,i,c;for(e.author=n(e.author_id),e.participants=[],e.participantNames=[],c=e.participating_user_ids,r=0,i=c.length;i>r;r++)s=c[r],s!==e.author_id&&(a=n(s))&&(e.participants.push(a),e.participantNames.push(a.name));return e.participants.length>2&&(e.summarizedParticipantNames=e.participantNames.slice(0,2),e.hiddenParticipantCount=e.participants.length-2),e.context_name=t.context_name,e.has_attachments=e.media_comment||e.attachments.length,e.bodyHTML=o.formatMessage(e.body)}),t},a.prototype.handleMessages=function(){return this.messageCollection.reset(this.get("messages")||[]),this.listenTo(this.messageCollection,"change:selected",this.handleSelection)},a.prototype.handleSelection=function(e,t){return t?this.messageCollection.each(function(t){return t!==e?t.set({selected:!1}):void 0}):void 0},a.prototype.unread=function(){return"unread"===this.get("workflow_state")},a.prototype.starred=function(){return this.get("starred")},a.prototype.toggleReadState=function(e){return null==e&&(e=this.unread()),this.set("workflow_state",e?"read":"unread")},a.prototype.toggleStarred=function(e){return null==e&&(e=!this.starred()),this.set("starred",e)},a.prototype.timestamp=function(){var t,n;return n=new Date(this.get("last_message_at")).getTime(),t=new Date(this.get("last_authored_message_at")).getTime(),new Date(e.max([n,t]))},a.prototype.toJSON=function(){return{conversation:e.extend(a.__super__.toJSON.apply(this,arguments),{unread:this.unread(),starred:this.starred(),timestamp:this.timestamp()})}},a}(r)})}.call(this),function(){var e=function(e,t){return function(){return e.apply(t,arguments)}},t={}.hasOwnProperty,n=function(e,n){function o(){this.constructor=e}for(var s in n)t.call(n,s)&&(e[s]=n[s]);return o.prototype=n.prototype,e.prototype=new o,e.__super__=n.prototype,e},o=[].slice,s=[].indexOf||function(e){for(var t=0,n=this.length;n>t;t++)if(t in this&&this[t]===e)return t;return-1};define("compiled/collections/PaginatedCollection",["Backbone","underscore"],function(t,a){var r,i,c;return i=function(e){return null==e&&(e=""),e.charAt(0).toUpperCase()+e.substring(1).toLowerCase()},r=function(t){function r(){return this._setStateAfterFetch=e(this._setStateAfterFetch,this),c=r.__super__.constructor.apply(this,arguments)}return n(r,t),r.prototype.nameRegex=/rel="([a-z]+)/,r.prototype.linkRegex=/^<([^>]+)/,r.prototype.pageRegex=/\Wpage=(\d+)/,r.prototype.perPageRegex=/\Wper_page=(\d+)/,r.prototype.initialize=function(){return r.__super__.initialize.apply(this,arguments),this.urls={}},r.prototype.fetch=function(e){var t,n,s,c,l=this;return null==e&&(e={}),e=a.clone(e),this.loadedAll=!1,n="fetching"+i(e.page)+"Page",this[n]=!0,null!=e.page?((null!=(c=this.urls)?c[e.page]:void 0)&&(e.url=this.urls[e.page]),null==e.remove&&(e.remove=!1),e.data=""):null==e.reset&&(e.reset=!0),this.trigger("beforeFetch",this,e),null!=e.page&&this.trigger("beforeFetch:"+e.page,this,e),s=null,e.dataFilter=function(t){return l[n]=!1,l._setStateAfterFetch(s,e),t},t=e.dfd||$.Deferred(),s=r.__super__.fetch.call(this,e).done(function(n,s,a){var r;return l.trigger("fetch",l,n,e),null!=e.page&&l.trigger("fetch:"+e.page,l,n,e),(null!=(r=l.urls)?r.next:void 0)||(l.trigger.apply(l,["fetched:last"].concat(o.call(arguments))),l.loadedAll=!0),l.loadAll&&null!=l.urls.next?setTimeout(function(){return l.fetch({page:"next",dfd:t})}):t.resolve(n,s,a)}),t.abort=s.abort,t.success=t.done,t.error=t.fail,t},r.prototype.canFetch=function(e){return null!=this.urls&&null!=this.urls[e]},r.prototype._setStateAfterFetch=function(e,t){var n,o,a,r,i,c,l,u,d,p,h,m,_,g,v,f;return null==(p=this._urlCache)&&(this._urlCache=[]),h=t.url,u=s.call(this._urlCache,h)<0,u||this._urlCache.push(t.url),n=!this.atLeastOnePageFetched,i=n||("next"===(m=t.page)||"bottom"===m)&&u,c=n||("prev"===(_=t.page)||"top"===_)&&u,a=this.urls,this.urls=this._parsePageLinks(e),i&&null!=this.urls.next?this.urls.bottom=this.urls.next:this.urls.next?this.urls.bottom=a.bottom:delete this.urls.bottom,c&&null!=this.urls.prev?this.urls.top=this.urls.prev:this.urls.prev?this.urls.top=a.top:delete this.urls.top,l=null!=(g=this.urls.first)?g:this.urls.next,null!=l&&(r=parseInt(l.match(this.perPageRegex)[1],10),(null!=(v=(d=null!=(f=this.options)?f:this.options={}).params)?v:d.params={}).per_page=r),this.urls.last&&(o=this.urls.last.match(this.pageRegex))&&(this.totalPages=parseInt(o[1],10)),this.atLeastOnePageFetched=!0},r.prototype._parsePageLinks=function(e){var t,n,o=this;return t=null!=(n=e.getResponseHeader("link"))?n.split(","):void 0,null==t&&(t=[]),a.reduce(t,function(e,t){var n,s;return n=t.match(o.nameRegex)[1],s=t.match(o.linkRegex)[1],e[n]=s,e},{})},r}(t.Collection)})}.call(this),function(){var e={}.hasOwnProperty,t=function(t,n){function o(){this.constructor=t}for(var s in n)e.call(n,s)&&(t[s]=n[s]);return o.prototype=n.prototype,t.prototype=new o,t.__super__=n.prototype,t};define("compiled/collections/MessageCollection",["underscore","compiled/collections/PaginatedCollection","compiled/models/Message"],function(e,n,o){var s,a;return s=function(n){function s(){return a=s.__super__.constructor.apply(this,arguments)}return t(s,n),s.prototype.model=o,s.prototype.url="/api/v1/conversations",s.prototype.params={scope:"inbox"},s.prototype.comparator=function(t,n){var o;return o=e.map([t,n],function(e){return e.timestamp().getTime()}),o[0]>o[1]?-1:o[1]>o[0]?1:0},s.prototype.selectRange=function(t){var n,o,s,a;return s=this.indexOf(t),o=e.last(this.view.selectedMessages),this.each(function(e){return e.set("selected",!1)}),n=this.indexOf(o),a=this.slice(Math.min(s,n),Math.max(s,n)+1),s>n&&a.reverse(),e.each(a,function(e){return e.set("selected",!0)})},s}(n)})}.call(this),define("translations/conversations.message",["i18nObj","jquery"],function(e,t){t.extend(!0,e,{translations:{ar:{conversations:{message:{mark_as_read:"وضع علامة كمقروء",mark_as_unread:"وضع علامة غير مقروء",no_subject:"لا يوجد موضوع",open_message:"فتح الرسالة",star_conversation:"وضغ نجمة على محادثة",starred:"تم وضع نجمة عليها",total_messages:"إجمالي الرسائل",unread:"غير مقروء",unstar_conversation:"إزالة النجمة من محادثة"}}},de:{conversations:{message:{mark_as_read:"Als gelesen markieren",mark_as_unread:"Als ungelesen markieren",no_subject:"Kein Betreff",open_message:"Nachricht öffnen",star_conversation:"Konversation mit Stern markieren",starred:"Mit Stern markiert",total_messages:"Nachrichten gesamt",unread:"Ungelesen",unstar_conversation:"Sternmarkierung für Konversation entfernen"}}},"en-AU":{conversations:{message:{mark_as_read:"Mark as read",mark_as_unread:"Mark as unread",no_subject:"No subject",open_message:"Open Message",star_conversation:"Star conversation",starred:"Starred",total_messages:"Total messages",unread:"Unread",unstar_conversation:"Unstar conversation"}}},"en-GB":{conversations:{message:{mark_as_read:"Mark as read",mark_as_unread:"Mark as unread",no_subject:"No subject",open_message:"Open message",star_conversation:"Star conversation",starred:"Starred",total_messages:"Total messages",unread:"Unread",unstar_conversation:"Unstar conversation"}}},es:{conversations:{message:{mark_as_read:"Marcar como leído",mark_as_unread:"Marcar como no leído",no_subject:"Sin asunto",open_message:"Abrir mensaje",star_conversation:"Marcar la conversación como destacada",starred:"Destacado",total_messages:"Total de mensajes",unread:"No leído",unstar_conversation:"Eliminar la conversación de destacados"}}},"fa-IR":{conversations:{message:{mark_as_read:"علامت گذاری به عنوان خوانده شده ",mark_as_unread:"علامتگذاری به عنوان خوانده نشده",no_subject:"موضوع موجود نیست",open_message:"باز کردن پیام",star_conversation:"ستاره دار کردن گفتگو",starred:"ستاره‌ دار شد",total_messages:"کل پیام ها",unread:"خوانده نشده",unstar_conversation:"برداشتن ستاره گفتگو"}}},fr:{conversations:{message:{mark_as_read:"Marquer comme lues",mark_as_unread:"Marquer comme non lues",no_subject:"Aucun sujet",open_message:"Ouvrir le message",star_conversation:"Marquer la conversation d’une étoile",starred:"Avec un astérisque",total_messages:"Messages au total",unread:"Non lues",unstar_conversation:"Retirer l’étoile de la conversation"}}},ja:{conversations:{message:{mark_as_read:"既読にする",mark_as_unread:"未読にする",no_subject:"件名なし",open_message:"メッセージを開く",star_conversation:"会話にスターを付ける",starred:"スターあり",total_messages:"合計メッセージ数",unread:"未読",unstar_conversation:"会話からスターを削除"}}},ko:{conversations:{message:{mark_as_read:"읽음으로 표시",mark_as_unread:"읽지 않음으로 표시",no_subject:"주제 없음",open_message:"메시지 열기",star_conversation:"대화에 별표하기",starred:"별표 표시된 메시지",total_messages:"총 메시지 수",unread:"읽지 않은 메시지",unstar_conversation:"대화 별표 취소"}}},nb:{conversations:{message:{mark_as_read:"Merk som lest",mark_as_unread:"Merk som ulest",no_subject:"Intet emne",open_message:"Åpne beskjed",star_conversation:"Merk samtalen med stjerne",starred:"Merket med stjerne",total_messages:"Totalt antall beskjeder",unread:"Uleste",unstar_conversation:"Fjern stjernemerking fra samtalen"}}},nl:{conversations:{message:{mark_as_read:"Als gelezen markeren",mark_as_unread:"Als ongelezen markeren",no_subject:"Geen onderwerp",open_message:"Bericht openen",star_conversation:"Gesprek met ster",starred:"Met ster",total_messages:"Totaal aantal berichten",unread:"Ongelezen",unstar_conversation:"Ster van gesprek verwijderen"}}},pl:{conversations:{message:{mark_as_read:"Oznacz jako przeczytane",mark_as_unread:"Oznacz jako nieprzeczytane",no_subject:"Brak tematu",open_message:"Otwórz wiadomość",star_conversation:"Oznacz rozmowę gwiazdką",starred:"Oznaczone gwiazdką",total_messages:"Łączna liczba wiadomości",unread:"Nieprzeczytane",unstar_conversation:"Odznacz gwiazdkę z konwersacji"}}},pt:{conversations:{message:{mark_as_read:"Marcar como lida",mark_as_unread:"Marcar como não lida",no_subject:"Sem assunto",open_message:"Abrir mensagem",star_conversation:"Marcar conversa",starred:"Marcadas",total_messages:"Total de mensagens",unread:"Não lidas",unstar_conversation:"Desmarcar conversa"}}},"pt-BR":{conversations:{message:{mark_as_read:"Marcar como lido",mark_as_unread:"Marcar como não lido",no_subject:"Nenhum assunto",open_message:"Abrir mensagem",star_conversation:"Iniciar conversa",starred:"Marcada como favorita",total_messages:"Total de mensagens",unread:"Não lido",unstar_conversation:"Remover conversa dos favoritos"}}},ru:{conversations:{message:{mark_as_read:"Отметить как прочитанное",mark_as_unread:"Отметить как непрочитанное",no_subject:"Нет темы",open_message:"Открыть сообщение",star_conversation:"Отметить разговор звездочкой",starred:"Отмечено звездочкой",total_messages:"Всего сообщений",unread:"Непрочитанное",unstar_conversation:"Снять метку с разговора"}}},tr:{conversations:{message:{mark_as_read:"Okundu olarak işaretle",mark_as_unread:"Okunmadı olarak işaretle",no_subject:"Konu yok",open_message:"Mesajı Aç",star_conversation:"Ka",starred:"Yıldız konulmuş",total_messages:"Toplam mesajlar",unread:"Okunmamış",unstar_conversation:"Tartışmadan yıldızı kaldır"}}},zh:{conversations:{message:{mark_as_read:"标记为已读",mark_as_unread:"标记为未读",no_subject:"无主题",open_message:"打开消息",star_conversation:"标记会话",starred:"已标记",total_messages:"总消息数",unread:"未读",unstar_conversation:"取消标记会话"}}}}})}),define("jst/conversations/message",["compiled/handlebars_helpers","i18n!conversations.message"],function(e){var t=e.template,n=e.templates=e.templates||{};return n["conversations/message"]=t(function(e,t,n,o,s){function a(e,t){var o,s,a="";return a+="\n    ",(s=n.subject)?o=s.call(e,{hash:{},data:t}):(s=e&&e.subject,o=typeof s===y?s.call(e,{hash:{},data:t}):s),a+=b(o)+"\n  "}function r(e,t){var o,s,a,r="";return r+="\n    (",s=n.t||e&&e.t,a={hash:{scope:"conversations.message"},data:t},o=s?s.call(e,"no_subject","No subject",a):k.call(e,"t","no_subject","No subject",a),(o||0===o)&&(r+=o),r+=")\n  "}function i(){return"active"}function c(e,t){var o,s,a;return s=n.t||e&&e.t,a={hash:{scope:"conversations.message"},data:t},o=s?s.call(e,"unstar_conversation","Unstar conversation",a):k.call(e,"t","unstar_conversation","Unstar conversation",a),o||0===o?o:""}function l(e,t){var o,s,a;return s=n.t||e&&e.t,a={hash:{scope:"conversations.message"},data:t},o=s?s.call(e,"star_conversation","Star conversation",a):k.call(e,"t","star_conversation","Star conversation",a),o||0===o?o:""}function u(){return"true"}function d(){return"false"}function p(){return"read"}function h(e,t){var o,s,a;return s=n.t||e&&e.t,a={hash:{scope:"conversations.message"},data:t},o=s?s.call(e,"mark_as_read","Mark as read",a):k.call(e,"t","mark_as_read","Mark as read",a),o||0===o?o:""}function m(e,t){var o,s,a;return s=n.t||e&&e.t,a={hash:{scope:"conversations.message"},data:t},o=s?s.call(e,"mark_as_unread","Mark as unread",a):k.call(e,"t","mark_as_unread","Mark as unread",a),o||0===o?o:""
}this.compilerInfo=[4,">= 1.0.0"],n=this.merge(n,e.helpers),s=s||{};var _,g,v,f="",y="function",b=this.escapeExpression,k=n.helperMissing,w=this;return f+='<b class="author">'+b((g=n.list||t&&t.list,v={hash:{propName:"name",limit:2},data:s},g?g.call(t,t&&t.participants,v):k.call(t,"list",t&&t.participants,v)))+'</b>\n\n<span class="date pull-right">'+b((g=n.friendlyDatetime||t&&t.friendlyDatetime,v={hash:{},data:s},g?g.call(t,t&&t.timestamp,v):k.call(t,"friendlyDatetime",t&&t.timestamp,v)))+'</span>\n\n<p class="subject">\n  ',_=n["if"].call(t,t&&t.subject,{hash:{},inverse:w.program(3,r,s),fn:w.program(1,a,s),data:s}),(_||0===_)&&(f+=_),f+='\n</p>\n\n<span class="message-count label">\n  ',(g=n.message_count)?_=g.call(t,{hash:{},data:s}):(g=t&&t.message_count,_=typeof g===y?g.call(t,{hash:{},data:s}):g),f+=b(_)+'\n  <span class="screenreader-only">',g=n.t||t&&t.t,v={hash:{scope:"conversations.message"},data:s},_=g?g.call(t,"total_messages","Total messages",v):k.call(t,"t","total_messages","Total messages",v),(_||0===_)&&(f+=_),f+='</span>\n</span>\n\n<div class="summary">',(g=n.last_message)?_=g.call(t,{hash:{},data:s}):(g=t&&t.last_message,_=typeof g===y?g.call(t,{hash:{},data:s}):g),f+=b(_)+'</div>\n\n<ul class="message-actions unstyled">\n  <li>\n    <a href="#"\n       class="star-btn ',_=n["if"].call(t,t&&t.starred,{hash:{},inverse:w.noop,fn:w.program(5,i,s),data:s}),(_||0===_)&&(f+=_),f+='"\n       title="',_=n["if"].call(t,t&&t.starred,{hash:{},inverse:w.program(9,l,s),fn:w.program(7,c,s),data:s}),(_||0===_)&&(f+=_),f+='"\n       aria-checked="',_=n["if"].call(t,t&&t.starred,{hash:{},inverse:w.program(13,d,s),fn:w.program(11,u,s),data:s}),(_||0===_)&&(f+=_),f+='"\n       role="checkbox">\n      &#9734;\n      <span class="screenreader-only">\n        ',g=n.t||t&&t.t,v={hash:{scope:"conversations.message"},data:s},_=g?g.call(t,"starred","Starred",v):k.call(t,"t","starred","Starred",v),(_||0===_)&&(f+=_),f+='\n      </span>\n    </a>\n  </li>\n  <li>\n    <a href="#"\n       class="read-state ',_=n.unless.call(t,t&&t.unread,{hash:{},inverse:w.noop,fn:w.program(15,p,s),data:s}),(_||0===_)&&(f+=_),f+='"\n       role="checkbox"\n       aria-checked="',_=n["if"].call(t,t&&t.unread,{hash:{},inverse:w.program(13,d,s),fn:w.program(11,u,s),data:s}),(_||0===_)&&(f+=_),f+='"\n       title="',_=n["if"].call(t,t&&t.unread,{hash:{},inverse:w.program(19,m,s),fn:w.program(17,h,s),data:s}),(_||0===_)&&(f+=_),f+='">\n      <span class="screenreader-only">\n        ',g=n.t||t&&t.t,v={hash:{scope:"conversations.message"},data:s},_=g?g.call(t,"unread","Unread",v):k.call(t,"t","unread","Unread",v),(_||0===_)&&(f+=_),f+='\n      </span>\n    </a>\n  </li>\n</ul>\n\n<a href="#" class="open-message" role="button">\n  ',g=n.t||t&&t.t,v={hash:{scope:"conversations.message"},data:s},_=g?g.call(t,"open_message","Open Message",v):k.call(t,"t","open_message","Open Message",v),(_||0===_)&&(f+=_),f+="\n</a>\n"}),n["conversations/message"]}),function(){var e={}.hasOwnProperty,t=function(t,n){function o(){this.constructor=t}for(var s in n)e.call(n,s)&&(t[s]=n[s]);return o.prototype=n.prototype,t.prototype=new o,t.__super__=n.prototype,t};define("compiled/views/conversations/MessageView",["i18n!conversations","Backbone","underscore","jst/conversations/message"],function(e,n,o,s){var a,r,i;return r=n.View,a=function(n){function a(){return i=a.__super__.constructor.apply(this,arguments)}return t(a,n),a.prototype.tagName="li",a.prototype.template=s,a.prototype.els={".star-btn":"$starBtn",".read-state":"$readBtn"},a.prototype.events={click:"onSelect","click .open-message":"onSelect","click .star-btn":"toggleStar","click .read-state":"toggleRead",mousedown:"onMouseDown"},a.prototype.messages={read:e.t("mark_as_read","Mark as read"),unread:e.t("mark_as_unread","Mark as unread"),star:e.t("star_conversation","Star conversation"),unstar:e.t("unstar_conversation","Unstar conversation")},a.prototype.initialize=function(){return a.__super__.initialize.apply(this,arguments),this.attachModel()},a.prototype.attachModel=function(){var e=this;return this.model.on("change:starred",function(){return e.$starBtn.toggleClass("active")}),this.model.on("change:workflow_state",function(){return e.$readBtn.toggleClass("read","unread"!==e.model.get("workflow_state"))}),this.model.on("change:selected",function(t){return e.$el.toggleClass("active",t.get("selected"))})},a.prototype.onSelect=function(e){var t;if(!e||!e.target.className.match(/star|read-state/))return e.shiftKey?this.model.collection.selectRange(this.model):(t=e.metaKey||e.ctrlKey,this.model.get("selected")&&t?this.deselect(t):this.select(t))},a.prototype.select=function(e){return e||o.each(this.model.collection.without(this.model),function(e){return e.set("selected",!1)}),this.model.set("selected",!0),this.model.unread()?this.model.set("workflow_state","read"):void 0},a.prototype.deselect=function(e){return e?this.model.set("selected",!1):void 0},a.prototype.toggleStar=function(e){return e.preventDefault(),this.model.toggleStarred(),this.model.save(),this.$starBtn.attr({"aria-checked":this.model.starred(),title:this.model.starred()?this.messages.unstar:this.messages.star})},a.prototype.toggleRead=function(e){return e.preventDefault(),this.model.toggleReadState(),this.model.save(),this.$readBtn.attr({"aria-checked":this.model.unread(),title:this.model.unread()?this.messages.read:this.messages.unread})},a.prototype.onMouseDown=function(e){return e.shiftKey?(e.preventDefault(),setTimeout(function(){return window.getSelection().removeAllRanges()},0)):void 0},a.prototype.toJSON=function(){return this.model.toJSON().conversation},a}(r)})}.call(this),define("jst/collectionView",["compiled/handlebars_helpers"],function(e){var t=e.template,n=e.templates=e.templates||{};return n.collectionView=t(function(e,t,n,o,s){function a(e,t){var o,s,a="";return a+='\n<ul class="collectionViewItems ',(s=n.listClassName)?o=s.call(e,{hash:{},data:t}):(s=e&&e.listClassName,o=typeof s===l?s.call(e,{hash:{},data:t}):s),a+=u(o)+'"></ul>\n'}function r(e,t){var o,s,a="";return a+='\n<p class="emptyMessage">',(s=n.emptyMessage)?o=s.call(e,{hash:{},data:t}):(s=e&&e.emptyMessage,o=typeof s===l?s.call(e,{hash:{},data:t}):s),a+=u(o)+"</p>\n"}this.compilerInfo=[4,">= 1.0.0"],n=this.merge(n,e.helpers),s=s||{};var i,c="",l="function",u=this.escapeExpression,d=this;return i=n["if"].call(t,(i=t&&t.collection,null==i||i===!1?i:i.length),{hash:{},inverse:d.program(3,r,s),fn:d.program(1,a,s),data:s}),(i||0===i)&&(c+=i),c+="\n"}),n.collectionView}),function(){var e=function(e,t){return function(){return e.apply(t,arguments)}},t={}.hasOwnProperty,n=function(e,n){function o(){this.constructor=e}for(var s in n)t.call(n,s)&&(e[s]=n[s]);return o.prototype=n.prototype,e.prototype=new o,e.__super__=n.prototype,e};define("compiled/views/CollectionView",["i18n!instructure","jquery","underscore","Backbone","jst/collectionView"],function(t,o,s,a,r){var i,c;return i=function(a){function i(){return this.renderItem=e(this.renderItem,this),this.renderOnAdd=e(this.renderOnAdd,this),this.removeItem=e(this.removeItem,this),this.renderOnReset=e(this.renderOnReset,this),this.removePreviousItems=e(this.removePreviousItems,this),this.reorder=e(this.reorder,this),this.render=e(this.render,this),c=i.__super__.constructor.apply(this,arguments)}return n(i,a),i.optionProperty("itemView"),i.optionProperty("itemViewOptions"),i.optionProperty("emptyMessage"),i.optionProperty("listClassName"),i.prototype.className="collectionView",i.prototype.els={".collectionViewItems":"$list"},i.prototype.defaults={itemViewOptions:{},emptyMessage:t.t("no_items","No items.")},i.prototype.template=r,i.prototype.initialize=function(){return i.__super__.initialize.apply(this,arguments),this.attachCollection()},i.prototype.render=function(){return i.__super__.render.apply(this,arguments),this.empty||this.renderItems(),this},i.prototype.toJSON=function(){return s.extend(this.options,{emptyMessage:this.emptyMessage,listClassName:this.listClassName,ENV:ENV})},i.prototype.reorder=function(){var e,t,n;return this.collection.sort(),this.$list.children().detach(),e=function(){var e,n,o,s;for(o=this.collection.models,s=[],e=0,n=o.length;n>e;e++)t=o[e],s.push(t.itemView.$el);return s}.call(this),(n=this.$list).append.apply(n,e)},i.prototype.attachCollection=function(){return this.listenTo(this.collection,"reset",this.renderOnReset),this.listenTo(this.collection,"add",this.renderOnAdd),this.listenTo(this.collection,"remove",this.removeItem),this.empty=!this.collection.length},i.prototype.detachCollection=function(){return this.stopListening(this.collection)},i.prototype.switchCollection=function(e){return this.detachCollection(),this.collection=e,this.attachCollection()},i.prototype.removePreviousItems=function(e){var t,n,o,s,a;for(a=[],n=0,o=e.length;o>n;n++)t=e[n],a.push(null!=(s=t.view)?s.remove():void 0);return a},i.prototype.renderOnReset=function(e,t){return this.empty=!this.collection.length,this.removePreviousItems(t.previousModels),this.render()},i.prototype.renderItems=function(){return this.collection.each(this.renderItem)},i.prototype.removeItem=function(e){return this.empty=!this.collection.length,this.empty?this.render():e.view.remove()},i.prototype.renderOnAdd=function(e){return this.empty&&this.render(),this.empty=!1,this.renderItem(e)},i.prototype.renderItem=function(e){var t;return t=this.createItemView(e),t.render(),"function"==typeof this.attachItemView&&this.attachItemView(e,t),this.insertView(t)},i.prototype.createItemView=function(e){var t;return t=new this.itemView(o.extend({},this.itemViewOptions||{},{model:e})),e.itemView=t,t},i.prototype.insertView=function(e){var t;return t=this.collection.indexOf(e.model),0===t?this.prependView(e):t===this.collection.length-1?this.appendView(e):this.insertViewAtIndex(e,t)},i.prototype.insertViewAtIndex=function(e,t){var n;return n=this.$list.children().eq(t),n.length?n.before(e.el):this.$list.append(e.el)},i.prototype.prependView=function(e){return this.$list.prepend(e.el)},i.prototype.appendView=function(e){return this.$list.append(e.el)},i}(a.View)})}.call(this),define("translations/paginated_collection",["i18nObj","jquery"],function(e,t){t.extend(!0,e,{translations:{ar:{paginated_collection:{no_items:"لا توجد عناصر."}},de:{paginated_collection:{no_items:"Keine Elemente."}},"en-AU":{paginated_collection:{no_items:"No items."}},"en-GB":{paginated_collection:{no_items:"No items."}},es:{paginated_collection:{no_items:"No hay elementos."}},"fa-IR":{paginated_collection:{no_items:"هیچ موردی یافت نشد."}},fr:{paginated_collection:{no_items:"Aucun élément"}},ja:{paginated_collection:{no_items:"アイテムがありません。"}},ko:{paginated_collection:{no_items:"항목이 없습니다."}},nb:{paginated_collection:{no_items:"Ingen elementer."}},nl:{paginated_collection:{no_items:"Geen items."}},pl:{paginated_collection:{no_items:"Brak elementów."}},pt:{paginated_collection:{no_items:"Nenhum item."}},"pt-BR":{paginated_collection:{no_items:"Nenhum item."}},ru:{paginated_collection:{no_items:"Элементы отсутствуют."}},tr:{paginated_collection:{no_items:"Öğe bulunamadı."}},zh:{paginated_collection:{no_items:"没有项目。"}}}})}),define("jst/paginatedCollection",["compiled/handlebars_helpers","i18n!paginated_collection"],function(e){var t=e.template,n=e.templates=e.templates||{};return n.paginatedCollection=t(function(e,t,n,o,s){function a(){return'\n<ul class="collectionViewItems"></ul>\n'}function r(e,t){var o,s,a,r="";return r+="\n<p>\n  ",s=n.t||e&&e.t,a={hash:{scope:"paginated_collection"},data:t},o=s?s.call(e,"no_items","No items.",a):l.call(e,"t","no_items","No items.",a),(o||0===o)&&(r+=o),r+="\n</p>\n"}this.compilerInfo=[4,">= 1.0.0"],n=this.merge(n,e.helpers),s=s||{};var i,c="",l=n.helperMissing,u=this;return i=n["if"].call(t,(i=t&&t.collection,null==i||i===!1?i:i.length),{hash:{},inverse:u.program(3,r,s),fn:u.program(1,a,s),data:s}),(i||0===i)&&(c+=i),c+='\n\n<div class="paginatedLoadingIndicator">Loading</div>\n\n'}),n.paginatedCollection}),function(){var e=function(e,t){return function(){return e.apply(t,arguments)}},t={}.hasOwnProperty,n=function(e,n){function o(){this.constructor=e}for(var s in n)t.call(n,s)&&(e[s]=n[s]);return o.prototype=n.prototype,e.prototype=new o,e.__super__=n.prototype,e};define("compiled/views/PaginatedCollectionView",["jquery","underscore","compiled/views/CollectionView","jst/paginatedCollection"],function(t,o,s,a){var r,i;return r=function(r){function c(){return this.showLoadingIndicator=e(this.showLoadingIndicator,this),this.hideLoadingIndicator=e(this.hideLoadingIndicator,this),this.checkScroll=e(this.checkScroll,this),this.detachScroll=e(this.detachScroll,this),this.attachScroll=e(this.attachScroll,this),i=c.__super__.constructor.apply(this,arguments)}return n(c,r),c.prototype.defaults={buffer:500,scrollContainer:window},c.prototype.els=o.extend({},s.prototype.els,{".paginatedLoadingIndicator":"$loadingIndicator"}),c.optionProperty("scrollableElement"),c.optionProperty("scrollContainer"),c.optionProperty("autoFetch"),c.prototype.template=a,c.prototype.initialize=function(){return c.__super__.initialize.apply(this,arguments),this.initScrollContainer()},c.prototype.attachCollection=function(){var e=this;return c.__super__.attachCollection.apply(this,arguments),this.listenTo(this.collection,"reset",this.attachScroll),this.listenTo(this.collection,"fetched:last",this.detachScroll),this.listenTo(this.collection,"beforeFetch",this.showLoadingIndicator),this.autoFetch?this.listenTo(this.collection,"fetch",function(){return setTimeout(e.checkScroll)}):this.listenTo(this.collection,"fetch",this.hideLoadingIndicator)},c.prototype.initScrollContainer=function(){return this.$scrollableElement=this.scrollableElement?t(this.scrollableElement):this.$el,this.scrollContainer=t(this.scrollContainer),this.heightContainer=this.scrollContainer[0]===window?t(document.body):this.scrollContainer},c.prototype.attachScroll=function(){var e,t;return t="scroll.pagination:"+this.cid,e="resize.pagination:"+this.cid,this.scrollContainer.on(t,this.checkScroll),this.scrollContainer.on(e,this.checkScroll)},c.prototype.detachScroll=function(){return this.scrollContainer.off(".pagination:"+this.cid)},c.prototype.checkScroll=function(){var e,t;if(!this.collection.fetchingPage&&!this.collection.fetchingNextPage&&this.$el.length)return t=this.$scrollableElement.position().top+this.$scrollableElement.height()-this.heightContainer.position().top,e=t-this.scrollContainer.scrollTop()-this.scrollContainer.height(),e<this.options.buffer&&this.collection.canFetch("next")?this.collection.fetch({page:"next"}):this.hideLoadingIndicator()},c.prototype.remove=function(){return this.detachScroll(),c.__super__.remove.apply(this,arguments)},c.prototype.afterRender=function(){return c.__super__.afterRender.apply(this,arguments),this.collection.fetchingPage?void 0:this.hideLoadingIndicator()},c.prototype.hideLoadingIndicator=function(){var e;return null!=(e=this.$loadingIndicator)?e.hide():void 0},c.prototype.showLoadingIndicator=function(){var e;return null!=(e=this.$loadingIndicator)?e.show():void 0},c}(s)})}.call(this),define("translations/conversations.message_list",["i18nObj","jquery"],function(e,t){t.extend(!0,e,{translations:{ar:{conversations:{message_list:{messages:"الرسائل"}}},de:{conversations:{message_list:{messages:"Nachrichten"}}},"en-AU":{conversations:{message_list:{messages:"Messages"}}},"en-GB":{conversations:{message_list:{messages:"Messages"}}},es:{conversations:{message_list:{messages:"Mensajes"}}},"fa-IR":{conversations:{message_list:{messages:"پیام ها"}}},fr:{conversations:{message_list:{messages:"Messages"}}},ja:{conversations:{message_list:{messages:"メッセージ"}}},ko:{conversations:{message_list:{messages:"메시지"}}},nb:{conversations:{message_list:{messages:"Beskjeder"}}},nl:{conversations:{message_list:{messages:"Berichten"}}},pl:{conversations:{message_list:{messages:"Wiadomości"}}},pt:{conversations:{message_list:{messages:"Mensagens"}}},"pt-BR":{conversations:{message_list:{messages:"Mensagens"}}},ru:{conversations:{message_list:{messages:"Сообщения"}}},tr:{conversations:{message_list:{messages:"Mesajlar"}}},zh:{conversations:{message_list:{messages:"消息"}}}}})}),define("jst/conversations/messageList",["compiled/handlebars_helpers","i18n!conversations.message_list"],function(e){var t=e.template,n=e.templates=e.templates||{};return n["conversations/messageList"]=t(function(e,t,n,o,s){this.compilerInfo=[4,">= 1.0.0"],n=this.merge(n,e.helpers),s=s||{};var a,r,i,c="",l=n.helperMissing;return c+='<div class="list-header">\n  <b class="current-context"></b>\n</div>\n\n<ul class="messages unstyled collectionViewItems"\n  aria-label="',r=n.t||t&&t.t,i={hash:{scope:"conversations.message_list"},data:s},a=r?r.call(t,"messages","Messages",i):l.call(t,"t","messages","Messages",i),(a||0===a)&&(c+=a),c+='">\n</ul>\n\n<div class="paginatedLoadingIndicator"></div>\n'}),n["conversations/messageList"]}),function(){var e=function(e,t){return function(){return e.apply(t,arguments)}},t={}.hasOwnProperty,n=function(e,n){function o(){this.constructor=e}for(var s in n)t.call(n,s)&&(e[s]=n[s]);return o.prototype=n.prototype,e.prototype=new o,e.__super__=n.prototype,e};define("compiled/views/conversations/MessageListView",["compiled/views/PaginatedCollectionView","compiled/views/conversations/MessageView","jst/conversations/messageList"],function(t,o,s){var a;return a=function(t){function a(){this.updateMessage=e(this.updateMessage,this),this.trackSelectedMessages=e(this.trackSelectedMessages,this),a.__super__.constructor.apply(this,arguments),this.attachEvents()}return n(a,t),a.prototype.tagName="div",a.prototype.itemView=o,a.prototype.template=s,a.prototype.course={},a.prototype.selectedMessages=[],a.prototype.autoFetch=!0,a.prototype.events={click:"onClick"},a.prototype.attachEvents=function(){return this.collection.on("change:selected",this.trackSelectedMessages)},a.prototype.trackSelectedMessages=function(e){return e.get("selected")?this.selectedMessages.push(e):this.selectedMessages.splice(this.selectedMessages.indexOf(e),1)},a.prototype.onClick=function(e){return e.target===this.el?this.collection.each(function(e){return e.set("selected",!1)}):void 0},a.prototype.updateCourse=function(e){return this.course=e},a.prototype.selectedMessage=function(){return this.selectedMessages[0]},a.prototype.updateMessage=function(e,t){var n,o;return n=this.collection.where({selected:!0})[0],o=this.collection.get(t.id),o.set({last_message:t.last_message,last_authored_message_at:(new Date).toString(),message_count:o.get("messages").length}),this.collection.sort(),this.render(),null!=n?n.view.select():void 0},a.prototype.afterRender=function(){return a.__super__.afterRender.apply(this,arguments),this.$(".current-context").text(this.course.name),this.$(".list-header")[this.course.name?"show":"hide"]()},a.prototype.selectAll=function(){return this.collection.each(function(e){return e.set("selected",!0)})},a}(t)})}.call(this),define("translations/conversations.message_item",["i18nObj","jquery"],function(e,t){t.extend(!0,e,{translations:{ar:{conversations:{message_item:{"delete":"حذف",forward:"إعادة توجيه",message_actions:"إجراءات الرسالة",more_options:"مزيد من الخيارات",reply:"رد",reply_all:"رد على الكل"}}},de:{conversations:{message_item:{"delete":"Löschen",forward:"Weiterleiten",message_actions:"Nachrichtenaktionen",more_options:"Weitere Optionen",reply:"Antworten",reply_all:"Allen antworten"}}},"en-AU":{conversations:{message_item:{"delete":"Delete",forward:"Forward",message_actions:"Message actions",more_options:"More options",reply:"Reply",reply_all:"Reply all"}}},"en-GB":{conversations:{message_item:{"delete":"Delete",forward:"Forward",message_actions:"Message actions",more_options:"More options",reply:"Reply",reply_all:"Reply all"}}},es:{conversations:{message_item:{"delete":"Borrar",forward:"Enviar Copia",message_actions:"Acciones de mensaje",more_options:"Más opciones",reply:"Responder",reply_all:"Responder a todos"}}},"fa-IR":{conversations:{message_item:{"delete":"حذف",forward:"ارسال به دیگری",message_actions:"عملکردهای پیام",more_options:"گزینه‌های دیگر",reply:"پاسخ",reply_all:"پاسخ به همه"}}},fr:{conversations:{message_item:{"delete":"Supprimer",forward:"Transférer",message_actions:"Actions sur le message",more_options:"Plus d’options",reply:"Répondre",reply_all:"Répondre à tous"}}},ja:{conversations:{message_item:{"delete":"削除",forward:"早送り",message_actions:"メッセージ アクション",more_options:"その他のオプション",reply:"返信",reply_all:"すべてに返信"}}},ko:{conversations:{message_item:{"delete":"삭제",forward:"전달",message_actions:"메시지 동작",more_options:"기타 옵션",reply:"답변 작성...",reply_all:"전체 회신"}}},nb:{conversations:{message_item:{"delete":"Slett",forward:"Videresend",message_actions:"Handlinger for beskjed",more_options:"Flere alternativer",reply:"Svar",reply_all:"Svar til alle"}}},nl:{conversations:{message_item:{"delete":"Verwijderen",forward:"Doorsturen",message_actions:"Opties voor berichten",more_options:"Meer opties",reply:"Beantwoorden",reply_all:"Allen beantwoorden"}}},pl:{conversations:{message_item:{"delete":"Usuń",forward:"Przekaż",message_actions:"Czynności, jakie można wykonać wobec wiadomości",more_options:"Więcej opcji",reply:"Odpowiedz",reply_all:"Odpowiedz wszystkim"}}},pt:{conversations:{message_item:{"delete":"Eliminar",forward:"Encaminhar",message_actions:"Ações de mensagem",more_options:"Mais opções",reply:"Responder",reply_all:"Responder a todos"}}},"pt-BR":{conversations:{message_item:{"delete":"Excluir",forward:"Encaminhar",message_actions:"Ações de mensagem",more_options:"Mais opções",reply:"Responder",reply_all:"Responder a todos"}}},ru:{conversations:{message_item:{"delete":"Удалить",forward:"Переслать",message_actions:"Действия над сообщениями",more_options:"Дополнительные опции",reply:"Ответ",reply_all:"Ответить всем"}}},tr:{conversations:{message_item:{"delete":"Sil",forward:"Yönlendir",message_actions:"Mesaj hareketleri",more_options:"Daha fazla seçenek",reply:"Yanıtla",reply_all:"Hepsini yanıtla"}}},zh:{conversations:{message_item:{"delete":"删除",forward:"转发",message_actions:"消息操作",more_options:"更多可更多选项",reply:"回复",reply_all:"全部回复"}}}}})}),define("jst/_avatar",["compiled/handlebars_helpers"],function(e){var t=e.template,n=e.templates=e.templates||{};return n._avatar=t(function(e,t,n,o,s){function a(e,t){var o,s,a,i="";return i+="\n  ",s=n.ifAny||e&&e.ifAny,a={hash:{},inverse:m.noop,fn:m.program(2,r,t),data:t},o=s?s.call(e,e&&e.avatar_url,e&&e.avatar_image_url,a):h.call(e,"ifAny",e&&e.avatar_url,e&&e.avatar_image_url,a),(o||0===o)&&(i+=o),i+="\n"}function r(e,t){var o,s="";return s+="\n    ",o=n["if"].call(e,e&&e.alreadyEscaped,{hash:{},inverse:m.program(6,l,t),fn:m.program(3,i,t),data:t}),(o||0===o)&&(s+=o),s+="\n  "}function i(e,t){var o,s,a,r="";return r+="\n      <a\n        ",s=n.ifAny||e&&e.ifAny,a={hash:{},inverse:m.noop,fn:m.program(4,c,t),data:t},o=s?s.call(e,e&&e.url,e&&e.html_url,a):h.call(e,"ifAny",e&&e.url,e&&e.html_url,a),(o||0===o)&&(r+=o),r+='\n        class="avatar"\n        style="background-image: url(',s=n.or||e&&e.or,a={hash:{},data:t},o=s?s.call(e,e&&e.avatar_url,e&&e.avatar_image_url,a):h.call(e,"or",e&&e.avatar_url,e&&e.avatar_image_url,a),(o||0===o)&&(r+=o),r+=')">\n        <span class="screenreader-only">',s=n.or||e&&e.or,a={hash:{},data:t},o=s?s.call(e,e&&e.display_name,e&&e.short_name,a):h.call(e,"or",e&&e.display_name,e&&e.short_name,a),(o||0===o)&&(r+=o),r+="</span></a>\n    "}function c(e,t){var o,s,a,r="";return r+='href="',s=n.or||e&&e.or,a={hash:{},data:t},o=s?s.call(e,e&&e.url,e&&e.html_url,a):h.call(e,"or",e&&e.url,e&&e.html_url,a),(o||0===o)&&(r+=o),r+='"'}function l(e,t){var o,s,a,r="";return r+="\n      <a\n        ",s=n.ifAny||e&&e.ifAny,a={hash:{},inverse:m.noop,fn:m.program(7,u,t),data:t},o=s?s.call(e,e&&e.url,e&&e.html_url,a):h.call(e,"ifAny",e&&e.url,e&&e.html_url,a),(o||0===o)&&(r+=o),r+='\n        class="avatar"\n        style="background-image: url('+_((s=n.or||e&&e.or,a={hash:{},data:t},s?s.call(e,e&&e.avatar_url,e&&e.avatar_image_url,a):h.call(e,"or",e&&e.avatar_url,e&&e.avatar_image_url,a)))+')"\n        ><span class="screenreader-only">'+_((s=n.or||e&&e.or,a={hash:{},data:t},s?s.call(e,e&&e.display_name,e&&e.short_name,a):h.call(e,"or",e&&e.display_name,e&&e.short_name,a)))+"</span></a>\n    "}function u(e,t){var o,s,a="";return a+='href="'+_((o=n.or||e&&e.or,s={hash:{},data:t},o?o.call(e,e&&e.url,e&&e.html_url,s):h.call(e,"or",e&&e.url,e&&e.html_url,s)))+'"'}this.compilerInfo=[4,">= 1.0.0"],n=this.merge(n,e.helpers),s=s||{};var d,p="",h=n.helperMissing,m=this,_=this.escapeExpression;return p+="\n",d=n["if"].call(t,t,{hash:{},inverse:m.noop,fn:m.program(1,a,s),data:s}),(d||0===d)&&(p+=d),p+="\n"}),e.registerPartial("avatar",n._avatar),n._avatar}),define("jst/conversations/messageItem",["compiled/handlebars_helpers","i18n!conversations.message_item","jst/_avatar"],function(e){var t=e.template,n=e.templates=e.templates||{};return n["conversations/messageItem"]=t(function(e,t,n,o,s){function a(){return","}function r(){return'\n          <a href="#" class="message-participants-toggle"></a>\n        '}function i(e,t){var o,s="";return s+='\n<ul class="message-attachments">\n  ',o=n["if"].call(e,e&&e.media_comment,{hash:{},inverse:f.noop,fn:f.program(6,c,t),data:t}),(o||0===o)&&(s+=o),s+="\n  ",o=n.each.call(e,e&&e.attachments,{hash:{},inverse:f.noop,fn:f.program(8,l,t),data:t}),(o||0===o)&&(s+=o),s+="\n</ul>\n"}function c(e){var t,n="";return n+='\n    <li><a class="instructure_inline_media_comment" data-media_comment_id="'+v((t=e&&e.media_comment,t=null==t||t===!1?t:t.media_id,typeof t===g?t.apply(e):t))+'" href="'+v((t=e&&e.media_comment,t=null==t||t===!1?t:t.url,typeof t===g?t.apply(e):t))+'">\n      <i class="icon-media"></i> '+v((t=e&&e.media_comment,t=null==t||t===!1?t:t.display_name,typeof t===g?t.apply(e):t))+"\n    </a></li>\n  "}function l(e,t){var o,s,a="";return a+='\n    <li><a href="',(s=n.url)?o=s.call(e,{hash:{},data:t}):(s=e&&e.url,o=typeof s===g?s.call(e,{hash:{},data:t}):s),a+=v(o)+'">\n      ',o=n["if"].call(e,e&&e.thumbnail_url,{hash:{},inverse:f.program(11,d,t),fn:f.program(9,u,t),data:t}),(o||0===o)&&(a+=o),a+="\n      ",(s=n.display_name)?o=s.call(e,{hash:{},data:t}):(s=e&&e.display_name,o=typeof s===g?s.call(e,{hash:{},data:t}):s),a+=v(o)+"\n    </a></li>\n  "}function u(e,t){var o,s,a="";return a+='\n        \n        <!--img class="message-attachment-thumbnail" src="',(s=n.thumbnail_url)?o=s.call(e,{hash:{},data:t}):(s=e&&e.thumbnail_url,o=typeof s===g?s.call(e,{hash:{},data:t}):s),a+=v(o)+'" /-->\n        <i class="icon-paperclip"></i>\n      '}function d(){return'\n        <i class="icon-paperclip"></i>\n      '}this.compilerInfo=[4,">= 1.0.0"],n=this.merge(n,e.helpers),o=this.merge(o,e.partials),s=s||{};var p,h,m,_="",g="function",v=this.escapeExpression,f=this,y=n.helperMissing;return _+='<div class="row-fluid message-info">\n  <div class="span8 user-info">\n    ',p=f.invokePartial(o.avatar,"avatar",t&&t.author,n,o,s),(p||0===p)&&(_+=p),_+='\n    <div class="message-author-and-participants">\n      <b class="username">'+v((p=t&&t.author,p=null==p||p===!1?p:p.name,typeof p===g?p.apply(t):p))+"</b>",p=n["if"].call(t,(p=t&&t.participants,null==p||p===!1?p:p.length),{hash:{},inverse:f.noop,fn:f.program(1,a,s),data:s}),(p||0===p)&&(_+=p),_+='\n\n      <span class="message-participants-wrapper">\n        <span class="message-participants"\n              aria-live="polite"></span>\n\n        <div class="hidden">\n          <span class="summarized-message-participants">\n            '+v((h=n.list||t&&t.list,m={hash:{},data:s},h?h.call(t,t&&t.summarizedParticipantNames,m):y.call(t,"list",t&&t.summarizedParticipantNames,m)))+'...\n          </span>\n          <span class="full-message-participants">\n            '+v((h=n.list||t&&t.list,m={hash:{},data:s},h?h.call(t,t&&t.participantNames,m):y.call(t,"list",t&&t.participantNames,m)))+"\n          </span>\n        </div>\n\n        ",p=n["if"].call(t,t&&t.summarizedParticipantNames,{hash:{},inverse:f.noop,fn:f.program(3,r,s),data:s}),(p||0===p)&&(_+=p),_+='\n      </span>\n\n      <span class="context">',(h=n.context_name)?p=h.call(t,{hash:{},data:s}):(h=t&&t.context_name,p=typeof h===g?h.call(t,{hash:{},data:s}):h),_+=v(p)+'</span>\n\n    </div>\n  </div>\n\n	<div class="span4 message-metadata">\n		<div class="date pull-right">\n			'+v((h=n.friendlyDatetime||t&&t.friendlyDatetime,m={hash:{},data:s},h?h.call(t,t&&t.created_at,m):y.call(t,"friendlyDatetime",t&&t.created_at,m)))+'\n		</div>\n\n    <ul class="actions pull-right unstyled">\n      <li>\n        <a href="#"\n           class="icon-reply-2 reply-btn"\n           title="',h=n.t||t&&t.t,m={hash:{scope:"conversations.message_item"},data:s},p=h?h.call(t,"reply","Reply",m):y.call(t,"t","reply","Reply",m),(p||0===p)&&(_+=p),_+='"\n           data-tooltip>\n          <span class="screenreader-only">',h=n.t||t&&t.t,m={hash:{scope:"conversations.message_item"},data:s},p=h?h.call(t,"reply","Reply",m):y.call(t,"t","reply","Reply",m),(p||0===p)&&(_+=p),_+='</span>\n        </a>\n      </li>\n\n      <li>\n        <div class="inline-block" role="application">\n          <a href="#"\n             data-kyle-menu-options=\'{"appendMenuTo": "body"}\'\n             role="button"\n             class="al-trigger"\n             title="',h=n.t||t&&t.t,m={hash:{scope:"conversations.message_item"},data:s},p=h?h.call(t,"more_options","More options",m):y.call(t,"t","more_options","More options",m),(p||0===p)&&(_+=p),_+='"\n             data-tooltip>\n            <i class="icon-settings"></i>\n            <i class="icon-mini-arrow-down"></i>\n            <span class="screenreader-only">',h=n.t||t&&t.t,m={hash:{scope:"conversations.message_item"},data:s},p=h?h.call(t,"message_actions","Message actions",m):y.call(t,"t","message_actions","Message actions",m),(p||0===p)&&(_+=p),_+='</span>\n          </a>\n          <ul class="al-options">\n            <li>\n              <a href="#" class="reply-all-btn">',h=n.t||t&&t.t,m={hash:{scope:"conversations.message_item"},data:s},p=h?h.call(t,"reply_all","Reply all",m):y.call(t,"t","reply_all","Reply all",m),(p||0===p)&&(_+=p),_+='</a>\n            </li>\n            <li>\n              <a href="#" class="forward-btn">',h=n.t||t&&t.t,m={hash:{scope:"conversations.message_item"},data:s},p=h?h.call(t,"forward","Forward",m):y.call(t,"t","forward","Forward",m),(p||0===p)&&(_+=p),_+='</a>\n            </li>\n            <li>\n              <a href="#" class="delete-btn">',h=n.t||t&&t.t,m={hash:{scope:"conversations.message_item"},data:s},p=h?h.call(t,"delete","Delete",m):y.call(t,"t","delete","Delete",m),(p||0===p)&&(_+=p),_+="</a>\n            </li>\n          </ul>\n        </div>\n      </li>\n    </ul>\n	</div>\n</div>\n\n<p>",(h=n.bodyHTML)?p=h.call(t,{hash:{},data:s}):(h=t&&t.bodyHTML,p=typeof h===g?h.call(t,{hash:{},data:s}):h),(p||0===p)&&(_+=p),_+="</p>\n\n",p=n["if"].call(t,t&&t.has_attachments,{hash:{},inverse:f.noop,fn:f.program(5,i,s),data:s}),(p||0===p)&&(_+=p),_+="\n"}),n["conversations/messageItem"]}),function(){var e={}.hasOwnProperty,t=function(t,n){function o(){this.constructor=t}for(var s in n)e.call(n,s)&&(t[s]=n[s]);return o.prototype=n.prototype,t.prototype=new o,t.__super__=n.prototype,t};define("compiled/views/conversations/MessageItemView",["i18n!conversations","jquery","underscore","Backbone","jst/conversations/messageItem","jst/_avatar"],function(e,n,o,s,a){var r,i,c;return i=s.View,r=function(o){function s(){return c=s.__super__.constructor.apply(this,arguments)}return t(s,o),s.prototype.tagName="li",s.prototype.className="message-item-view",s.prototype.template=a,s.prototype.els={".message-participants-toggle":"$toggle",".message-participants":"$participants",".summarized-message-participants":"$summarized",".full-message-participants":"$full",".message-metadata":"$metadata"},s.prototype.events={"blur .actions a":"onActionBlur","click .al-trigger":"onMenuOpen","click .delete-btn":"onDelete","click .forward-btn":"onForward","click .message-participants-toggle":"onToggle","click .reply-btn":"onReply","click .reply-all-btn":"onReplyAll","focus .actions a":"onActionFocus"},s.prototype.messages={confirmDelete:e.t("confirm.delete_message","Are you sure you want to delete your copy of this message? This action cannot be undone.")},s.prototype.initialize=function(){return s.__super__.initialize.apply(this,arguments),this.summarized=this.model.get("summarizedParticipantNames")
},s.prototype.toJSON=function(){return this.model.toJSON()},s.prototype.afterRender=function(){return s.__super__.afterRender.apply(this,arguments),this.updateParticipants(this.summarized),this.$el.attr("data-id",this.model.id)},s.prototype.updateParticipants=function(t){var n;return n=t?this.$summarized:this.$full,this.$participants.text(n.text()),this.$toggle.text(t?e.t("more_participants","+%{total} more",{total:this.model.get("hiddenParticipantCount")}):e.t("hide","Hide"))},s.prototype.onToggle=function(e){return e.preventDefault(),this.updateParticipants(this.summarized=!this.summarized)},s.prototype.onReply=function(e){return e.preventDefault(),this.trigger("reply")},s.prototype.onReplyAll=function(e){return e.preventDefault(),this.trigger("reply-all")},s.prototype.onDelete=function(e){var t;return e.preventDefault(),confirm(this.messages.confirmDelete)?(t="/api/v1/conversations/"+this.model.get("conversation_id")+"/remove_messages",n.ajaxJSON(t,"POST",{remove:[this.model.id]}),this.remove()):void 0},s.prototype.onForward=function(e){return e.preventDefault(),this.trigger("forward")},s.prototype.onMenuOpen=function(e){return e.preventDefault()},s.prototype.onActionFocus=function(){return this.$metadata.addClass("hover")},s.prototype.onActionBlur=function(){return this.$metadata.removeClass("hover")},s}(i)})}.call(this),define("translations/conversations.message_detail",["i18nObj","jquery"],function(e,t){t.extend(!0,e,{translations:{ar:{conversations:{message_detail:{no_subject:"لا يوجد موضوع"}}},de:{conversations:{message_detail:{no_subject:"Kein Betreff"}}},"en-AU":{conversations:{message_detail:{no_subject:"No subject"}}},"en-GB":{conversations:{message_detail:{no_subject:"No subject"}}},es:{conversations:{message_detail:{no_subject:"Sin asunto"}}},"fa-IR":{conversations:{message_detail:{no_subject:"موضوع موجود نیست"}}},fr:{conversations:{message_detail:{no_subject:"Aucun sujet"}}},ja:{conversations:{message_detail:{no_subject:"件名なし"}}},ko:{conversations:{message_detail:{no_subject:"주제 없음"}}},nb:{conversations:{message_detail:{no_subject:"Intet emne"}}},nl:{conversations:{message_detail:{no_subject:"Geen onderwerp"}}},pl:{conversations:{message_detail:{no_subject:"Brak tematu"}}},pt:{conversations:{message_detail:{no_subject:"Sem assunto"}}},"pt-BR":{conversations:{message_detail:{no_subject:"Nenhum assunto"}}},ru:{conversations:{message_detail:{no_subject:"Нет темы"}}},tr:{conversations:{message_detail:{no_subject:"Konu yok"}}},zh:{conversations:{message_detail:{no_subject:"无主题"}}}}})}),define("jst/conversations/messageDetail",["compiled/handlebars_helpers","i18n!conversations.message_detail"],function(e){var t=e.template,n=e.templates=e.templates||{};return n["conversations/messageDetail"]=t(function(e,t,n,o,s){function a(e,t){var o,s,a="";return a+='title="',(s=n.subject)?o=s.call(e,{hash:{},data:t}):(s=e&&e.subject,o=typeof s===u?s.call(e,{hash:{},data:t}):s),a+=d(o)+'"'}function r(e,t){var o,s,a="";return a+="\n        ",(s=n.subject)?o=s.call(e,{hash:{},data:t}):(s=e&&e.subject,o=typeof s===u?s.call(e,{hash:{},data:t}):s),a+=d(o)+"\n      "}function i(e,t){var o,s,a,r="";return r+="\n        (",s=n.t||e&&e.t,a={hash:{scope:"conversations.message_detail"},data:t},o=s?s.call(e,"no_subject","No subject",a):p.call(e,"t","no_subject","No subject",a),(o||0===o)&&(r+=o),r+=")\n      "}this.compilerInfo=[4,">= 1.0.0"],n=this.merge(n,e.helpers),s=s||{};var c,l="",u="function",d=this.escapeExpression,p=n.helperMissing,h=this;return l+='<div>\n  <div class="message-header">\n    <b class="subject" tabindex="-1" ',c=n["if"].call(t,t&&t.subject,{hash:{},inverse:h.noop,fn:h.program(1,a,s),data:s}),(c||0===c)&&(l+=c),l+=">\n      ",c=n["if"].call(t,t&&t.subject,{hash:{},inverse:h.program(5,i,s),fn:h.program(3,r,s),data:s}),(c||0===c)&&(l+=c),l+='\n    </b>\n  </div>\n\n  <ul class="message-content unstyled"></ul>\n</div>\n'}),n["conversations/messageDetail"]}),define("translations/conversations.no_message",["i18nObj","jquery"],function(e,t){t.extend(!0,e,{translations:{ar:{conversations:{no_message:{batch_selected:"تم تحديد العديد من المحادثات",no_conversations_selected:"لم يتم تحديث محادثات"}}},de:{conversations:{no_message:{batch_selected:"Mehrere Konversationen ausgewählt",no_conversations_selected:"Keine Konversationen ausgewählt"}}},"en-AU":{conversations:{no_message:{batch_selected:"Multiple Conversations Selected",no_conversations_selected:"No Conversations Selected"}}},"en-GB":{conversations:{no_message:{batch_selected:"Multiple Conversations Selected",no_conversations_selected:"No conversations selected"}}},es:{conversations:{no_message:{batch_selected:"Se han seleccionado varias conversaciones",no_conversations_selected:"No se han seleccionado conversaciones"}}},"fa-IR":{conversations:{no_message:{batch_selected:"چند گفتگو انتخاب شد",no_conversations_selected:"گفتگو انتخاب نشده است"}}},fr:{conversations:{no_message:{batch_selected:"Plusieurs conversations sélectionnées",no_conversations_selected:"Aucune conversation sélectionnée"}}},ja:{conversations:{no_message:{batch_selected:"複数の会話が選択されています",no_conversations_selected:"会話が選択されていません"}}},ko:{conversations:{no_message:{batch_selected:"여러 대화를 선택함",no_conversations_selected:"선택한 대화 없음"}}},nb:{conversations:{no_message:{batch_selected:"Flere samtaler valgt",no_conversations_selected:"Ingen samtaler valgt"}}},nl:{conversations:{no_message:{batch_selected:" Meerdere gesprekken geselecteerd",no_conversations_selected:"Geen gesprekken geselecteerd"}}},pl:{conversations:{no_message:{batch_selected:"Wybrano wiele rozmów",no_conversations_selected:"Nie wybrano konwersacji"}}},pt:{conversations:{no_message:{batch_selected:"Várias conversas selecionadas",no_conversations_selected:"Não existem conversas selecionadas"}}},"pt-BR":{conversations:{no_message:{batch_selected:"Várias conversas selecionadas",no_conversations_selected:"Nenhuma conversa selecionada"}}},ru:{conversations:{no_message:{batch_selected:"Выбрано несколько разговоров",no_conversations_selected:"Нет выбранных разговоров"}}},tr:{conversations:{no_message:{batch_selected:"Çoklu Karşılıklı Konuşma Seçildi",no_conversations_selected:"Karşılıklı Konuşma Seçilmedi"}}},zh:{conversations:{no_message:{batch_selected:"选择多个会话",no_conversations_selected:"未选择会话"}}}}})}),define("jst/conversations/noMessage",["compiled/handlebars_helpers","i18n!conversations.no_message"],function(e){var t=e.template,n=e.templates=e.templates||{};return n["conversations/noMessage"]=t(function(e,t,n,o,s){function a(e,t){var o,s,a,r="";return r+="\n    ",s=n.t||e&&e.t,a={hash:{scope:"conversations.no_message"},data:t},o=s?s.call(e,"batch_selected","Multiple Conversations Selected",a):l.call(e,"t","batch_selected","Multiple Conversations Selected",a),(o||0===o)&&(r+=o),r+="\n  "}function r(e,t){var o,s,a,r="";return r+="\n    ",s=n.t||e&&e.t,a={hash:{scope:"conversations.no_message"},data:t},o=s?s.call(e,"no_conversations_selected","No Conversations Selected",a):l.call(e,"t","no_conversations_selected","No Conversations Selected",a),(o||0===o)&&(r+=o),r+="\n  "}this.compilerInfo=[4,">= 1.0.0"],n=this.merge(n,e.helpers),s=s||{};var i,c="",l=n.helperMissing,u=this;return c+='<div class="no-messages">\n  <i class="icon-email"></i>\n\n  ',i=n["if"].call(t,t&&t.batch,{hash:{},inverse:u.program(3,r,s),fn:u.program(1,a,s),data:s}),(i||0===i)&&(c+=i),c+="\n</div>\n"}),n["conversations/noMessage"]}),function(){var e={}.hasOwnProperty,t=function(t,n){function o(){this.constructor=t}for(var s in n)e.call(n,s)&&(t[s]=n[s]);return o.prototype=n.prototype,t.prototype=new o,t.__super__=n.prototype,t};define("compiled/views/conversations/MessageDetailView",["i18n!conversations","jquery","underscore","Backbone","compiled/models/Message","compiled/views/conversations/MessageItemView","jst/conversations/messageDetail","jst/conversations/noMessage"],function(e,n,o,s,a,r,i,c){var l,u,d;return u=s.View,l=function(e){function o(){return d=o.__super__.constructor.apply(this,arguments)}return t(o,e),o.prototype.tagName="div",o.prototype.render=function(e){var t,s,a=this;return null==e&&(e={}),o.__super__.render.apply(this,arguments),this.model?(s=this.model.toJSON().conversation,t=n(i(s)),this.model.messageCollection.each(function(e){var n;return e.get("conversation_id")||e.set("conversation_id",s.id),n=new r({model:e}).render(),t.find(".message-content").append(n.$el),a.listenTo(n,"reply",function(){return a.trigger("reply",e)}),a.listenTo(n,"reply-all",function(){return a.trigger("reply-all",e)}),a.listenTo(n,"forward",function(){return a.trigger("forward",e)})})):t=c(e),this.$el.html(t),this.$el.find(".subject").focus(),this},o}(u)})}.call(this),define("translations/conversation_dialog",["i18nObj","jquery"],function(e,t){t.extend(!0,e,{translations:{ar:{buttons:{cancel:"إلغاء",send:"إرسال"},conversation_dialog:{errors:{field_is_required:"هذا الحقل مطلوب"},message_sent:"تم إرسال الرسالة!",no_course:"لا يوجد مساق",select_course:"تحديد مساق"}},de:{buttons:{cancel:"Abbrechen",send:"Senden"},conversation_dialog:{errors:{field_is_required:"Dieses Feld ist ein Pflichtfeld"},message_sent:"Nachricht gesendet!",no_course:"Kein Kurs",select_course:"Kurs auswählen"}},"en-AU":{buttons:{cancel:"Cancel",send:"Send"},conversation_dialog:{errors:{field_is_required:"This field is required"},message_sent:"Message sent!",no_course:"No course",select_course:"Select course"}},"en-GB":{buttons:{cancel:"Cancel",send:"Send"},conversation_dialog:{errors:{field_is_required:"This field is required"},message_sent:"Message sent!",no_course:"No course",select_course:"Select course"}},es:{buttons:{cancel:"Cancelar",send:"Enviar"},conversation_dialog:{errors:{field_is_required:"Este campo es obligatorio"},message_sent:"Mensaje enviado",no_course:"No hay cursos",select_course:"Seleccionar curso"}},"fa-IR":{buttons:{cancel:"لغو",send:"ارسال"},conversation_dialog:{errors:{field_is_required:"پر کردن این جای خالی لازم است"},message_sent:"پیام ارسال شد!",no_course:"درس موجود نیست",select_course:"انتخاب درس"}},fr:{buttons:{cancel:"Annuler",send:"Envoyer"},conversation_dialog:{errors:{field_is_required:"Ce champ est obligatoire."},message_sent:"Message envoyé !",no_course:"Pas de cours",select_course:"Sélectionner un cours"}},ja:{buttons:{cancel:"キャンセル",send:"送信"},conversation_dialog:{errors:{field_is_required:"このフィールドは必須項目です"},message_sent:"メッセージが送信されました!",no_course:"コースなし",select_course:"コースの選択"}},ko:{buttons:{cancel:"취소",send:"보내기"},conversation_dialog:{errors:{field_is_required:"이 필드가 필요함"},message_sent:"메시지를 보냈습니다!",no_course:"과목 없음",select_course:"과목 선택"}},nb:{buttons:{cancel:"Avbryt",send:"Send"},conversation_dialog:{errors:{field_is_required:"Dette feltet er påkrevd"},message_sent:"Beskjed sendt!",no_course:"Ingen kurs",select_course:"Velg kurs"}},nl:{buttons:{cancel:"Annuleren",send:"Versturen"},conversation_dialog:{errors:{field_is_required:"Dit veld is verplicht"},message_sent:"Bericht verzonden!",no_course:"Geen cursus",select_course:"Cursus selecteren"}},pl:{buttons:{cancel:"Anuluj",send:"Wyślij"},conversation_dialog:{errors:{field_is_required:"To pole jest wymagane"},message_sent:"Wiadomość wysłana!",no_course:"Brak kursu",select_course:"Wybierz kurs"}},pt:{buttons:{cancel:"Cancelar",send:"Enviar"},conversation_dialog:{errors:{field_is_required:"Este campo é obrigatório"},message_sent:"Mensagem enviada!",no_course:"Nenhuma disciplina",select_course:"Selecionar disciplina"}},"pt-BR":{buttons:{cancel:"Cancelar",send:"Enviar"},conversation_dialog:{errors:{field_is_required:"Este campo é obrigatório"},message_sent:"Mensagem enviada!",no_course:"Nenhum curso",select_course:"Selecionar curso"}},ru:{buttons:{cancel:"Отменить",send:"Отправить"},conversation_dialog:{errors:{field_is_required:"Необходимо заполнить это поле"},message_sent:"Сообщение отправлено!",no_course:"Без курса",select_course:"Выбрать курс"}},tr:{buttons:{cancel:"İptal",send:"Gönder"},conversation_dialog:{errors:{field_is_required:"Bu alan zorunludur"},message_sent:"Mesaj gönderildi!",no_course:"Ders yok",select_course:"Ders seçiniz"}},zh:{buttons:{cancel:"取消",send:"发送"},conversation_dialog:{errors:{field_is_required:"此字段为必填字段"},message_sent:"消息已发送！",no_course:"无课程",select_course:"选择课程"}}}})}),define("translations/dialog",["i18nObj","jquery"],function(e,t){t.extend(!0,e,{translations:{ar:{buttons:{cancel:"إلغاء",update:"تحديث"}},de:{buttons:{cancel:"Abbrechen",update:"Aktualisieren"}},"en-AU":{buttons:{cancel:"Cancel",update:"Update"}},"en-GB":{buttons:{cancel:"Cancel",update:"Update"}},es:{buttons:{cancel:"Cancelar",update:"Actualizar"}},"fa-IR":{buttons:{cancel:"لغو",update:"بهنگام سازی"}},fr:{buttons:{cancel:"Annuler",update:"Mettre à jour"}},ja:{buttons:{cancel:"キャンセル",update:"更新"}},ko:{buttons:{cancel:"취소",update:"업데이트"}},nb:{buttons:{cancel:"Avbryt",update:"Oppdater"}},nl:{buttons:{cancel:"Annuleren",update:"Bijwerken"}},pl:{buttons:{cancel:"Anuluj",update:"Aktualizuj"}},pt:{buttons:{cancel:"Cancelar",update:"Atualizar"}},"pt-BR":{buttons:{cancel:"Cancelar",update:"Atualizar"}},ru:{buttons:{cancel:"Отменить",update:"Обновить"}},tr:{buttons:{cancel:"İptal",update:"Güncelle"}},zh:{buttons:{cancel:"取消",update:"更新"}}}})}),function(){var e=function(e,t){return function(){return e.apply(t,arguments)}},t={}.hasOwnProperty,n=function(e,n){function o(){this.constructor=e}for(var s in n)t.call(n,s)&&(e[s]=n[s]);return o.prototype=n.prototype,e.prototype=new o,e.__super__=n.prototype,e};define("compiled/views/DialogBaseView",["i18n!dialog","jquery","underscore","Backbone","jqueryui/dialog"],function(t,o,s,a){var r,i;return r=function(a){function r(){return this.cancel=e(this.cancel,this),i=r.__super__.constructor.apply(this,arguments)}return n(r,a),r.prototype.initialize=function(){return r.__super__.initialize.apply(this,arguments),this.initDialog(),this.setElement(this.dialog)},r.prototype.defaultOptions=function(){return{autoOpen:!1,width:420,resizable:!1,buttons:[]}},r.prototype.initDialog=function(){var e;return e=s.extend({},this.defaultOptions(),{buttons:[{text:t.t("#buttons.cancel","Cancel"),"class":"cancel_button",click:this.cancel},{text:t.t("#buttons.update","Update"),"class":"btn-primary",click:this.update}]},s.result(this,"dialogOptions")),this.dialog=o('<div id="'+e.id+'"></div>').appendTo("body").dialog(e),e.containerId&&this.dialog.parent().attr("id",e.containerId),this.dialog},r.prototype.show=function(){return this.dialog.dialog("open")},r.prototype.close=function(){return this.dialog.dialog("close")},r.prototype.update=function(){throw"Not yet implemented"},r.prototype.cancel=function(e){return e.preventDefault(),this.close()},r}(a.View)})}.call(this),define("translations/conversations.message_form_dialog",["i18nObj","jquery"],function(e,t){t.extend(!0,e,{translations:{ar:{conversations:{message_form_dialog:{body:"النص",headings:{new_message:"رسالة جديدة"},inbox_actions:{add_people:"إضافة أشخاص"},individual_message_explanation:"سيرسل هذا رسالة فردية إلى كل مستلم من المستلمين",labels:{add_to_faculty_journal:"إضافة كإدخال دفتر الكلية",attachments:"المرفقات",course:"المساق",select_course:"تحديد مساق",subject:"الموضوع",to:"إلى"},links:{media_comment:"تسجيل"},media_comment:"تعليق وسائط",no_course:"لا يوجد مساق",no_subject:"لا يوجد موضوع",search_names_groups_courses:"بحث عن أسماء ومجموعات ومساقات",send_individual_messages:"إرسال رسائل فردية",titles:{media_comment:"تعليق وسائط تم تسجيله",record_media_comment:"تسجيل تعليق صوتي أو تعليق فيديو",remove_media_comment:"إزالة تعليق الوسائط"}}}},de:{conversations:{message_form_dialog:{body:"Text",headings:{new_message:"Neue Nachricht"},inbox_actions:{add_people:"Personen hinzufügen"},individual_message_explanation:"Dient zum Senden einer individuellen Nachricht an die einzelnen Empfänger",labels:{add_to_faculty_journal:"Als Fakultätsjournaleintrag hinzufügen",attachments:"Anhänge",course:"Kurs",select_course:"Kurs auswählen",subject:"Betreff",to:"An"},links:{media_comment:"Aufzeichnen"},media_comment:"Multimediakommentar",no_course:"Kein Kurs",no_subject:"Kein Betreff",search_names_groups_courses:"Namen, Gruppen und Kurse durchsuchen",send_individual_messages:"Individuelle Nachricht senden",titles:{media_comment:"Aufgezeichneter Multimediakommentar",record_media_comment:"Audio- oder Videokommentar aufzeichnen",remove_media_comment:"Multimediakommentar entfernen"}}}},"en-AU":{conversations:{message_form_dialog:{body:"Body",headings:{new_message:"New Message"},inbox_actions:{add_people:"Add People"},individual_message_explanation:"This will send an individual message to each of the recipients",labels:{add_to_faculty_journal:"Add as a Faculty Journal entry",attachments:"Attachments",course:"Course",select_course:"Select a course",subject:"Subject",to:"To"},links:{media_comment:"Record"},media_comment:"Media Comment",no_course:"No course",no_subject:"No subject",search_names_groups_courses:"Search names, groups, and courses",send_individual_messages:"Send individual messages",titles:{media_comment:"Recorded media comment",record_media_comment:"Record an audio or video comment",remove_media_comment:"Remove media comment"}}}},"en-GB":{conversations:{message_form_dialog:{body:"Body",headings:{new_message:"New message"},inbox_actions:{add_people:"Add people"},individual_message_explanation:"This will send an individual message to each of the recipients",labels:{add_to_faculty_journal:"Add as a faculty journal entry",attachments:"Attachments",course:"Course",select_course:"Select a course",subject:"Subject",to:"To"},links:{media_comment:"Record"},media_comment:"Media comment",no_course:"No course",no_subject:"No subject",search_names_groups_courses:"Search names, groups, and courses",send_individual_messages:"Send individual messages",titles:{media_comment:"Recorded media comment",record_media_comment:"Record an audio or video comment",remove_media_comment:"Remove media comment"}}}},es:{conversations:{message_form_dialog:{body:"Cuerpo",headings:{new_message:"Mensaje nuevo"},inbox_actions:{add_people:"Agregar personas"},individual_message_explanation:"Esta acción enviará un mensaje individual a cada destinatario",labels:{add_to_faculty_journal:"Agregar como entrada del historial para profesores",attachments:"Archivos adjuntos",course:"Curso",select_course:"Seleccionar un curso",subject:"Tema",to:"A"},links:{media_comment:"Grabar"},media_comment:"Comentario audiovisual",no_course:"No hay cursos",no_subject:"Sin asunto",search_names_groups_courses:"Buscar nombres, grupos y cursos",send_individual_messages:"Enviar mensajes individuales",titles:{media_comment:"Comentario audiovisual grabado",record_media_comment:"Grabar un comentario de audio o vídeo",remove_media_comment:"Elminar un comentario audiovisual"}}}},"fa-IR":{conversations:{message_form_dialog:{body:"متن اصلی",headings:{new_message:"پیام جدید"},inbox_actions:{add_people:"افزودن افراد"},individual_message_explanation:"یک پیام جداگانه را برای هر یک از گیرنده ها ارسال خواهد کرد",labels:{add_to_faculty_journal:"افزودن به عنوان ورودی ژورنال هیأت علمی",attachments:"پیوست ها",course:"درس",select_course:"انتخاب یک درس",subject:"موضوع",to:"به"},links:{media_comment:"ضبط کردن"},media_comment:"نظر رسانه ای",no_course:"درس موجود نیست",no_subject:"موضوع موجود نیست",search_names_groups_courses:"جستجوی نام ها، گروه ها و درس ها",send_individual_messages:"ارسال پیام های جداگانه",titles:{media_comment:"نظر رسانه ای ضبط شده",record_media_comment:"ضبط یک نظر صوتی یا تصویری",remove_media_comment:"حذف نظر رسانه ای"}}}},fr:{conversations:{message_form_dialog:{body:"Corps du texte",headings:{new_message:"Nouveau message"},inbox_actions:{add_people:"Ajouter des personnes"},individual_message_explanation:"Cela enverra des messages individuels à chacun des destinataires.",labels:{add_to_faculty_journal:"Ajouter comme entrée du journal des enseignants",attachments:"Pièces jointes",course:"Cours",select_course:"Sélectionner un cours",subject:"Objet",to:"À"},links:{media_comment:"Enregistrer"},media_comment:"Commentaire multimédia",no_course:"Pas de cours",no_subject:"Aucun sujet",search_names_groups_courses:"Rechercher des noms, groupes et cours",send_individual_messages:"Envoyer des messages individuels",titles:{media_comment:"Commentaire multimédia enregistré",record_media_comment:"Enregistrer un commentaire audio ou vidéo",remove_media_comment:"Supprimer le commentaire multimédia"}}}},ja:{conversations:{message_form_dialog:{body:"本文",headings:{new_message:"新しいメッセージ"},inbox_actions:{add_people:"メンバーの追加"},individual_message_explanation:"各受信者に対して個別のメッセージが送信されます",labels:{add_to_faculty_journal:"講師日誌へのエントリとして追加",attachments:"添付ファイル",course:"コース",select_course:"コースの選択",subject:"科目",to:"宛先"},links:{media_comment:"記録"},media_comment:"メディア コメント",no_course:"コースなし",no_subject:"件名なし",search_names_groups_courses:"名前、グループ、およびコースの検索",send_individual_messages:"個別のメッセージを送信",titles:{media_comment:"記録されたメディア コメント",record_media_comment:"オーディオまたはビデオ コメントを記録する",remove_media_comment:"メディア コメントを削除する"}}}},ko:{conversations:{message_form_dialog:{body:"본문",headings:{new_message:"새 메시지"},inbox_actions:{add_people:"사람 추가"},individual_message_explanation:"이는 각 수신인에게 개별 메시지를 보냄",labels:{add_to_faculty_journal:"교원 일지 항목으로 추가",attachments:"첨부",course:"과목",select_course:"과목 선택",subject:"제목",to:"받는 사람"},links:{media_comment:"녹음/녹화"},media_comment:"미디어 설명",no_course:"과목 없음",no_subject:"주제 없음",search_names_groups_courses:"이름, 그룹, 과목 검색",send_individual_messages:"개별 메시지 보내기",titles:{media_comment:"녹음/녹화된 미디어 설명",record_media_comment:"오디오나 비디오 설명을 녹음/녹화",remove_media_comment:"미디어 설명 제거"}}}},nb:{conversations:{message_form_dialog:{body:"Tekst",headings:{new_message:"Ny melding"},inbox_actions:{add_people:"Legg til personer"},individual_message_explanation:"Dette vil sende en individuell beskjed til hver mottaker",labels:{add_to_faculty_journal:"Add as a Faculty Journal entry",attachments:"Vedlegg",course:"Kurs",select_course:"Velg et kurs",subject:"Tema",to:"Til"},links:{media_comment:"Spill inn"},media_comment:"Mediekommentar",no_course:"Ingen kurs",no_subject:"Intet emne",search_names_groups_courses:"Søk i navn, grupper og kurs",send_individual_messages:"Send individuelle beskjeder",titles:{media_comment:"Innspilt mediekommentar",record_media_comment:"Spill inn en lyd- eller videokommentar",remove_media_comment:"Fjern mediekommentar"}}}},nl:{conversations:{message_form_dialog:{body:"Inhoud",headings:{new_message:"Nieuw bericht"},inbox_actions:{add_people:"Personen toevoegen"},individual_message_explanation:"Dit zal  een individueel bericht aan ieder van de geadresseerden verzenden",labels:{add_to_faculty_journal:"Als faculteitsnieuws toevoegen",attachments:"Bijlagen",course:"Cursus",select_course:"Een cursus selecteren",subject:"Onderwerp",to:"Aan"},links:{media_comment:"Opnemen"},media_comment:"Media-opmerking",no_course:"Geen cursus",no_subject:"Geen onderwerp",search_names_groups_courses:"Namen, groepen en cursussen zoeken",send_individual_messages:"Individuele berichten verzenden",titles:{media_comment:"Opgenomen media-opmerking",record_media_comment:"Een audio- of video-opmerking opnemen",remove_media_comment:"Media-opmerking verwijderen"}}}},pl:{conversations:{message_form_dialog:{body:"Treść",headings:{new_message:"Nowa wiadomość"},inbox_actions:{add_people:"Dodaj ludzi"},individual_message_explanation:"Dzięki tej opcji do każdego z odbiorców zostanie wysłana osobna wiadomość",labels:{add_to_faculty_journal:"Dodaj jako wpis do dziennika wydziałowego",attachments:"Załączniki",course:"Kurs",select_course:"Wybierz kurs",subject:"Temat",to:"Do"},links:{media_comment:"Nagraj"},media_comment:"Komentarz multimedialny",no_course:"Brak kursu",no_subject:"Brak tematu",search_names_groups_courses:"Wyszukaj nazwy, grupy i kursy",send_individual_messages:"Wyślij osobne wiadomości",titles:{media_comment:"Nagrany komentarz multimedialny",record_media_comment:"Nagraj komentarz audio lub wideo",remove_media_comment:"Usuń komentarz multimedialny"}}}},pt:{conversations:{message_form_dialog:{body:"Corpo",headings:{new_message:"Nova mensagem"},inbox_actions:{add_people:"Adicionar pessoas"},individual_message_explanation:"Será enviada uma mensagem individual a cada um dos destinatários",labels:{add_to_faculty_journal:"Adicionar como uma entrada do Diário da Faculdade",attachments:"Anexos",course:"Disciplina",select_course:"Selecionar uma disciplina",subject:"Assunto",to:"Para"},links:{media_comment:"Gravar"},media_comment:"Comentário multimédia",no_course:"Nenhuma disciplina",no_subject:"Sem assunto",search_names_groups_courses:"Procurar nomes, grupos e disciplinas",send_individual_messages:"Enviar mensagens individuais",titles:{media_comment:"Comentário multimédia gravado",record_media_comment:"Gravar comentário áudio ou vídeo",remove_media_comment:"Remover comentário multimédia"}}}},"pt-BR":{conversations:{message_form_dialog:{body:"Corpo",headings:{new_message:"Nova mensagem"},inbox_actions:{add_people:"Adicionar pessoas"},individual_message_explanation:"Isto enviará uma mensagem individual para cada um dos destinatários",labels:{add_to_faculty_journal:"Adicionar como uma entrada do Diário da Faculdade",attachments:"Anexos",course:"Curso",select_course:"Selecionar um curso",subject:"Assunto",to:"Para"},links:{media_comment:"Gravar"},media_comment:"Conteúdo de mídia",no_course:"Nenhum curso",no_subject:"Nenhum assunto",search_names_groups_courses:"Pesquisar nomes, grupos e cursos",send_individual_messages:"Enviar mensagens individuais",titles:{media_comment:"Comentário de mídia gravado",record_media_comment:"Gravar um comentário de áudio ou vídeo",remove_media_comment:"Remover comentário de mídia"}}}},ru:{conversations:{message_form_dialog:{body:"Текст сообщения",headings:{new_message:"Новое сообщение"},inbox_actions:{add_people:"Добавить пользователей"},individual_message_explanation:"Это действие отправит личное сообщение каждому из получателей",labels:{add_to_faculty_journal:"Добавить как запись журнала преподавателей",attachments:"Вложения",course:"Курс",select_course:"Выбрать курс",subject:"Тема",to:"Кому"},links:{media_comment:"Запись"},media_comment:"Мультимедийный комментарий",no_course:"Без курса",no_subject:"Нет темы",search_names_groups_courses:"Поиск имен, групп и курсов",send_individual_messages:"Отправить личные сообщения",titles:{media_comment:"Записанный мультимедийный комментарий",record_media_comment:"Записать аудио- или видеокомментарий",remove_media_comment:"Удалить мультимедийный комментарий"}}}},tr:{conversations:{message_form_dialog:{body:"Gövde",headings:{new_message:"Yeni Mesaj"},inbox_actions:{add_people:"Kişi Ekle"},individual_message_explanation:"Bu işlev, alıcıların her birine bireysel mesaj gönderecek",labels:{add_to_faculty_journal:"Öğretim Üyesi Kayıt girişi olarak ekle",attachments:"Dosya Ekleri",course:"Ders",select_course:"Ders seçiniz",subject:"Konu",to:"Kime"},links:{media_comment:"Kayıt"},media_comment:"Çoklu Ortam Yorumu",no_course:"Ders yok",no_subject:"Konu yok",search_names_groups_courses:"İsim, grup ve derse göre ara",send_individual_messages:"Bireysel mesajlar gönderin",titles:{media_comment:"Kaydedilmiş medya yorumu",record_media_comment:"Ses veya video yorumu kaydet",remove_media_comment:"Medya yorumunu sil"}}}},zh:{conversations:{message_form_dialog:{body:"正文",headings:{new_message:"新消息"},inbox_actions:{add_people:"添加人员"},individual_message_explanation:"此时将一条消息发送给每个收件人",labels:{add_to_faculty_journal:"添加为教师日志条目",attachments:"附件",course:"课程",select_course:"选择课程",subject:"主题",to:"至"},links:{media_comment:"录制"},media_comment:"媒体评论",no_course:"无课程",no_subject:"无主题",search_names_groups_courses:"搜索姓名、小组和课程",send_individual_messages:"发送各个消息",titles:{media_comment:"已录制媒体评论",record_media_comment:"录制音频或视频评论",remove_media_comment:"删除媒体评论"}}}}}})}),define("jst/conversations/MessageFormDialog",["compiled/handlebars_helpers","i18n!conversations.message_form_dialog"],function(e){var t=e.template,n=e.templates=e.templates||{};return n["conversations/MessageFormDialog"]=t(function(e,t,n,o,s){function a(e){var t,n="";return n+='\n      action="/conversations/'+k((t=e&&e.conversation,t=null==t||t===!1?t:t.id,typeof t===b?t.apply(e):t))+'/add_message" class="form-horizontal"\n  '}function r(){return'\n      action="/conversations" class="form-horizontal new"\n  '}function i(e,t){var o,s,a="";return a+="\n          ",(s=n.audience)?o=s.call(e,{hash:{},data:t}):(s=e&&e.audience,o=typeof s===b?s.call(e,{hash:{},data:t}):s),(o||0===o)&&(a+=o),a+="\n        "}function c(e,t){var o,s,a,r="";return r+="\n          <!--",s=n.t||e&&e.t,a={hash:{scope:"conversations.message_form_dialog"},data:t},o=s?s.call(e,"headings.new_message","New Message",a):w.call(e,"t","headings.new_message","New Message",a),(o||0===o)&&(r+=o),r+="-->\n        "}function l(e,t){var o,s,a,r="";return r+='\n          <a href="/conversations/',(s=n.id)?o=s.call(e,{hash:{},data:t}):(s=e&&e.id,o=typeof s===b?s.call(e,{hash:{},data:t}):s),r+=k(o)+'/add_recipients" class="action_add_recipients">',s=n.t||e&&e.t,a={hash:{scope:"conversations.message_form_dialog"},data:t},o=s?s.call(e,"inbox_actions.add_people","Add People",a):w.call(e,"t","inbox_actions.add_people","Add People",a),(o||0===o)&&(r+=o),r+="</a>\n        "}function u(e,t){var o,s;return(s=n.course)?o=s.call(e,{hash:{},data:t}):(s=e&&e.course,o=typeof s===b?s.call(e,{hash:{},data:t}):s),k(o)}function d(e,t){var o,s,a;return s=n.t||e&&e.t,a={hash:{scope:"conversations.message_form_dialog"},data:t},o=s?s.call(e,"no_course","No course",a):w.call(e,"t","no_course","No course",a),o||0===o?o:""}function p(e,t){var o,s;return(s=n.subject)?o=s.call(e,{hash:{},data:t}):(s=e&&e.subject,o=typeof s===b?s.call(e,{hash:{},data:t}):s),k(o)}function h(e,t){var o,s,a;return s=n.t||e&&e.t,a={hash:{scope:"conversations.message_form_dialog"},data:t},o=s?s.call(e,"no_subject","No subject",a):w.call(e,"t","no_subject","No subject",a),o||0===o?o:""}function m(e,t){var o,s,a,r="";return r+='\n        <div class="message-header-row">\n          <div class="message-header-label"></div>\n          <div class="message-header-input">\n            <input type="hidden" name="bulk_message" value="0" />\n            <label class="checkbox">\n              <input type="checkbox" name="bulk_message" value="1" />\n              ',s=n.t||e&&e.t,a={hash:{scope:"conversations.message_form_dialog"},data:t},o=s?s.call(e,"send_individual_messages","Send individual messages",a):w.call(e,"t","send_individual_messages","Send individual messages",a),(o||0===o)&&(r+=o),r+='\n\n              <i class="icon-question"\n                 data-tooltip\n                 title="',s=n.t||e&&e.t,a={hash:{scope:"conversations.message_form_dialog"},data:t},o=s?s.call(e,"individual_message_explanation","This will send an individual message to each of the recipients",a):w.call(e,"t","individual_message_explanation","This will send an individual message to each of the recipients",a),(o||0===o)&&(r+=o),r+='"></i>\n            </label>\n\n          </div>\n        </div>\n      '}function _(e,t){var o,s,a,r="";return r+='\n            <a class="action_media_comment"\n               href="#"\n               data-track-category="Compose Message"\n               data-track-action="Edit"\n               data-track-label="Audio Recording"\n               title="',s=n.t||e&&e.t,a={hash:{scope:"conversations.message_form_dialog"},data:t},o=s?s.call(e,"titles.record_media_comment","Record an audio or video comment",a):w.call(e,"t","titles.record_media_comment","Record an audio or video comment",a),(o||0===o)&&(r+=o),r+='">\n              <i class="icon-media"></i> ',s=n.t||e&&e.t,a={hash:{scope:"conversations.message_form_dialog"},data:t},o=s?s.call(e,"links.media_comment","Record",a):w.call(e,"t","links.media_comment","Record",a),(o||0===o)&&(r+=o),r+="\n            </a>\n          "}this.compilerInfo=[4,">= 1.0.0"],n=this.merge(n,e.helpers),s=s||{};var g,v,f,y="",b="function",k=this.escapeExpression,w=n.helperMissing,C=this;return y+='<form class="compose_form" method="post"\n  ',g=n["if"].call(t,t&&t.conversation,{hash:{},inverse:C.program(3,r,s),fn:C.program(1,a,s),data:s}),(g||0===g)&&(y+=g),y+='\n  >\n  <div class="message-header">\n    <input type="hidden" name="from_conversation_id" value="',(v=n.from_conversation_id)?g=v.call(t,{hash:{},data:s}):(v=t&&t.from_conversation_id,g=typeof v===b?v.call(t,{hash:{},data:s}):v),y+=k(g)+'">\n    <input type="hidden" name="mode" value="async">\n    <input type="hidden" name="scope" value="',(v=n.scope)?g=v.call(t,{hash:{},data:s}):(v=t&&t.scope,g=typeof v===b?v.call(t,{hash:{},data:s}):v),y+=k(g)+'">\n    <input type="hidden" name="filter" value="',(v=n.filter)?g=v.call(t,{hash:{},data:s}):(v=t&&t.filter,g=typeof v===b?v.call(t,{hash:{},data:s}):v),y+=k(g)+'">\n    <input type="hidden" name="group_conversation" value="true">\n\n    <ul class="conversations" style=\'display:none;\'>\n      <li>\n      <span class="audience">\n        ',g=n["if"].call(t,t&&t.conversation,{hash:{},inverse:C.program(7,c,s),fn:C.program(5,i,s),data:s}),(g||0===g)&&(y+=g),y+="\n      </span>\n        ",g=n["if"].call(t,t&&t.addRecipientsEnabled,{hash:{},inverse:C.noop,fn:C.program(9,l,s),data:s}),(g||0===g)&&(y+=g),y+="\n      </li>\n    </ul>\n\n    <div class='message-header'>\n      <div class='message-header-row'>\n        <div class='message-header-label'>\n          <label for=\"compose-message-course\">",v=n.t||t&&t.t,f={hash:{scope:"conversations.message_form_dialog"},data:s},g=v?v.call(t,"labels.course","Course",f):w.call(t,"t","labels.course","Course",f),(g||0===g)&&(y+=g),y+='</label>\n        </div>\n        <div class=\'message-header-input\'>\n          <select id="compose-message-course" name="course"\n                  data-track-category="Compose Course"\n                  data-track-action="Edit"\n                  data-track-label="Course"\n                  class="message_course"\n                  value="',(v=n.course)?g=v.call(t,{hash:{},data:s}):(v=t&&t.course,g=typeof v===b?v.call(t,{hash:{},data:s}):v),y+=k(g)+'">\n            <option>',v=n.t||t&&t.t,f={hash:{scope:"conversations.message_form_dialog"},data:s},g=v?v.call(t,"labels.select_course","Select a course",f):w.call(t,"t","labels.select_course","Select a course",f),(g||0===g)&&(y+=g),y+='</option>\n          </select>\n          <span class="message_course_ro">',g=n["if"].call(t,t&&t.course,{hash:{},inverse:C.program(13,d,s),fn:C.program(11,u,s),data:s}),(g||0===g)&&(y+=g),y+='</span>\n          <input type="hidden" name="context_code" />\n        </div>\n      </div>\n\n      <div class=\'message-header-row\'>\n        <div class=\'message-header-label\'>\n          <label for="compose-message-recipients">',v=n.t||t&&t.t,f={hash:{scope:"conversations.message_form_dialog"},data:s},g=v?v.call(t,"labels.to","To",f):w.call(t,"t","labels.to","To",f),(g||0===g)&&(y+=g),y+='</label>\n        </div>\n        <div class=\'message-header-input\'>\n          <div class="ac">\n            <div class="ac-row">\n              <div class="ac-input-cell">\n                <div class="ac-input-box">\n                  <ul class="ac-token-list"></ul>\n                  <input type="search"\n                         class="ac-input"\n                         id="compose-message-recipients"\n                         aria-expanded="false"\n                         aria-activedescendant="ac-result-list"\n                         aria-owns="ac-result-list-1"\n                         aria-autocomplete="list"\n                         role="combobox" />\n                </div>\n              </div>\n\n              <div class="btn ac-search-btn"\n                      id="recipient-search-btn"\n                      role="button" tabindex="0">\n                <i class="icon-address-book"></i>\n                <span class="screenreader-only">\n                  ',v=n.t||t&&t.t,f={hash:{scope:"conversations.message_form_dialog"},data:s},g=v?v.call(t,"search_names_groups_courses","Search names, groups, and courses",f):w.call(t,"t","search_names_groups_courses","Search names, groups, and courses",f),(g||0===g)&&(y+=g),y+='\n                </span>\n              </div>\n            </div>\n\n            <div class="ac-result-wrapper" id="ac-result-list-1" aria-hidden="true">\n              <div class="ac-result-container">\n                <div class="ac-result-contents">\n                  <ul class="ac-result-list collectionViewItems"></ul>\n                  <div class="paginatedLoadingIndicator"></div>\n                </div>\n              </div>\n            </div>\n          </div>\n        </div>\n      </div>\n\n      <div class=\'message-header-row\'>\n        <div class=\'message-header-label\'>\n          <label for="compose-message-subject">',v=n.t||t&&t.t,f={hash:{scope:"conversations.message_form_dialog"},data:s},g=v?v.call(t,"labels.subject","Subject",f):w.call(t,"t","labels.subject","Subject",f),(g||0===g)&&(y+=g),y+='</label>\n        </div>\n        <div class=\'message-header-input\'>\n          <input type="text" id="compose-message-subject" name="subject"\n                 data-track-category="Compose Subject"\n                 data-track-action="Edit"\n                 data-track-label="Subject"\n                 class="message_subject"\n                 value="',(v=n.subject)?g=v.call(t,{hash:{},data:s}):(v=t&&t.subject,g=typeof v===b?v.call(t,{hash:{},data:s}):v),y+=k(g)+'"\n                 placeholder="',v=n.t||t&&t.t,f={hash:{scope:"conversations.message_form_dialog"},data:s},g=v?v.call(t,"no_subject","No subject",f):w.call(t,"t","no_subject","No subject",f),(g||0===g)&&(y+=g),y+='"\n                 maxlength="255">\n          <span class="message_subject_ro">',g=n["if"].call(t,t&&t.subject,{hash:{},inverse:C.program(17,h,s),fn:C.program(15,p,s),data:s}),(g||0===g)&&(y+=g),y+="</span>\n        </div>\n      </div>\n\n      ",g=n.unless.call(t,t&&t.conversation,{hash:{},inverse:C.noop,fn:C.program(19,m,s),data:s}),(g||0===g)&&(y+=g),y+='\n\n      <div class=\'message-header-row user_note_info\' style="display: none">\n        <div class=\'message-header-label\'></div>\n        <div class=\'message-header-input\'>\n          <input type="hidden" name="user_note" value="0" />\n          <label class="checkbox">\n            <input type="checkbox" name="user_note" class="user_note" value="1" />\n            ',v=n.t||t&&t.t,f={hash:{scope:"conversations.message_form_dialog"},data:s},g=v?v.call(t,"labels.add_to_faculty_journal","Add as a Faculty Journal entry",f):w.call(t,"t","labels.add_to_faculty_journal","Add as a Faculty Journal entry",f),(g||0===g)&&(y+=g),y+='\n          </label>\n        </div>\n      </div>\n\n      <div class="message-header-row">\n        <div class=\'message-header-label\'></div>\n        <div class=\'message-header-input\'>\n          <div class="media_comment" style="display: none;" title="',v=n.t||t&&t.t,f={hash:{scope:"conversations.message_form_dialog"},data:s},g=v?v.call(t,"titles.media_comment","Recorded media comment",f):w.call(t,"t","titles.media_comment","Recorded media comment",f),(g||0===g)&&(y+=g),y+='">\n            <img src="/images/messages/media-gray.png">\n            ',v=n.t||t&&t.t,f={hash:{scope:"conversations.message_form_dialog"},data:s},g=v?v.call(t,"media_comment","Media Comment",f):w.call(t,"t","media_comment","Media Comment",f),(g||0===g)&&(y+=g),y+='\n            <a href="#" class="remove_link black" style="float: right;" title="',v=n.t||t&&t.t,f={hash:{scope:"conversations.message_form_dialog"},data:s},g=v?v.call(t,"titles.remove_media_comment","Remove media comment",f):w.call(t,"t","titles.remove_media_comment","Remove media comment",f),(g||0===g)&&(y+=g),y+='"><i class="icon-end"></i> </a>\n            <div class="clear"></div>\n          </div>\n          <input type="hidden" name="media_comment_id">\n          <input type="hidden" name="media_comment_type">\n          ',g=n["if"].call(t,t&&t.mediaCommentsEnabled,{hash:{},inverse:C.noop,fn:C.program(21,_,s),data:s}),(g||0===g)&&(y+=g),y+='\n        </div>\n      </div>\n    </div>\n  </div>\n  <hr class=\'header-separator\' />\n\n  <div class=\'message-body\'>\n    <textarea name="body"\n              data-track-category="Compose Message"\n              data-track-action="Edit"\n              data-track-label="Body"\n              aria-label="',v=n.t||t&&t.t,f={hash:{scope:"conversations.message_form_dialog"},data:s},g=v?v.call(t,"body","Body",f):w.call(t,"t","body","Body",f),(g||0===g)&&(y+=g),y+='"\n              class="conversation_body">',(v=n.message)?g=v.call(t,{hash:{},data:s}):(v=t&&t.message,g=typeof v===b?v.call(t,{hash:{},data:s}):v),y+=k(g)+"</textarea>\n    <div class='context_messages'></div>\n  </div>\n\n  <div class='attachments-pane'>\n    <ul class='attachment_list' aria-label='",v=n.t||t&&t.t,f={hash:{scope:"conversations.message_form_dialog"},data:s},g=v?v.call(t,"labels.attachments","Attachments",f):w.call(t,"t","labels.attachments","Attachments",f),(g||0===g)&&(y+=g),y+="' aria-live='polite'></ul>\n  </div>\n\n</form>\n"
}),n["conversations/MessageFormDialog"]}),define("translations/conversations.compose_title_bar",["i18nObj","jquery"],function(e,t){t.extend(!0,e,{translations:{ar:{conversations:{compose_title_bar:{buttons:{close:"إغلاق"}}}},de:{conversations:{compose_title_bar:{buttons:{close:"Schließen"}}}},"en-AU":{conversations:{compose_title_bar:{buttons:{close:"close"}}}},"en-GB":{conversations:{compose_title_bar:{buttons:{close:"close"}}}},es:{conversations:{compose_title_bar:{buttons:{close:"cerrar"}}}},"fa-IR":{conversations:{compose_title_bar:{buttons:{close:"بستن"}}}},fr:{conversations:{compose_title_bar:{buttons:{close:"fermer"}}}},ja:{conversations:{compose_title_bar:{buttons:{close:"閉じる"}}}},ko:{conversations:{compose_title_bar:{buttons:{close:"닫기"}}}},nb:{conversations:{compose_title_bar:{buttons:{close:"lukk"}}}},nl:{conversations:{compose_title_bar:{buttons:{close:"sluiten"}}}},pl:{conversations:{compose_title_bar:{buttons:{close:"zamknij"}}}},pt:{conversations:{compose_title_bar:{buttons:{close:"fechar"}}}},"pt-BR":{conversations:{compose_title_bar:{buttons:{close:"fechar"}}}},ru:{conversations:{compose_title_bar:{buttons:{close:"закрыть"}}}},tr:{conversations:{compose_title_bar:{buttons:{close:"kapat"}}}},zh:{conversations:{compose_title_bar:{buttons:{close:"关闭"}}}}}})}),define("jst/conversations/composeTitleBar",["compiled/handlebars_helpers","i18n!conversations.compose_title_bar"],function(e){var t=e.template,n=e.templates=e.templates||{};return n["conversations/composeTitleBar"]=t(function(e,t,n,o,s){this.compilerInfo=[4,">= 1.0.0"],n=this.merge(n,e.helpers),s=s||{};var a,r,i,c="",l=n.helperMissing;return c+='<i class="icon-x" aria-label="',r=n.t||t&&t.t,i={hash:{scope:"conversations.compose_title_bar"},data:s},a=r?r.call(t,"buttons.close","close",i):l.call(t,"t","buttons.close","close",i),(a||0===a)&&(c+=a),c+='"></i>\n'}),n["conversations/composeTitleBar"]}),define("translations/conversations.compose_button_bar",["i18nObj","jquery"],function(e,t){t.extend(!0,e,{translations:{ar:{conversations:{compose_button_bar:{titles:{add_attachment:"إضافة مرفق",record_media_comment:"تسجيل تعليق صوتي أو تعليق بالفيديو"}}}},de:{conversations:{compose_button_bar:{titles:{add_attachment:"Anhang hinzufügen",record_media_comment:"Audio- oder Videokommentar aufzeichnen"}}}},"en-AU":{conversations:{compose_button_bar:{titles:{add_attachment:"Add an attachment",record_media_comment:"Record an audio or video comment"}}}},"en-GB":{conversations:{compose_button_bar:{titles:{add_attachment:"Add an attachment",record_media_comment:"Record an audio or video comment"}}}},es:{conversations:{compose_button_bar:{titles:{add_attachment:"Adjuntar un archivo",record_media_comment:"Grabar un comentario de audio o vídeo"}}}},"fa-IR":{conversations:{compose_button_bar:{titles:{add_attachment:"افزودن پیوست",record_media_comment:"ضبط یک نظر صوتی یا تصویری"}}}},fr:{conversations:{compose_button_bar:{titles:{add_attachment:"Ajouter une pièce jointe",record_media_comment:"Enregistrer un commentaire audio ou vidéo"}}}},ja:{conversations:{compose_button_bar:{titles:{add_attachment:"添付ファイルの追加",record_media_comment:"オーディオまたはビデオ コメントを記録する"}}}},ko:{conversations:{compose_button_bar:{titles:{add_attachment:"첨부 추가",record_media_comment:"오디오나 비디오 설명을 녹음/녹화"}}}},nb:{conversations:{compose_button_bar:{titles:{add_attachment:"Legg til et vedlegg",record_media_comment:"Spill inn en lyd- eller videokommentar"}}}},nl:{conversations:{compose_button_bar:{titles:{add_attachment:"Een bijlage toevoegen",record_media_comment:"Een audio- of video-opmerking opnemen"}}}},pl:{conversations:{compose_button_bar:{titles:{add_attachment:"Dodaj załącznik",record_media_comment:"Nagraj komentarz audio lub wideo"}}}},pt:{conversations:{compose_button_bar:{titles:{add_attachment:"Adicionar um anexo",record_media_comment:"Gravar comentário áudio ou vídeo"}}}},"pt-BR":{conversations:{compose_button_bar:{titles:{add_attachment:"Adicionar um anexo",record_media_comment:"Gravar um comentário de áudio ou vídeo"}}}},ru:{conversations:{compose_button_bar:{titles:{add_attachment:"Добавить вложение",record_media_comment:"Записать аудио- или видеокомментарий"}}}},tr:{conversations:{compose_button_bar:{titles:{add_attachment:"Bir dosya ekle",record_media_comment:"Ses veya video yorumu kaydet"}}}},zh:{conversations:{compose_button_bar:{titles:{add_attachment:"添加附件",record_media_comment:"录制音频或视频评论"}}}}}})}),define("jst/conversations/composeButtonBar",["compiled/handlebars_helpers","i18n!conversations.compose_button_bar"],function(e){var t=e.template,n=e.templates=e.templates||{};return n["conversations/composeButtonBar"]=t(function(e,t,n,o,s){this.compilerInfo=[4,">= 1.0.0"],n=this.merge(n,e.helpers),s=s||{};var a,r,i,c="",l=n.helperMissing;return c+='<div class="ui-dialog-buttonset attachments">\n  <button class="ui-button ui-widget ui-state-default ui-corner-all attach-file"\n          type="button"\n          title="',r=n.t||t&&t.t,i={hash:{scope:"conversations.compose_button_bar"},data:s},a=r?r.call(t,"titles.add_attachment","Add an attachment",i):l.call(t,"t","titles.add_attachment","Add an attachment",i),(a||0===a)&&(c+=a),c+='">\n    <span class="ui-button-text">\n      <i class="icon-paperclip"></i>\n      <span class="screenreader-only">\n        ',r=n.t||t&&t.t,i={hash:{scope:"conversations.compose_button_bar"},data:s},a=r?r.call(t,"titles.add_attachment","Add an attachment",i):l.call(t,"t","titles.add_attachment","Add an attachment",i),(a||0===a)&&(c+=a),c+='\n      </span>\n    </span>\n  </button>\n\n  <button class="ui-button ui-widget ui-state-default ui-corner-all attach-media"\n          type="button"\n          title="',r=n.t||t&&t.t,i={hash:{scope:"conversations.compose_button_bar"},data:s},a=r?r.call(t,"titles.record_media_comment","Record an audio or video comment",i):l.call(t,"t","titles.record_media_comment","Record an audio or video comment",i),(a||0===a)&&(c+=a),c+='">\n    <span class="ui-button-text">\n      <i class="icon-media"></i>\n      <span class="screenreader-only">\n        ',r=n.t||t&&t.t,i={hash:{scope:"conversations.compose_button_bar"},data:s},a=r?r.call(t,"titles.record_media_comment","Record an audio or video comment",i):l.call(t,"t","titles.record_media_comment","Record an audio or video comment",i),(a||0===a)&&(c+=a),c+="\n      </span>\n    </span>\n  </button>\n</div>\n"}),n["conversations/composeButtonBar"]}),define("translations/conversations.add_attachment",["i18nObj","jquery"],function(e,t){t.extend(!0,e,{translations:{ar:{conversations:{add_attachment:{titles:{attachment:"الملف المراد إرفاقه",remove_attachment:"إزالة مرفق"}}}},de:{conversations:{add_attachment:{titles:{attachment:"Anzuhängende Datei",remove_attachment:"Dateianhang entfernen"}}}},"en-AU":{conversations:{add_attachment:{titles:{attachment:"File to attach",remove_attachment:"Remove attachment"}}}},"en-GB":{conversations:{add_attachment:{titles:{attachment:"File to attach",remove_attachment:"Remove attachment"}}}},es:{conversations:{add_attachment:{titles:{attachment:"Archivo para adjuntar",remove_attachment:"Remover el archivo adjunto"}}}},"fa-IR":{conversations:{add_attachment:{titles:{attachment:"فایل برای پیوست کردن",remove_attachment:"حذف پیوست"}}}},fr:{conversations:{add_attachment:{titles:{attachment:"Fichier à joindre",remove_attachment:"Supprimer les pièces jointes"}}}},ja:{conversations:{add_attachment:{titles:{attachment:"添付するファイル",remove_attachment:"添付ファイルの削除"}}}},ko:{conversations:{add_attachment:{titles:{attachment:"첨부할 파일",remove_attachment:"첨부 제거"}}}},nb:{conversations:{add_attachment:{titles:{attachment:"Fil som skal legges ved",remove_attachment:"Fjern vedlegg"}}}},nl:{conversations:{add_attachment:{titles:{attachment:"Bestand om bij te voegen",remove_attachment:"Bijlage verwijderen"}}}},pl:{conversations:{add_attachment:{titles:{attachment:"Plik do załączenia",remove_attachment:"Usuń załącznik"}}}},pt:{conversations:{add_attachment:{titles:{attachment:"Arquivo para anexar",remove_attachment:"Remover anexo"}}}},"pt-BR":{conversations:{add_attachment:{titles:{attachment:"Arquivo para anexar",remove_attachment:"Remover anexo"}}}},ru:{conversations:{add_attachment:{titles:{attachment:"Файл для вложения",remove_attachment:"Удалить вложение"}}}},tr:{conversations:{add_attachment:{titles:{attachment:"Dosya ekle",remove_attachment:"Ekli dosyayı kaldır"}}}},zh:{conversations:{add_attachment:{titles:{attachment:"要附加的文件",remove_attachment:"删除附件"}}}}}})}),define("jst/conversations/addAttachment",["compiled/handlebars_helpers","i18n!conversations.add_attachment"],function(e){var t=e.template,n=e.templates=e.templates||{};return n["conversations/addAttachment"]=t(function(e,t,n,o,s){this.compilerInfo=[4,">= 1.0.0"],n=this.merge(n,e.helpers),s=s||{};var a,r,i,c="",l=n.helperMissing;return c+='<li class="attachment clearfix" tabindex="0"\n    title="',r=n.t||t&&t.t,i={hash:{scope:"conversations.add_attachment"},data:s},a=r?r.call(t,"titles.attachment","File to attach",i):l.call(t,"t","titles.attachment","File to attach",i),(a||0===a)&&(c+=a),c+='">\n      <a href="#"\n         class="remove_link icon-end black pull-right"\n         title="',r=n.t||t&&t.t,i={hash:{scope:"conversations.add_attachment"},data:s},a=r?r.call(t,"titles.remove_attachment","Remove attachment",i):l.call(t,"t","titles.remove_attachment","Remove attachment",i),(a||0===a)&&(c+=a),c+='">\n        <span class="screenreader-only">\n          ',r=n.t||t&&t.t,i={hash:{scope:"conversations.add_attachment"},data:s},a=r?r.call(t,"titles.remove_attachment","Remove attachment",i):l.call(t,"t","titles.remove_attachment","Remove attachment",i),(a||0===a)&&(c+=a),c+='\n        </span>\n      </a>\n      <div class="attachment-icon" aria-hidden="true">\n        <i class="icon-paperclip"></i>\n      </div>\n      <div class="attachment-name-clip"></div>\n      <div class="attachment-name"></div>\n      <input type="file"\n             class="file_input"\n             name="attachments[]">\n  </div>\n</li>\n'}),n["conversations/addAttachment"]}),function(){var e={}.hasOwnProperty,t=function(t,n){function o(){this.constructor=t}for(var s in n)e.call(n,s)&&(t[s]=n[s]);return o.prototype=n.prototype,t.prototype=new o,t.__super__=n.prototype,t};define("compiled/models/ConversationSearchResult",["underscore","Backbone"],function(e,n){var o,s,a;return s=n.Model,o=function(n){function o(){return a=o.__super__.constructor.apply(this,arguments)}return t(o,n),o.prototype.parse=function(t){return e.extend(t,{isContext:"context"===t.type})},o}(s)})}.call(this),define("translations/conversations.autocomplete_token",["i18nObj","jquery"],function(e,t){t.extend(!0,e,{translations:{ar:{conversations:{autocomplete_token:{remove_recipient:"إزالة المستلم"}}},de:{conversations:{autocomplete_token:{remove_recipient:"Empfänger entfernen"}}},"en-AU":{conversations:{autocomplete_token:{remove_recipient:"Remove recipient"}}},"en-GB":{conversations:{autocomplete_token:{remove_recipient:"Remove recipient"}}},es:{conversations:{autocomplete_token:{remove_recipient:"Eliminar destinatario"}}},"fa-IR":{conversations:{autocomplete_token:{remove_recipient:"حذف گیرنده"}}},fr:{conversations:{autocomplete_token:{remove_recipient:"Supprimer le destinataire"}}},ja:{conversations:{autocomplete_token:{remove_recipient:"受信者の削除"}}},ko:{conversations:{autocomplete_token:{remove_recipient:"수신인 제거"}}},nb:{conversations:{autocomplete_token:{remove_recipient:"Fjern mottaker"}}},nl:{conversations:{autocomplete_token:{remove_recipient:"Geadresseerde verwijderen"}}},pl:{conversations:{autocomplete_token:{remove_recipient:"Usuń odbiorcę"}}},pt:{conversations:{autocomplete_token:{remove_recipient:"Remover destinatário"}}},"pt-BR":{conversations:{autocomplete_token:{remove_recipient:"Remover destinatário"}}},ru:{conversations:{autocomplete_token:{remove_recipient:"Удалить получателя"}}},tr:{conversations:{autocomplete_token:{remove_recipient:"Alıcıları sil"}}},zh:{conversations:{autocomplete_token:{remove_recipient:"删除收件人"}}}}})}),define("jst/conversations/autocompleteToken",["compiled/handlebars_helpers","i18n!conversations.autocomplete_token"],function(e){var t=e.template,n=e.templates=e.templates||{};return n["conversations/autocompleteToken"]=t(function(e,t,n,o,s){this.compilerInfo=[4,">= 1.0.0"],n=this.merge(n,e.helpers),s=s||{};var a,r,i,c="",l="function",u=this.escapeExpression,d=n.helperMissing;return c+='<li class="ac-token">\n  ',(r=n.name)?a=r.call(t,{hash:{},data:s}):(r=t&&t.name,a=typeof r===l?r.call(t,{hash:{},data:s}):r),c+=u(a)+'\n\n  <a href="#"\n     class="ac-token-remove-btn">\n    <i class="icon-x"></i>\n    <span class="screenreader-only">\n      ',r=n.t||t&&t.t,i={hash:{scope:"conversations.autocomplete_token"},data:s},a=r?r.call(t,"remove_recipient","Remove recipient",i):d.call(t,"t","remove_recipient","Remove recipient",i),(a||0===a)&&(c+=a),c+='\n    </span>\n  </a>\n\n\n  <input type="hidden"\n         name="recipients[]"\n         value="',(r=n.id)?a=r.call(t,{hash:{},data:s}):(r=t&&t.id,a=typeof r===l?r.call(t,{hash:{},data:s}):r),c+=u(a)+'" />\n</li>\n'}),n["conversations/autocompleteToken"]}),define("translations/conversations.autocomplete_result",["i18nObj","jquery"],function(e,t){t.extend(!0,e,{translations:{ar:{conversations:{autocomplete_result:{group_people:"الأشخاص: %{people}",no_results:"بلا نتائج"}}},de:{conversations:{autocomplete_result:{group_people:"Personen: %{people}",no_results:"Keine Ergebnisse"}}},"en-AU":{conversations:{autocomplete_result:{group_people:"People: %{people}",no_results:"No results"}}},"en-GB":{conversations:{autocomplete_result:{group_people:"People: %{people}",no_results:"No results"}}},es:{conversations:{autocomplete_result:{group_people:"Personas: %{people}",no_results:"Sin resultados"}}},"fa-IR":{conversations:{autocomplete_result:{group_people:"افراد: %{people}",no_results:"نتیجه موجود نیست"}}},fr:{conversations:{autocomplete_result:{group_people:"Personnes : %{people}",no_results:"Aucun résultat"}}},ja:{conversations:{autocomplete_result:{group_people:"メンバー: %{people}",no_results:"結果なし"}}},ko:{conversations:{autocomplete_result:{group_people:"사용자: %{people}",no_results:"결과 없음"}}},nb:{conversations:{autocomplete_result:{group_people:"Personer: %{people}",no_results:"Ingen resultater"}}},nl:{conversations:{autocomplete_result:{group_people:"Personen: %{people}",no_results:"Geen resultaten"}}},pl:{conversations:{autocomplete_result:{group_people:"Osoby: %{people}",no_results:"Brak wyników"}}},pt:{conversations:{autocomplete_result:{group_people:"Pessoas: %{people}",no_results:"Nenhum resultado"}}},"pt-BR":{conversations:{autocomplete_result:{group_people:"Pessoas: %{people}",no_results:"Nenhum resultado"}}},ru:{conversations:{autocomplete_result:{group_people:"Люди: %{people}",no_results:"Без результата"}}},tr:{conversations:{autocomplete_result:{group_people:"Kişi : %{people}",no_results:"Sonuç yok"}}},zh:{conversations:{autocomplete_result:{group_people:"人员: %{people}",no_results:"无结果"}}}}})}),define("jst/conversations/autocompleteResult",["compiled/handlebars_helpers","i18n!conversations.autocomplete_result"],function(e){var t=e.template,n=e.templates=e.templates||{};return n["conversations/autocompleteResult"]=t(function(e,t,n,o,s){function a(e,t){var o,s,a,r="";return r+='\n  <span class="no-result text-center">\n    ',s=n.t||e&&e.t,a={hash:{scope:"conversations.autocomplete_result"},data:t},o=s?s.call(e,"no_results","No results",a):v.call(e,"t","no_results","No results",a),(o||0===o)&&(r+=o),r+="\n  </span>\n"}function r(e,t){var o,s="";return s+="\n  ",o=n["if"].call(e,e&&e.isContext,{hash:{},inverse:b.program(6,c,t),fn:b.program(4,i,t),data:t}),(o||0===o)&&(s+=o),s+="\n"}function i(e,t){var o,s,a="";return a+='\n    <b class="result-name">',(s=n.name)?o=s.call(e,{hash:{},data:t}):(s=e&&e.name,o=typeof s===f?s.call(e,{hash:{},data:t}):s),a+=y(o)+"</b>\n  "}function c(e,t){var o,s="";return s+="\n    ",o=n["if"].call(e,e&&e.everyone,{hash:{},inverse:b.program(9,u,t),fn:b.program(7,l,t),data:t}),(o||0===o)&&(s+=o),s+="\n  "}function l(e,t){var o,s,a="";return a+='\n      <b class="result-name">',(s=n.name)?o=s.call(e,{hash:{},data:t}):(s=e&&e.name,o=typeof s===f?s.call(e,{hash:{},data:t}):s),a+=y(o)+"</b>\n    "}function u(e,t){var o,s,a="";return a+='\n      <span class="result-name">',(s=n.name)?o=s.call(e,{hash:{},data:t}):(s=e&&e.name,o=typeof s===f?s.call(e,{hash:{},data:t}):s),a+=y(o)+"</span>\n    "}function d(e,t){var o,s="";return s+="\n    ",o=n["if"].call(e,e&&e.back,{hash:{},inverse:b.program(14,h,t),fn:b.program(12,p,t),data:t}),(o||0===o)&&(s+=o),s+="\n  "}function p(){return'\n      <i class="icon-mini-arrow-left"></i>\n    '}function h(){return'\n      <i class="icon-mini-arrow-right"></i>\n    '}function m(e,t){var o,s,a,r="";return r+="\n    ",s=n.t||e&&e.t,a={hash:{scope:"conversations.autocomplete_result"},data:t},o=s?s.call(e,"group_people","People: %{people}",a):v.call(e,"t","group_people","People: %{people}",a),(o||0===o)&&(r+=o),r+="\n  "}this.compilerInfo=[4,">= 1.0.0"],n=this.merge(n,e.helpers),s=s||{};var _,g="",v=n.helperMissing,f="function",y=this.escapeExpression,b=this;return _=n["if"].call(t,t&&t.noResults,{hash:{},inverse:b.program(3,r,s),fn:b.program(1,a,s),data:s}),(_||0===_)&&(g+=_),g+='\n\n<div class="pull-right">\n  ',_=n["if"].call(t,t&&t.isContext,{hash:{},inverse:b.noop,fn:b.program(11,d,s),data:s}),(_||0===_)&&(g+=_),g+="\n\n  ",_=n["if"].call(t,t&&t.people,{hash:{},inverse:b.noop,fn:b.program(16,m,s),data:s}),(_||0===_)&&(g+=_),g+="\n</div>\n"}),n["conversations/autocompleteResult"]}),function(){var e=function(e,t){return function(){return e.apply(t,arguments)}},t={}.hasOwnProperty,n=function(e,n){function o(){this.constructor=e}for(var s in n)t.call(n,s)&&(e[s]=n[s]);return o.prototype=n.prototype,e.prototype=new o,e.__super__=n.prototype,e};define("compiled/views/conversations/AutocompleteView",["i18n!conversations","Backbone","jquery","underscore","compiled/collections/PaginatedCollection","compiled/models/ConversationSearchResult","compiled/views/PaginatedCollectionView","jst/conversations/autocompleteToken","jst/conversations/autocompleteResult"],function(t,o,s,a,r,i,c,l,u){var d,p,h;return p=function(e){return e.charAt(0).toUpperCase()+e.slice(1)},d=function(d){function m(){return this._addToken=e(this._addToken,this),this._onSearchResultLoad=e(this._onSearchResultLoad,this),this._getModel=e(this._getModel,this),this._addToModelCache=e(this._addToModelCache,this),h=m.__super__.constructor.apply(this,arguments)}return n(m,d),m.optionProperty("single"),m.optionProperty("excludeAll"),m.prototype.collection=null,m.prototype.currentRequest=null,m.prototype.currentContext=null,m.prototype.parentContexts=[],m.prototype.selectedModel=null,m.prototype.tokens=[],m.prototype.permissions={},m.prototype.cache={},m.prototype.url=function(e){var t,n;return t="/api/v1/search/recipients?",n={search:e,per_page:20,"permissions[]":"send_messages_all",synthetic_contexts:!0},this.currentContext&&(n.context=this.currentContext.id),t+a.reduce(n,function(e,t,n){return e.push(""+n+"="+t),e},[]).join("&")},m.prototype.messages={noResults:t.t("no_results_found","No results found"),back:t.t("back","Back"),everyone:function(e){return t.t("all_in_context","All in %{context}",{context:e})},"private":t.t("cannot_add_to_private","You cannot add participants to a private conversation.")},m.prototype.keys={8:"backspace",13:"enter",27:"escape",38:"up",40:"down"},m.prototype.els={".ac-input-box":"$inputBox",".ac-input":"$input",".ac-token-list":"$tokenList",".ac-result-wrapper":"$resultWrapper",".ac-result-container":"$resultContainer",".ac-result-contents":"$resultContents",".ac-result-list":"$resultList",".ac-placeholder":"$placeholder",".ac-clear":"$clearBtn",".ac-search-btn":"$searchBtn"},m.prototype.events={"blur      .ac-input":"_onInputBlur","click     .ac-input-box":"_onWidgetClick","click     .ac-clear":"_onClearTokens","click     .ac-token-remove-btn":"_onRemoveToken","click     .ac-search-btn":"_onSearch","keyclick  .ac-search-btn":"_onSearch","focus     .ac-input":"_onInputFocus","input     .ac-input":"_onSearchTermChange","keydown   .ac-input":"_onInputAction","mousedown .ac-result":"_onResultClick","mouseenter .ac-result-list":"_clearSelectedStyles"},m.prototype.initialize=function(){var e=this;return m.__super__.initialize.apply(this,arguments),this.render(),this.$span=this._initializeWidthSpan(),setTimeout(function(){return e.options.disabled?e._disable():void 0},0),this._fetchResults=a.debounce(this.__fetchResults,250),this.resultView=new c({el:this.$resultContents,scrollContainer:this.$resultContainer,buffer:50,collection:new o.Collection,template:null,itemView:o.View.extend({template:u}),itemViewOptions:{tagName:"li",attributes:function(){var e,t;return t=["ac-result"],this.model.get("isContext")&&t.push("context"),this.model.get("back")&&t.push("back"),this.model.get("everyone")&&t.push("everyone"),e={"class":t.join(" "),"data-id":this.model.id,"data-people-count":this.model.get("user_count"),id:"result-"+s.guid++},e["aria-haspopup"]=this.model.get("isContext"),e}}})},m.prototype._attachCollection=function(){return this.resultView.switchCollection(this.resultCollection),this.resultView.stopListening(this.resultCollection,"reset",this.resultView.renderOnReset),this.resultView.stopListening(this.resultCollection,"remove",this.resultView.removeItem)},m.prototype.toggleResultList=function(e){return this.$resultWrapper.attr("aria-hidden",!e),this.$resultWrapper.toggle(e),this.$input.attr("aria-expanded",e),e?void 0:this.$resultList.empty()},m.prototype._disable=function(){return this.disable(),this.$inputBox.attr("title",this.messages["private"]),this.$inputBox.attr("data-tooltip",'{"position":"bottom"}'),this.disabled=!0},m.prototype._resetContext=function(){return this.currentContext=this.hasExternalContext?a.isEmpty(this.parentContexts)?this.currentContext:a.head(this.parentContexts):null,this.parentContexts=[]},m.prototype._initializeWidthSpan=function(){return s("<span />").css({fontSize:"14px",position:"absolute",top:"-9999px"}).appendTo("body")},m.prototype.modelCache=new o.Collection,m.prototype._addToModelCache=function(e){return this.modelCache.add(e)},m.prototype._getModel=function(e){var t;return e=e&&String(e),t=this.modelCache.get(e)},m.prototype._clearSelectedStyles=function(){return this.$resultList.find(".selected").removeClass("selected"),this.selectedModel=null},m.prototype._onWidgetClick=function(){return this.$input.focus()},m.prototype._onInputAction=function(e){var t,n;if(t=this.keys[e.keyCode])return n="_on"+p(t)+"Key","function"==typeof this[n]?this[n].call(this,e):void 0},m.prototype._onInputBlur=function(){return this.$inputBox.removeClass("focused"),this.tokens.length||this.$input.val()||this.$placeholder.css({opacity:1}),this._resetContext(),this.toggleResultList(!1)},m.prototype._onInputFocus=function(e){return this.$inputBox.addClass("focused"),this.$placeholder.css({opacity:0}),s(e.target).hasClass("ac-input")?void 0:this.$input[0].selectionStart=this.$input.val().length},m.prototype._onSearchTermChange=function(){var e=this;return this.$input.val()?this._fetchResults():this.toggleResultList(!1),this.$input.width(this.$span.text(this.$input.val()).width()+15),this.resultView.collection.each(function(t){return e.resultView.removeItem(t)})},m.prototype._onSearchResultLoad=function(){var e,t;return a.extend(this.permissions,this._getPermissions()),!this.excludeAll&&this._canSendToAll()&&this._addEveryoneResult(this.resultCollection),this.resultCollection.each(this._addToModelCache),t=this.resultCollection.length,e=!this.nextRequest,this._addBackResult(this.resultCollection),this.currentRequest=null,t&&e?this._drawResults():e&&this.resultCollection.push(new i({id:"no_results",name:"",noResults:!0})),this.nextRequest?this._fetchResults(!0):void 0},m.prototype._canSendToAll=function(){var e;return this.currentContext?(e=this.currentContext.id.replace(/_(students|teachers)$/,""),this.permissions[e]):!1},m.prototype._getPermissions=function(){var e;return e=this.resultCollection.filter(function(e){return e.attributes.hasOwnProperty("permissions")}),a.reduce(e,function(e,t){var n;return n=t.id.replace(/_(students|teachers)$/,""),e[n]=!!t.get("permissions").send_messages_all,e},{})},m.prototype._addEveryoneResult=function(e){var t,n,o;if(this.currentContext){if(t=this.messages.everyone(this.currentContext.name),n=new RegExp(this.$input.val().trim(),"gi"),n&&!t.match(n)||!e.length&&!this.currentContext)return e;if(!this.currentContext.id.match(/course_\d+_(group|section)/))return o={id:this.currentContext.id,name:t,everyone:!0,people:this.currentContext.peopleCount},e.unshift(new i(o))}},m.prototype._addBackResult=function(e){var t,n;return this.parentContexts.length?(n={id:"back",name:this.messages.back,back:!0,isContext:!0},t=new i(n),e.unshift(t),this._addToModelCache(t)):e},m.prototype._drawResults=function(){var e;return this.resultView.empty=!this.resultView.collection.length,this.resultView.$(".collectionViewItems").empty(),this.resultView.render(),e=this.$resultList.find("li:first").addClass("selected"),this.selectedModel=this._getModel(e.data("id")),this.$input.attr("aria-activedescendant",e.attr("id"))},m.prototype.__fetchResults=function(e){var t;return null==e&&(e=!1),(this.$input.val()||e)&&(t=this._loadURL())?(this.currentUrl=t,this.cache[t]?(this.resultCollection=this.cache[t],this._attachCollection(),this.toggleResultList(!0),this._onSearchResultLoad()):(this.resultCollection=new r([],{model:i}),this.resultCollection.url=t,this.cache[t]=this.resultCollection,this._attachCollection(),this.currentRequest=this.resultCollection.fetch().done(this._onSearchResultLoad),this.toggleResultList(!0))):void 0},m.prototype._loadURL=function(){var e,t;return t=this.url(this.$input.val()),this.currentRequest?(this.nextRequest=t,""):(e=this.nextRequest,delete this.nextRequest,e||t)},m.prototype._onBackspaceKey=function(){return this.$input.val()?void 0:this._removeToken(a.last(this.tokens))},m.prototype._onEscapeKey=function(e){var t=this;return e.preventDefault()&&e.stopPropagation(),this.toggleResultList(!1),this._resetContext(),setTimeout(function(){return t.$input.focus()},0)},m.prototype._onEnterKey=function(e){return e.preventDefault()&&e.stopPropagation(),this._activateSelected(e.metaKey||e.ctrlKey)},m.prototype._activateSelected=function(e){return null==e&&(e=!1),this.selectedModel&&!this.selectedModel.get("noResults")?this.selectedModel.get("back")?(this.currentContext=this.parentContexts.pop(),this._fetchResults(!0)):this.selectedModel.get("isContext")?(this.parentContexts.push(this.currentContext),this.$input.val(""),this.currentContext={id:this.selectedModel.id,name:this.selectedModel.get("name"),peopleCount:this.selectedModel.get("user_count")},this._fetchResults(!0)):this._addToken(this.selectedModel.attributes,e):void 0},m.prototype._onDownKey=function(e){return this._onArrowKey(e,1)},m.prototype._onUpKey=function(e){return this._onArrowKey(e,-1)},m.prototype._onArrowKey=function(e,t){var n,o,s;return e.preventDefault()&&e.stopPropagation(),this.$resultList.find("li.selected:first").removeClass("selected"),o=this.selectedModel?this.resultCollection.indexOf(this.selectedModel):-1,s=o+t,0>s&&(s=0),s>=this.resultCollection.length&&(s=this.resultCollection.length-1),this.selectedModel=this.resultCollection.at(s),n=this.$resultList.find("[data-id="+this.selectedModel.id+"]"),n.scrollIntoView(),this.$input.attr("aria-activedescendant",n.addClass("selected").attr("id"))},m.prototype._onResultClick=function(e){var t;if(0===e.button)return e.preventDefault()&&e.stopPropagation(),t=s(e.currentTarget),this.selectedModel=this.resultCollection.get(t.data("id")),this._activateSelected(e.metaKey||e.ctrlKey)},m.prototype._onClearTokens=function(e){for(e.preventDefault();this.tokens.length;)this._removeToken(this.tokens[0],!1);return this.$clearBtn.hide(),this.disabled||this.$input.prop("disabled",!1).focus(),this.trigger("enabled"),this.trigger("changeToken",this.tokenParams())},m.prototype._onRemoveToken=function(e){return e.preventDefault(),this._removeToken(s(e.currentTarget).siblings("input").val())},m.prototype._onSearch=function(){return this.$searchBtn.attr("disabled")?void 0:(this._fetchResults(!0),this.$input.focus())},m.prototype._addToken=function(e,t){return null==t&&(t=!1),this.disabled?void 0:(e.name=this._formatTokenName(e),this.tokens.push(e.id),this.$tokenList.append(l(e)),t||(this.toggleResultList(!1),this.selectedModel=null,this._resetContext()),this.$input.val(""),this.options.single&&(this.$clearBtn.show().focus(),this.$input.prop("disabled",!0),this.$searchBtn.prop("disabled",!0),this.trigger("disabled")),this.trigger("changeToken",this.tokenParams()))},m.prototype._formatTokenName=function(e){var t;return e.everyone?(t=a.head(this.parentContexts))?""+t.name+": "+this.currentContext.name:this.currentContext.name:e.name},m.prototype._removeToken=function(e,t){return null==t&&(t=!1),this.disabled?void 0:(this.$tokenList.find("input[value="+e+"]").parent().remove(),this.tokens.splice(a.indexOf(e),1),this.tokens.length||this.$clearBtn.hide(),this.options.single&&!this.tokens.length&&(this.$input.prop("disabled",!1),this.$searchBtn.prop("disabled",!1),this.trigger("enabled")),t?void 0:this.trigger("changeToken",this.tokenParams()))},m.prototype.tokenParams=function(){return a.map(this.tokens,function(e){return e.match?e:"user_"+e})},m.prototype.tokenModels=function(){return a.map(this.tokens,this._getModel)},m.prototype.setContext=function(e,t){var n;return null==t&&(t=!1),e.id||(e=null),!t||a.include(ENV.current_user_roles,"admin")||this.disabled||this.disable(!e),(null!=e?e.id:void 0)!==(null!=(n=this.currentContext)?n.id:void 0)?(this.currentContext=e,this.hasExternalContext=!!e,this.tokens=[],this.$tokenList.find("li.ac-token").remove()):void 0},m.prototype.disable=function(e){return null==e&&(e=!0),this.$input.prop("disabled",e),this.$searchBtn.prop("disabled",e),this.$inputBox.toggleClass("disabled",e)},m.prototype.setTokens=function(e){var t=this;return a.each(e,function(e){return t._addToModelCache(e),t._addToken(e)})},m}(o.View)})}.call(this),function(){var e=function(e,t){return function(){return e.apply(t,arguments)}},t={}.hasOwnProperty,n=function(e,n){function o(){this.constructor=e}for(var s in n)t.call(n,s)&&(e[s]=n[s]);return o.prototype=n.prototype,e.prototype=new o,e.__super__=n.prototype,e};define("compiled/views/conversations/SearchableSubmenuView",["i18n!conversations","jquery","underscore","Backbone"],function(t,o,s,a){var r,i,c;return i=a.View,r=function(a){function r(){return this.handleRightArrow=e(this.handleRightArrow,this),this.handleUpArrow=e(this.handleUpArrow,this),this.handleDownArrow=e(this.handleDownArrow,this),this.search=e(this.search,this),c=r.__super__.constructor.apply(this,arguments)}return n(r,a),r.prototype.initialize=function(){var e,n;return r.__super__.initialize.apply(this,arguments),this.$field=o("<input />").attr({"class":"dropdown-search",type:"search",placeholder:t.t("course_name","Course name")}).keyup(s.debounce(this.search,100)).keydown(this.handleDownArrow),n=this.getMenuRoot().text(),e=o("<label>").append(o("<span />").addClass("screenreader-only").text(t.t("search_category","Search %{category}",{category:n}))).append(this.$field),this.$submenu=this.$el.children(".dropdown-menu").prepend(e).find(".inner").keydown(this.handleUpArrow),this.getMenuRoot().keydown(this.handleRightArrow),this.$contents=this.$el.find("li")},r.prototype.search=function(){var e;return e=this.$field.val().toLowerCase(),e?this.$contents.each(function(){var t,n,s,a;return n=o(this),t=n.find("abbr"),a=t.length?t.attr("title"):n.find("span").text(),s=-1!==a.toLowerCase().indexOf(e),n[s?"show":"hide"]()}):void this.$contents.show()},r.prototype.clearSearch=function(){return this.$field.val(""),this.search()},r.prototype.getFirstEntry=function(){return this.$submenu.find("li:not(.divider):visible > a").first()
},r.prototype.getMenuRoot=function(){return this.$el.children("[role=menuitem]")},r.prototype.handleDownArrow=function(e){return 40===e.keyCode?(e.preventDefault(),this.getFirstEntry().focus()):void 0},r.prototype.handleUpArrow=function(e){return 38===e.keyCode&&e.target===this.getFirstEntry()[0]?(e.stopPropagation(),this.$field.focus()):void 0},r.prototype.handleRightArrow=function(e){return 39===e.keyCode?(e.stopPropagation(),this.$field.focus()):void 0},r}(i)})}.call(this),define("translations/conversations.course_options",["i18nObj","jquery"],function(e,t){t.extend(!0,e,{translations:{ar:{conversations:{course_options:{course_options:{concluded:"تم الانتهاء",groups:"المجموعات",more_courses:"مزيد من المساقات"}}}},de:{conversations:{course_options:{course_options:{concluded:"Abgeschlossen",groups:"Gruppen",more_courses:"Weitere Kurse"}}}},"en-AU":{conversations:{course_options:{course_options:{concluded:"Concluded",groups:"Groups",more_courses:"More Courses"}}}},"en-GB":{conversations:{course_options:{course_options:{concluded:"Concluded",groups:"Groups",more_courses:"More courses"}}}},es:{conversations:{course_options:{course_options:{concluded:"Finalizado",groups:"Grupos",more_courses:"Más cursos"}}}},"fa-IR":{conversations:{course_options:{course_options:{concluded:"خاتمه یافته",groups:"گروه ها",more_courses:"درس های دیگر"}}}},fr:{conversations:{course_options:{course_options:{concluded:"Closes",groups:"Groupes",more_courses:"Cours supplémentaires"}}}},ja:{conversations:{course_options:{course_options:{concluded:"完了",groups:"グループ",more_courses:"その他のコース"}}}},ko:{conversations:{course_options:{course_options:{concluded:"종결됨",groups:"그룹",more_courses:"다른 과목"}}}},nb:{conversations:{course_options:{course_options:{concluded:"Avsluttet",groups:"Grupper",more_courses:"Flere kurs"}}}},nl:{conversations:{course_options:{course_options:{concluded:"Gesloten",groups:"Groepen",more_courses:"Meer cursussen"}}}},pl:{conversations:{course_options:{course_options:{concluded:"Ukończone",groups:"Grupy",more_courses:"Więcej kursów"}}}},pt:{conversations:{course_options:{course_options:{concluded:"Concluído",groups:"Grupos",more_courses:"Mais disciplinas"}}}},"pt-BR":{conversations:{course_options:{course_options:{concluded:"Concluído",groups:"Grupos",more_courses:"Mais cursos"}}}},ru:{conversations:{course_options:{course_options:{concluded:"Завершено",groups:"Группы",more_courses:"Другие курсы"}}}},tr:{conversations:{course_options:{course_options:{concluded:"Sonlandırıldı",groups:"Gruplar",more_courses:"Daha Fazla Dersler"}}}},zh:{conversations:{course_options:{course_options:{concluded:"已结束",groups:"组",more_courses:"更多课程"}}}}}})}),define("jst/conversations/_courseOption",["compiled/handlebars_helpers"],function(e){var t=e.template,n=e.templates=e.templates||{};return n["conversations/_courseOption"]=t(function(e,t,n,o,s){function a(e,t){var o,s,a="";return a+='\n  aria-label="',(s=n.name)?o=s.call(e,{hash:{},data:t}):(s=e&&e.name,o=typeof s===u?s.call(e,{hash:{},data:t}):s),a+=d(o)+"\" data-content=\"<abbr class='text' data-value='",(s=n.id)?o=s.call(e,{hash:{},data:t}):(s=e&&e.id,o=typeof s===u?s.call(e,{hash:{},data:t}):s),a+=d(o)+"' title='",(s=n.name)?o=s.call(e,{hash:{},data:t}):(s=e&&e.name,o=typeof s===u?s.call(e,{hash:{},data:t}):s),a+=d(o)+"'>",(s=n.truncated_name)?o=s.call(e,{hash:{},data:t}):(s=e&&e.truncated_name,o=typeof s===u?s.call(e,{hash:{},data:t}):s),a+=d(o)+'</abbr>"\n  >\n  ',(s=n.truncated_name)?o=s.call(e,{hash:{},data:t}):(s=e&&e.truncated_name,o=typeof s===u?s.call(e,{hash:{},data:t}):s),a+=d(o)+"\n"}function r(e,t){var o,s,a="";return a+="\n  >\n  ",(s=n.name)?o=s.call(e,{hash:{},data:t}):(s=e&&e.name,o=typeof s===u?s.call(e,{hash:{},data:t}):s),a+=d(o)+"\n"}this.compilerInfo=[4,">= 1.0.0"],n=this.merge(n,e.helpers),s=s||{};var i,c,l="",u="function",d=this.escapeExpression,p=this;return l+='<option value="course_',(c=n.id)?i=c.call(t,{hash:{},data:s}):(c=t&&t.id,i=typeof c===u?c.call(t,{hash:{},data:s}):c),l+=d(i)+'" data-code="',(c=n.course_code)?i=c.call(t,{hash:{},data:s}):(c=t&&t.course_code,i=typeof c===u?c.call(t,{hash:{},data:s}):c),l+=d(i)+'"\n',i=n["if"].call(t,t&&t.truncated_name,{hash:{},inverse:p.program(3,r,s),fn:p.program(1,a,s),data:s}),(i||0===i)&&(l+=i),l+="\n</option>\n"}),e.registerPartial("conversations/courseOption",n["conversations/_courseOption"]),n["conversations/_courseOption"]}),define("jst/conversations/_groupOption",["compiled/handlebars_helpers"],function(e){var t=e.template,n=e.templates=e.templates||{};return n["conversations/_groupOption"]=t(function(e,t,n,o,s){function a(e,t){var o,s,a="";return a+='\n  aria-label="',(s=n.name)?o=s.call(e,{hash:{},data:t}):(s=e&&e.name,o=typeof s===u?s.call(e,{hash:{},data:t}):s),a+=d(o)+"\" data-content=\"<abbr class='text' data-value='",(s=n.id)?o=s.call(e,{hash:{},data:t}):(s=e&&e.id,o=typeof s===u?s.call(e,{hash:{},data:t}):s),a+=d(o)+"' title='",(s=n.name)?o=s.call(e,{hash:{},data:t}):(s=e&&e.name,o=typeof s===u?s.call(e,{hash:{},data:t}):s),a+=d(o)+"'>",(s=n.truncated_name)?o=s.call(e,{hash:{},data:t}):(s=e&&e.truncated_name,o=typeof s===u?s.call(e,{hash:{},data:t}):s),a+=d(o)+'</abbr>"\n  >\n  ',(s=n.truncated_name)?o=s.call(e,{hash:{},data:t}):(s=e&&e.truncated_name,o=typeof s===u?s.call(e,{hash:{},data:t}):s),a+=d(o)+"\n"}function r(e,t){var o,s,a="";return a+="\n  >\n  ",(s=n.name)?o=s.call(e,{hash:{},data:t}):(s=e&&e.name,o=typeof s===u?s.call(e,{hash:{},data:t}):s),a+=d(o)+"\n"}this.compilerInfo=[4,">= 1.0.0"],n=this.merge(n,e.helpers),s=s||{};var i,c,l="",u="function",d=this.escapeExpression,p=this;return l+='<option value="group_',(c=n.id)?i=c.call(t,{hash:{},data:s}):(c=t&&t.id,i=typeof c===u?c.call(t,{hash:{},data:s}):c),l+=d(i)+'"\n',i=n["if"].call(t,t&&t.truncated_name,{hash:{},inverse:p.program(3,r,s),fn:p.program(1,a,s),data:s}),(i||0===i)&&(l+=i),l+="\n</option>\n"}),e.registerPartial("conversations/groupOption",n["conversations/_groupOption"]),n["conversations/_groupOption"]}),define("jst/conversations/courseOptions",["compiled/handlebars_helpers","i18n!conversations.course_options","jst/conversations/_courseOption","jst/conversations/_groupOption"],function(e){var t=e.template,n=e.templates=e.templates||{};return n["conversations/courseOptions"]=t(function(e,t,n,o,s){function a(e,t){var s,a="";return a+="\n  ",s=p.invokePartial(o["conversations/courseOption"],"conversations/courseOption",e,n,o,t),(s||0===s)&&(a+=s),a+="\n"}function r(e,t){var s,a="";return a+="\n    ",s=p.invokePartial(o["conversations/courseOption"],"conversations/courseOption",e,n,o,t),(s||0===s)&&(a+=s),a+="\n  "}function i(e,t){var s,a="";return a+="\n    ",s=p.invokePartial(o["conversations/groupOption"],"conversations/groupOption",e,n,o,t),(s||0===s)&&(a+=s),a+="\n  "}this.compilerInfo=[4,">= 1.0.0"],n=this.merge(n,e.helpers),o=this.merge(o,e.partials),s=s||{};var c,l,u,d="",p=this,h="function",m=this.escapeExpression,_=n.blockHelperMissing,g=n.helperMissing;return d+='<option value="">',(l=n.defaultOption)?c=l.call(t,{hash:{},data:s}):(l=t&&t.defaultOption,c=typeof l===h?l.call(t,{hash:{},data:s}):l),d+=m(c)+"</option>\n",u={hash:{},inverse:p.noop,fn:p.program(1,a,s),data:s},(l=n.favorites)?c=l.call(t,u):(l=t&&t.favorites,c=typeof l===h?l.call(t,u):l),n.favorites||(c=_.call(t,c,{hash:{},inverse:p.noop,fn:p.program(1,a,s),data:s})),(c||0===c)&&(d+=c),d+='\n<optgroup label="',l=n.t||t&&t.t,u={hash:{scope:"conversations.course_options"},data:s},c=l?l.call(t,"course_options.more_courses","More Courses",u):g.call(t,"t","course_options.more_courses","More Courses",u),(c||0===c)&&(d+=c),d+='">\n  ',u={hash:{},inverse:p.noop,fn:p.program(3,r,s),data:s},(l=n.more)?c=l.call(t,u):(l=t&&t.more,c=typeof l===h?l.call(t,u):l),n.more||(c=_.call(t,c,{hash:{},inverse:p.noop,fn:p.program(3,r,s),data:s})),(c||0===c)&&(d+=c),d+='\n</optgroup>\n<optgroup label="',l=n.t||t&&t.t,u={hash:{scope:"conversations.course_options"},data:s},c=l?l.call(t,"course_options.concluded","Concluded",u):g.call(t,"t","course_options.concluded","Concluded",u),(c||0===c)&&(d+=c),d+='">\n  ',u={hash:{},inverse:p.noop,fn:p.program(3,r,s),data:s},(l=n.concluded)?c=l.call(t,u):(l=t&&t.concluded,c=typeof l===h?l.call(t,u):l),n.concluded||(c=_.call(t,c,{hash:{},inverse:p.noop,fn:p.program(3,r,s),data:s})),(c||0===c)&&(d+=c),d+='\n</optgroup>\n<optgroup label="',l=n.t||t&&t.t,u={hash:{scope:"conversations.course_options"},data:s},c=l?l.call(t,"course_options.groups","Groups",u):g.call(t,"t","course_options.groups","Groups",u),(c||0===c)&&(d+=c),d+='">\n  ',u={hash:{},inverse:p.noop,fn:p.program(5,i,s),data:s},(l=n.groups)?c=l.call(t,u):(l=t&&t.groups,c=typeof l===h?l.call(t,u):l),n.groups||(c=_.call(t,c,{hash:{},inverse:p.noop,fn:p.program(5,i,s),data:s})),(c||0===c)&&(d+=c),d+="\n</optgroup>\n"}),n["conversations/courseOptions"]}),define("vendor/bootstrap/bootstrap-dropdown",["jquery"],function(){!function(e){function t(){var t=e(document.activeElement).closest(".dropdown-menu");t&&t.parent().prev().focus(),e(".dropdown-backdrop").remove(),e(o).each(function(){n(e(this)).removeClass("open").attr("aria-expanded","false")}),e(".dropdown-submenu").each(function(){e(this).removeClass("open").attr("aria-expanded","false")})}function n(t){var n,o=t.attr("data-target");return o||(o=t.attr("href"),o=o&&/#/.test(o)&&o.replace(/.*(?=#[^\s]*$)/,"")),n=o&&e(o),n&&n.length||(n=t.parent()),n}var o="[data-toggle=dropdown]",s=function(t){var n=e(t).on("click.dropdown.data-api",this.toggle);e("html").on("click.dropdown.data-api",function(){n.parent().removeClass("open").attr("aria-expanded","false")})};s.prototype={constructor:s,toggle:function(){var o,s,a=e(this);if(!a.is(".disabled, :disabled"))return o=n(a),s=o.hasClass("open"),t(),s||("ontouchstart"in document.documentElement&&e('<div class="dropdown-backdrop"/>').insertBefore(e(this)).on("click",t),o.toggleClass("open").attr("aria-expanded","true")),a.focus(),!1},keydown:function(s){var a,r,i,c,l,u;if(9==s.keyCode)return t();if(!e(s.target).is("input")&&/(37|38|39|40|27)/.test(s.keyCode)&&(a=e(this),s.preventDefault(),s.stopPropagation(),!a.is(".disabled, :disabled"))){if(i=n(a),l=i.hasClass("open"),!l||l&&27==s.keyCode)return 27==s.which&&i.find(o).focus(),setTimeout(function(){e("li:not(.divider):visible > a",i).first().focus()},0),a.click();if(37==s.keyCode)return c=e(s.target).closest("ul"),void(c.is("[role=group]")&&c.closest("li").children("a").focus());if(39==s.keyCode)return c=e(s.target).next(),void(c.is(".dropdown-menu")&&(c.find("li:not(.divider):visible > a").eq(0).focus(),s.preventDefault()));c=e(s.target).is("a")?e(s.target).closest("ul"):e("[role=menu]",i),r=e("> li:not(.divider):visible > a",c),r.length&&(u=r.index(r.filter(":focus")),38==s.keyCode&&u>0&&u--,40==s.keyCode&&u<r.length-1&&u++,~u||(u=0),r.eq(u).focus())}},focusSubmenu:function(){e(this).addClass("open").attr("aria-expanded","true")},blurSubmenu:function(){var t=this;setTimeout(function(){e.contains(t,document.activeElement)||e(t).removeClass("open").attr("aria-expanded","false")},0)},clickSubmenu:function(t){e(t.target).closest("li").hasClass("dropdown-submenu")&&(t.stopPropagation(),t.preventDefault())}};var a=e.fn.dropdown;e.fn.dropdown=function(t){return this.each(function(){var n=e(this),o=n.data("dropdown");o||n.data("dropdown",o=new s(this)),"string"==typeof t&&o[t].call(n)})},e.fn.dropdown.Constructor=s,e.fn.dropdown.noConflict=function(){return e.fn.dropdown=a,this},e(document).on("click.dropdown.data-api",t).on("click.dropdown.data-api",".dropdown form",function(e){e.stopPropagation()}).on("click.dropdown.data-api",o,s.prototype.toggle).on("keydown.dropdown.data-api",o+", [role=menu]",s.prototype.keydown).on("focus.dropdown.data-api",".dropdown-submenu",s.prototype.focusSubmenu).on("blur.dropdown.data-api",".dropdown-submenu",s.prototype.blurSubmenu).on("click.dropdown.data-api",".dropdown-submenu",s.prototype.clickSubmenu)}(window.jQuery)}),define("vendor/bootstrap-select/bootstrap-select",["jquery"],function(){!function(e){var t=function(n,o,s){s&&(s.stopPropagation(),s.preventDefault()),this.$element=e(n),this.$newElement=null,this.button=null,this.$menu=null,this.options=e.extend({},e.fn.selectpicker.defaults,this.$element.data(),"object"==typeof o&&o),null==this.options.title&&(this.options.title=this.$element.attr("title")),this.val=t.prototype.val,this.render=t.prototype.render,this.refresh=t.prototype.refresh,this.setStyle=t.prototype.setStyle,this.selectAll=t.prototype.selectAll,this.deselectAll=t.prototype.deselectAll,this.init()};t.prototype={constructor:t,init:function(){this.$element.hide(),this.multiple=this.$element.prop("multiple");var t=this.$element.attr("id");if(this.id=t?t+"-bs":"bs-"+(window.$||window).guid++,this.$newElement=this.createView(),this.$element.after(this.$newElement),this.$menu=this.$newElement.find("> .dropdown-menu"),this.button=this.$newElement.find("> button"),void 0!==t){var n=this;this.button.attr("data-id",t),e('label[for="'+t+'"]').click(function(){n.button.focus()})}this.$menu.attr("id",this.id),this.button.attr("aria-owns",this.id),this.button.attr("aria-label",this.$element.attr("aria-label")),this.button.attr("aria-labelledby",this.$element.attr("aria-labelledby")),this.multiple&&this.$newElement.addClass("show-tick"),this.checkDisabled(),this.checkTabIndex(),this.clickListener(),this.render(),this.liHeight(),this.setWidth(),this.setStyle(),this.options.container&&this.selectPosition()},createDropdown:function(){var t="<div class='btn-group bootstrap-select'><button type='button' class='btn dropdown-toggle' data-toggle='dropdown'><div class='filter-option pull-left'></div>&nbsp;<div class='caret'></div></button><div class='dropdown-menu open'><ul class='dropdown-menu inner' role='menu'></ul></div></div>";return e(t)},createView:function(){var e=this.createDropdown(),t=this.createLi();return e.find("ul").append(t),e},reloadLi:function(){this.destroyLi();var e=this.createLi();this.$newElement.find("ul").append(e)},destroyLi:function(){this.$newElement.find("li").remove()},createLi:function(){var t=this,n=[],o=[],s="";return this.$element.find("option").each(function(s){var a=e(this),r=a.attr("class")||"",i=a.attr("style")||"",c=a.data("content")?a.data("content"):a.html(),l=void 0!==a.data("subtext")?'<small class="muted">'+a.data("subtext")+"</small>":"",u=void 0!==a.data("icon")?'<i class="'+a.data("icon")+'"></i> ':"";""!==u&&(a.is(":disabled")||a.parent().is(":disabled"))&&(u="<span>"+u+"</span>");var d=a.attr("value");if(d=void 0!==d?e("<div/>").text(d).html():c,a.data("content")||(c=u+'<span class="text" data-value="'+d+'">'+c+l+"</span>"),t.options.hideDisabled&&(a.is(":disabled")||a.parent().is(":disabled")))n.push('<a style="min-height: 0; padding: 0"></a>');else if(a.parent().is("optgroup")&&1!=a.data("divider"))if(0==a.index()){var p=a.parent().attr("label"),h=void 0!==a.parent().data("subtext")?'<small class="muted">'+a.parent().data("subtext")+"</small>":"",m=a.parent().data("icon")?'<i class="'+a.parent().data("icon")+'"></i> ':"";p=m+'<span class="text">'+p+h+"</span>",t.options.useSubmenus?(n.push('<div class="div-contain"><div class="divider"></div></div><a role="menuitem" aria-haspopup="true" tabindex="-1" href="#">'+p+'</a><div class="dropdown-menu open"><ul class="dropdown-menu inner" role="group">'),o.push(t.createA(c,"opt "+r,i,s,a))):n.push(0!=a[0].index?'<div class="div-contain"><div class="divider"></div></div><dt>'+p+"</dt>"+t.createA(c,"opt "+r,i,s,a):"<dt>"+p+"</dt>"+t.createA(c,"opt "+r,i,s,a))}else{var _=t.options.useSubmenus?o:n;_.push(t.createA(c,"opt "+r,i,s,a))}else n.push(1==a.data("divider")?'<div class="div-contain"><div class="divider"></div></div>':1==e(this).data("hidden")?"":t.createA(c,r,i,s,a));if(o.length&&!a.next().length){var g=n.pop();e.each(o,function(e,t){g+="<li rel='"+e+"'>"+t+"</li>"}),g+="</ul></div>",n.push(g),o=[]}}),e.each(n,function(e,t){var n=-1!=t.indexOf("<ul");s+="<li rel='"+e+"'"+(n?" class='dropdown-submenu'":"")+">"+t+"</li>"}),this.multiple||0!=this.$element.find("option:selected").length||t.options.title||this.$element.find("option").eq(0).prop("selected",!0).attr("selected","selected"),e(s)},createA:function(e,t,n,o,s){var a="";return void 0!==s.attr("aria-label")&&(a=' aria-label="'+s.attr("aria-label")+'"'),'<a tabindex="-1" class="'+t+'" style="'+n+'" role="menuitemcheckbox"'+a+">"+e+'<i class="icon-ok check-mark"></i></a>'},render:function(t){var n=this;this.$element.find("option").each(function(t){n.setDisabled(t,e(this).is(":disabled")||e(this).parent().is(":disabled")),n.setSelected(t,e(this).is(":selected"))});var o=this.$element.find("option:selected").map(function(){var t,o=e(this),s=o.data("icon")&&n.options.showIcon?'<i class="'+o.data("icon")+'"></i> ':"";return t=n.options.showSubtext&&o.attr("data-subtext")&&!n.multiple?' <small class="muted">'+o.data("subtext")+"</small>":"",o.data("content")&&n.options.showContent?o.data("content"):void 0!=o.attr("title")?o.attr("title"):s+o.html()+t}).toArray(),s=this.multiple?o.join(", "):o[0];if(n.multiple&&n.options.selectedTextFormat.indexOf("count")>-1){var a=n.options.selectedTextFormat.split(">"),r=this.options.hideDisabled?":not([disabled])":"";(a.length>1&&o.length>a[1]||1==a.length&&o.length>=2)&&(s=n.options.countSelectedText.replace("{0}",o.length).replace("{1}",this.$element.find('option:not([data-divider="true"]):not([data-hidden="true"])'+r).length))}s||(s=void 0!=n.options.title?n.options.title:n.options.noneSelectedText);var i;i=this.options.showSubtext&&this.$element.find("option:selected").attr("data-subtext")?' <small class="muted">'+this.$element.find("option:selected").data("subtext")+"</small>":"",n.$newElement.find(".filter-option").html(s+i),t&&e("li:not(.divider):visible > a",n.$newElement).first().focus()},setStyle:function(e,t){this.$element.attr("class")&&this.$newElement.addClass(this.$element.attr("class").replace(/selectpicker/gi,""));var n=e?e:this.options.style;"add"==t?this.button.addClass(n):(this.button.removeClass(this.options.style),this.button.addClass(n))},liHeight:function(){var e=this.$newElement.clone();e.appendTo("body");var t=e.addClass("open").find(".dropdown-menu li > a").outerHeight();e.remove(),this.$newElement.data("liHeight",t)},setSize:function(){var t,n=this,o=this.$newElement.find("> .dropdown-menu"),s=o.find("> .inner"),a=(s.find("li > a"),this.$newElement.outerHeight()),r=this.$newElement.data("liHeight"),i=o.find("li .divider").outerHeight(!0),c=parseInt(o.css("padding-top"))+parseInt(o.css("padding-bottom"))+parseInt(o.css("border-top-width"))+parseInt(o.css("border-bottom-width")),l=this.options.hideDisabled?":not(.disabled)":"";if("auto"==this.options.size){var u=function(){var i,l=n.$newElement.offset().top,u=l-e(window).scrollTop(),d=e(window).height(),p=c+parseInt(o.css("margin-top"))+parseInt(o.css("margin-bottom"))+2,h=d-u-a-p;t=h,n.$newElement.hasClass("dropup")&&(t=u-p),i=o.find("li").length+o.find("dt").length>3?3*r+p-2:0,o.css({"max-height":t+"px",overflow:"visible","min-height":i+"px"}),s.css({"max-height":t-c+"px","overflow-y":"visible"})};u(),e(window).resize(u),e(window).scroll(u)}else if(this.options.size&&"auto"!=this.options.size&&o.find("li"+l).length>this.options.size){var d=o.find("li"+l+" > *").filter(":not(.div-contain)").slice(0,this.options.size).last().parent().index(),p=o.find("li").slice(0,d+1).find(".div-contain").length;t=r*this.options.size+p*i+c,o.css({"max-height":t+"px",overflow:"hidden"}),s.css({"max-height":t-c+"px","overflow-y":"auto"})}},setWidth:function(){var e=this.$newElement.find("> .dropdown-menu");if("auto"==this.options.width){e.css("min-width","0");var t=e.css("width");this.$newElement.css("width",t)}else this.options.width&&this.$newElement.css("width",this.options.width)},selectPosition:function(){var t,n,o=this,s="<div />",a=e(s),r=function(e){a.addClass(e.attr("class").replace(/open/gi,"")),t=e.offset(),n=e[0].offsetHeight,a.css({top:t.top+n,left:t.left,width:e[0].offsetWidth,position:"absolute"})};this.$newElement.on("click",function(){return r(e(this)),a.toggleClass("open"),a.append(o.$menu),a.appendTo(o.options.container),!1}),e(window).resize(function(){r(o.$newElement)}),e(window).scroll(function(){r(o.$newElement)}),e("html").on("click",function(){a.removeClass("open")})},refresh:function(){var t=this.$newElement.hasClass("open")&&e.contains(this.$menu[0],document.activeElement);this.reloadLi(),this.render(t),this.setWidth(),this.setStyle(),this.checkDisabled()},setSelected:function(e,t){var n=this.$menu.find("a[role=menuitemcheckbox]").eq(e);t?n.parent().addClass("selected"):n.parent().removeClass("selected"),n.attr("aria-checked",t?"true":"false")},setDisabled:function(e,t){t?this.$menu.find("li").eq(e).addClass("disabled").find("a").attr("href","#").attr("tabindex",-1):this.$menu.find("li").eq(e).removeClass("disabled").find("a").removeAttr("href")},isDisabled:function(){return this.$element.is(":disabled")||this.$element.attr("readonly")},checkDisabled:function(){var e=this;this.isDisabled()?(this.button.addClass("disabled"),this.button.attr("tabindex","-1")):!this.isDisabled()&&this.button.hasClass("disabled")&&(this.button.removeClass("disabled"),this.button.removeAttr("tabindex")),this.button.click(function(){return e.isDisabled()?!1:void 0})},checkTabIndex:function(){if(this.$element.is("[tabindex]")){var e=this.$element.attr("tabindex");this.button.attr("tabindex",e)}},clickListener:function(){var t=this;e("body").on("touchstart.dropdown",".dropdown-menu",function(e){e.stopPropagation()}),this.$newElement.on("click",function(){t.setSize()}),this.$menu.on("click","li a",function(n){if(!e(this).closest("li").hasClass("dropdown-submenu")){var o=t.$newElement.find("a[role=menuitemcheckbox]").index(this),s=(e(this).parent(),t.$element.val());if(t.multiple&&n.stopPropagation(),n.preventDefault(),t.$element.not(":disabled")&&!e(this).parent().hasClass("disabled")){if(t.multiple){var a=t.$element.find("option").eq(o).prop("selected");a?t.$element.find("option").eq(o).prop("selected",!1):t.$element.find("option").eq(o).prop("selected",!0)}else t.$element.find("option").prop("selected",!1),t.$element.find("option").eq(o).prop("selected",!0);t.button.focus(),s!=t.$element.val()&&t.$element.trigger("change"),t.render()}}}),this.$menu.on("click","li.disabled a, li dt, li .div-contain",function(n){n.preventDefault(),n.stopPropagation();e(this).parent().parents(".bootstrap-select");t.button.focus()}),this.$element.on("change",function(){t.render()})},val:function(e){return void 0!=e?(this.$element.val(e),this.$element.trigger("change"),this.$element):this.$element.val()},selectAll:function(){this.$element.find("option").prop("selected",!0).attr("selected","selected"),this.render()},deselectAll:function(){this.$element.find("option").prop("selected",!1).removeAttr("selected"),this.render()},keydown:function(t){var n,o,s,a,r;if(n=e(this),s=n.parent(),a=e(t.target),!a.is("input")&&(r=a.is("a")?e(t.target).closest("ul"):e("[role=menu]",s),o=e("> li:not(.divider):visible > a",r),o.length)){var i={48:"0",49:"1",50:"2",51:"3",52:"4",53:"5",54:"6",55:"7",56:"8",57:"9",59:";",65:"a",66:"b",67:"c",68:"d",69:"e",70:"f",71:"g",72:"h",73:"i",74:"j",75:"k",76:"l",77:"m",78:"n",79:"o",80:"p",81:"q",82:"r",83:"s",84:"t",85:"u",86:"v",87:"w",88:"x",89:"y",90:"z",96:"0",97:"1",98:"2",99:"3",100:"4",101:"5",102:"6",103:"7",104:"8",105:"9"},c=[];o.each(function(){e(this).parent().is(":not(.disabled)")&&e.trim(e(this).text().toLowerCase()).substring(0,1)==i[t.keyCode]&&c.push(e(this).parent().index())});var l=e(document).data("keycount");l++,e(document).data("keycount",l);var u=e.trim(e(":focus").text().toLowerCase()).substring(0,1);return u!=i[t.keyCode]?(l=1,e(document).data("keycount",l)):l>=c.length&&e(document).data("keycount",0),o.eq(c[l-1]).focus(),/(13)/.test(t.keyCode)?(e(":focus").click(),s.addClass("open"),e(document).data("keycount",0),!1):void 0}},hide:function(){this.$newElement.hide()},show:function(){this.$newElement.show()},destroy:function(){this.$newElement.remove(),this.$element.remove()}},e.fn.selectpicker=function(n,o){var s,a=arguments,r=this.each(function(){if(e(this).is("select")){var r=e(this),i=r.data("selectpicker"),c="object"==typeof n&&n;if(i){if(c)for(var l in c)i.options[l]=c[l]}else r.data("selectpicker",i=new t(this,c,o));if("string"==typeof n){var u=n;i[u]instanceof Function?([].shift.apply(a),s=i[u].apply(i,a)):s=i.options[u]}}});return void 0!=s?s:r},e.fn.selectpicker.defaults={style:null,size:"auto",title:null,selectedTextFormat:"values",noneSelectedText:"Nothing selected",countSelectedText:"{0} of {1} selected",width:null,container:!1,hideDisabled:!1,showSubtext:!1,showIcon:!0,showContent:!0,useSubmenus:!1},e(document).data("keycount",0).on("keydown","[data-toggle=dropdown], [role=menu]",t.prototype.keydown)}(window.jQuery)}),function(){var e=function(e,t){return function(){return e.apply(t,arguments)}},t={}.hasOwnProperty,n=function(e,n){function o(){this.constructor=e}for(var s in n)t.call(n,s)&&(e[s]=n[s]);return o.prototype=n.prototype,e.prototype=new o,e.__super__=n.prototype,e};define("compiled/views/conversations/CourseSelectionView",["i18n!conversations","jquery","underscore","Backbone","compiled/views/conversations/SearchableSubmenuView","jst/conversations/courseOptions","jquery.instructure_date_and_time","vendor/bootstrap/bootstrap-dropdown","vendor/bootstrap-select/bootstrap-select"],function(t,o,s,a,r,i){var c,l,u,d;return u=a.View,c=a.Collection,l=function(a){function c(){return this.truncate_course=e(this.truncate_course,this),this.loadAll=e(this.loadAll,this),this.render=e(this.render,this),d=c.__super__.constructor.apply(this,arguments)}return n(c,a),c.prototype.events={change:"onChange"},c.prototype.initialize=function(){return c.__super__.initialize.apply(this,arguments),this.options.defaultOption||(this.options.defaultOption=t.t("all_courses","All Courses")),this.$el.addClass("show-tick"),this.$el.selectpicker({useSubmenus:!0}).next().on("mouseover",this.loadAll).find(".dropdown-toggle").on("focus",this.loadAll),this.options.courses.favorites.on("reset",this.render),this.options.courses.all.on("reset",this.render),this.options.courses.all.on("add",this.render),this.options.courses.groups.on("reset",this.render),this.options.courses.groups.on("add",this.render),this.render()},c.prototype.render=function(){var e,t,n,s,a=this;return c.__super__.render.call(this),n=[],e=[],s=o.fudgeDateForProfileTimezone(new Date),this.options.courses.all.each(function(t){var o,r;if(!a.options.courses.favorites.get(t.id))return r="completed"===t.get("workflow_state")||t.get("end_at")&&new Date(t.get("end_at"))<s||t.get("term").end_at&&new Date(t.get("term").end_at)<s,o=r?e:n,o.push(t.toJSON())}),t={defaultOption:this.options.defaultOption,favorites:this.options.courses.favorites.toJSON(),more:n,concluded:e,groups:this.options.courses.groups.toJSON()},this.truncate_course_name_data(t),this.$el.html(i(t)),this.$el.selectpicker("refresh"),this.$picker=this.$el.next(),this.$picker.find(".paginatedLoadingIndicator").remove(),this.createSearchViews(),this.renderValue()?void 0:this.loadAll()},c.prototype.createSearchViews=function(){var e;return e=[],this.$picker.find(".dropdown-submenu").each(function(){return e.push(new r({el:this}))}),this.searchViews=e},c.prototype.loadAll=function(){var e;return e=this.options.courses.all,e._loading?void 0:(e.fetch(),e._loading=!0,this.options.courses.groups.fetch(),this.$picker.find("> .dropdown-menu").append(o("<div />").attr("class","paginatedLoadingIndicator").css("clear","both")))},c.prototype._value="",c.prototype.setValue=function(e){return this._value=e||"",this.renderValue(),this.triggerEvent()},c.prototype.renderValue=function(){return this.silenced=!0,this.$el.selectpicker("val",this._value),this.silenced=!1,this.$el.val()===this._value},c.prototype.onChange=function(){return this.silenced?void 0:(this._value=this.$el.val(),this.triggerEvent(),this.searchViews.forEach(function(e){return e.clearSearch()}))},c.prototype.getCurrentContext=function(){var e,t,n,o,s,a;return(s=this._value.match(/(\w+)_(\d+)/))?(o=s[0],a=s[1],n=s[2],e="course"===a?t=this.options.courses.favorites.get(n)||this.options.courses.all.get(n):this.options.courses.groups.get(n),e?{name:e.get("name"),id:this._value}:{}):{}},c.prototype.triggerEvent=function(){return this.trigger("course",this.getCurrentContext())},c.prototype.focus=function(){return this.$el.next().find(".dropdown-toggle").focus()},c.prototype.truncate_course_name_data=function(e){var t=this;return s.each(["favorites","more","concluded","groups"],function(n){return t.truncate_course_names(e[n])})},c.prototype.truncate_course_names=function(e){return s.each(e,this.truncate_course)},c.prototype.truncate_course=function(e){var t,n;return t=e.name,n=this.middle_truncate(t),t!==n?e.truncated_name=n:void 0},c.prototype.middle_truncate=function(e){return e.length>25?e.slice(0,10)+"&hellip;"+e.slice(-10):e},c}(u)})}.call(this),define("translations/conversations.context_message",["i18nObj","jquery"],function(e,t){t.extend(!0,e,{translations:{ar:{conversations:{context_message:{delete_message:"حذف الرسالة",labels:{less:"أقل...",more:"المزيد..."}}}},de:{conversations:{context_message:{delete_message:"Nachricht löschen",labels:{less:"Weniger...",more:"Mehr..."}}}},"en-AU":{conversations:{context_message:{delete_message:"Delete message",labels:{less:"less...",more:"more..."}}}},"en-GB":{conversations:{context_message:{delete_message:"Delete message",labels:{less:"less...",more:"more..."}}}},es:{conversations:{context_message:{delete_message:"Borrar mensaje",labels:{less:"menos...",more:"más..."}}}},"fa-IR":{conversations:{context_message:{delete_message:"حذف پیام",labels:{less:"کمتر...",more:"بیشتر..."}}}},fr:{conversations:{context_message:{delete_message:"Supprimer le message",labels:{less:"moins...",more:"plus..."}}}},ja:{conversations:{context_message:{delete_message:"メッセージの削除",labels:{less:"表示を減らす",more:"もっと読む..."}}}},ko:{conversations:{context_message:{delete_message:"메시지 삭제",labels:{less:"간단히...",more:"더 보기..."}}}},nb:{conversations:{context_message:{delete_message:"Slett beskjed",labels:{less:"mindre…",more:"mer…"}}}},nl:{conversations:{context_message:{delete_message:"Bericht verwijderen",labels:{less:"minder...",more:"meer..."}}}},pl:{conversations:{context_message:{delete_message:"Usuń wiadomość",labels:{less:"mniej...",more:"więcej..."}}}},pt:{conversations:{context_message:{delete_message:"Eliminar mensagem",labels:{less:"menos...",more:"mais..."}}}},"pt-BR":{conversations:{context_message:{delete_message:"Excluir mensagem",labels:{less:"menos...",more:"mais..."}}}},ru:{conversations:{context_message:{delete_message:"Удалить сообщение",labels:{less:"менее...",more:"дополнительно..."}}}},tr:{conversations:{context_message:{delete_message:"Mesajı sil",labels:{less:"daha az...",more:"daha fazla..."}}}},zh:{conversations:{context_message:{delete_message:"删除消息",labels:{less:"更少...",more:"更多..."}}}}}})}),define("jst/conversations/contextMessage",["compiled/handlebars_helpers","i18n!conversations.context_message"],function(e){var t=e.template,n=e.templates=e.templates||{};return n["conversations/contextMessage"]=t(function(e,t,n,o,s){function a(e,t){var o,s="";return s+='\n    <a class="context-more pull-right" href="#">\n      ',o=n["if"].call(e,e&&e.isCondensed,{hash:{},inverse:h.program(4,i,t),fn:h.program(2,r,t),data:t}),(o||0===o)&&(s+=o),s+="\n    </a>\n  "}function r(e,t){var o,s,a,r="";return r+="\n        ",s=n.t||e&&e.t,a={hash:{scope:"conversations.context_message"},data:t},o=s?s.call(e,"labels.more","more...",a):p.call(e,"t","labels.more","more...",a),(o||0===o)&&(r+=o),r+="\n      "}function i(e,t){var o,s,a,r="";return r+="\n        ",s=n.t||e&&e.t,a={hash:{scope:"conversations.context_message"},data:t},o=s?s.call(e,"labels.less","less...",a):p.call(e,"t","labels.less","less...",a),(o||0===o)&&(r+=o),r+="\n      "}this.compilerInfo=[4,">= 1.0.0"],n=this.merge(n,e.helpers),s=s||{};
var c,l,u,d="",p=n.helperMissing,h=this,m="function",_=this.escapeExpression;return d+='<input type="hidden" name="included_messages[]" value="',(l=n.id)?c=l.call(t,{hash:{},data:s}):(l=t&&t.id,c=typeof l===m?l.call(t,{hash:{},data:s}):l),d+=_(c)+'" />\n<div class="context-author pull-left">'+_((c=t&&t.author,c=null==c||c===!1?c:c.name,typeof c===m?c.apply(t):c))+'</div>\n<div class="pull-right">\n  <span class="context-date">'+_((l=n.friendlyDatetime||t&&t.friendlyDatetime,u={hash:{},data:s},l?l.call(t,t&&t.created_at,u):p.call(t,"friendlyDatetime",t&&t.created_at,u)))+'</span>\n  <a class="icon-x delete-btn" href="#" aria-label="',l=n.t||t&&t.t,u={hash:{scope:"conversations.context_message"},data:s},c=l?l.call(t,"delete_message","Delete message",u):p.call(t,"t","delete_message","Delete message",u),(c||0===c)&&(d+=c),d+='"></a>\n  </ul>\n</div>\n<div class="context-body" aria-live="polite">\n  ',(l=n.body)?c=l.call(t,{hash:{},data:s}):(l=t&&t.body,c=typeof l===m?l.call(t,{hash:{},data:s}):l),d+=_(c)+"\n  ",c=n["if"].call(t,t&&t.isCondensable,{hash:{},inverse:h.noop,fn:h.program(1,a,s),data:s}),(c||0===c)&&(d+=c),d+="\n</div>\n"}),n["conversations/contextMessage"]}),function(){var e={}.hasOwnProperty,t=function(t,n){function o(){this.constructor=t}for(var s in n)e.call(n,s)&&(t[s]=n[s]);return o.prototype=n.prototype,t.prototype=new o,t.__super__=n.prototype,t};define("compiled/views/conversations/ContextMessageView",["Backbone","jst/conversations/contextMessage"],function(e,n){var o,s,a;return s=e.View,o=function(e){function o(){return a=o.__super__.constructor.apply(this,arguments)}return t(o,e),o.prototype.tagName="li",o.prototype.template=n,o.prototype.events={"click a.context-more":"toggle","click a.delete-btn":"remove"},o.prototype.initialize=function(){return o.__super__.initialize.apply(this,arguments),this.model.set({isCondensable:this.model.get("body").length>180}),this.model.set({isCondensed:!0})},o.prototype.toJSON=function(){var e;return e=o.__super__.toJSON.apply(this,arguments),e.isCondensable&&e.isCondensed&&(e.body=e.body.substr(0,180).replace(/\W\w*$/,"")),e},o.prototype.toggle=function(e){return e.preventDefault(),this.model.set({isCondensed:!this.model.get("isCondensed")}),this.render(),this.$("a").focus()},o}(s)})}.call(this),function(){var e={}.hasOwnProperty,t=function(t,n){function o(){this.constructor=t}for(var s in n)e.call(n,s)&&(t[s]=n[s]);return o.prototype=n.prototype,t.prototype=new o,t.__super__=n.prototype,t};define("compiled/views/conversations/ContextMessagesView",["compiled/views/CollectionView","compiled/views/conversations/ContextMessageView"],function(e,n){var o,s;return o=function(e){function o(){return s=o.__super__.constructor.apply(this,arguments)}return t(o,e),o.prototype.itemView=n,o}(e)})}.call(this),define("vendor/jquery.elastic",["jquery"],function(e){e.fn.extend({elastic:function(t){var n=e.extend({},t),o=["paddingTop","paddingRight","paddingBottom","paddingLeft","borderLeftWidth","borderLeftStyle","borderRightWidth","borderRightStyle","fontSize","lineHeight","fontFamily","width","fontWeight"];return this.each(function(){function t(e,t){var n=Math.floor(parseInt(e,10));a.height()!=n&&a.css({height:n+"px",overflow:t})}function s(){var o=a.val().replace(/&/g,"&amp;").replace(/  /g,"&nbsp;").replace(/<|>/g,"&gt;").replace(/\n/g,"<br />"),s=r.html().replace(/<br>/gi,"<br />");if(o+"&nbsp;"!=s){r[0].innerHTML=o+"&nbsp;",r.width(a.width());var u=r.height();if(Math.abs(u+i-a.height())>3){var d=u+i;d>=l?t(l,"auto"):c>=d?t(c,"hidden"):t(d,"hidden"),e.isFunction(n.callback)&&n.callback()}}}if("textarea"!=this.type)return!1;var a=e(this),r=e("<div />").css({position:"absolute",display:"none","word-wrap":"break-word"}).prependTo(a.parent()),i=parseInt(a.css("line-height"),10)||parseInt(a.css("font-size"),"10"),c=parseInt(a.css("height"),10)||3*i,l=parseInt(a.css("max-height"),10)||Number.MAX_VALUE;0>l&&(l=Number.MAX_VALUE),e.each(o,function(e,t){r.css(t,a.css(t))}),a.css({overflow:"hidden"}).bind("keyup change cut paste",s).bind("input paste",function(){setTimeout(s,250)}),s()})}})}),function(){var e=function(e,t){return function(){return e.apply(t,arguments)}},t={}.hasOwnProperty,n=function(e,n){function o(){this.constructor=e}for(var s in n)t.call(n,s)&&(e[s]=n[s]);return o.prototype=n.prototype,e.prototype=new o,e.__super__=n.prototype,e},o=[].indexOf||function(e){for(var t=0,n=this.length;n>t;t++)if(t in this&&this[t]===e)return t;return-1};define("compiled/views/conversations/MessageFormDialog",["i18n!conversation_dialog","jquery","underscore","Backbone","compiled/views/DialogBaseView","jst/conversations/MessageFormDialog","compiled/fn/preventDefault","jst/conversations/composeTitleBar","jst/conversations/composeButtonBar","jst/conversations/addAttachment","compiled/models/Message","compiled/views/conversations/AutocompleteView","compiled/views/conversations/CourseSelectionView","compiled/views/conversations/ContextMessagesView","vendor/jquery.elastic"],function(t,s,a,r,i,c,l,u,d,p,h,m,_,g){var v,f,y;return v=r.Collection,f=function(r){function i(){return this.focusNextAttachment=e(this.focusNextAttachment,this),this.focusPrevAttachment=e(this.focusPrevAttachment,this),this.removeAttachment=e(this.removeAttachment,this),this.handleAttachmentKeyDown=e(this.handleAttachmentKeyDown,this),this.handleAttachment=e(this.handleAttachment,this),this.handleAttachmentDblClick=e(this.handleAttachmentDblClick,this),this.handleAttachmentClick=e(this.handleAttachmentClick,this),this.handleBodyClick=e(this.handleBodyClick,this),this.resizeBody=e(this.resizeBody,this),this.canAddNotesFor=e(this.canAddNotesFor,this),this.recipientIdsChanged=e(this.recipientIdsChanged,this),this.onCourse=e(this.onCourse,this),y=i.__super__.constructor.apply(this,arguments)}return n(i,r),i.prototype.template=c,i.prototype.els={".message_course":"$messageCourse",".message_course_ro":"$messageCourseRO","input[name=context_code]":"$contextCode",".message_subject":"$messageSubject",".message_subject_ro":"$messageSubjectRO",".context_messages":"$contextMessages",".media_comment":"$mediaComment","input[name=media_comment_id]":"$mediaCommentId","input[name=media_comment_type]":"$mediaCommentType",".ac":"$recipients",".attachment_list":"$attachments",".attachments-pane":"$attachmentsPane",".message-body":"$messageBody",".conversation_body":"$conversationBody",".compose_form":"$form",".user_note":"$userNote",".user_note_info":"$userNoteInfo"},i.prototype.messages={flashSuccess:t.t("message_sent","Message sent!")},i.prototype.dialogOptions=function(){var e=this;return{id:"compose-new-message",autoOpen:!1,minWidth:550,width:700,minHeight:500,height:550,resizable:!0,close:function(){return e.afterClose()},resize:function(){return e.resizeBody(),e._limitContentSize()},buttons:[{text:t.t("#buttons.cancel","Cancel"),click:this.cancel},{text:t.t("#buttons.send","Send"),"class":"btn-primary send-message","data-track-category":"Compose Message","data-track-action":"Edit","data-track-label":"Send",click:function(t){return e.sendMessage(t)}}]}},i.prototype.show=function(e,t){return(this.model=e)&&(this.message=(null!=t?t.message:void 0)||this.model.messageCollection.at(0)),this.to=null!=t?t.to:void 0,t.trigger&&(this.returnFocusTo=t.trigger),t.remoteLaunch&&(this.launchParams=a.pick(t,"context","user")),this.render(),i.__super__.show.apply(this,arguments),this.initializeForm(),this.resizeBody()},i.prototype._limitContentSize=function(){return this.$el.width()>this.$fullDialog.width()?this.$el.width("100%"):void 0},i.prototype.afterClose=function(){return this.$fullDialog.off("click",".message-body"),this.$fullDialog.off("click",".attach-file"),this.$fullDialog.off("click",".attachment .remove_link"),this.$fullDialog.off("keydown",".attachment"),this.$fullDialog.off("click",".attachment"),this.$fullDialog.off("dblclick",".attachment"),this.$fullDialog.off("change",".file_input"),this.$fullDialog.off("click",".attach-media"),this.$fullDialog.off("click",".media-comment .remove_link"),this.trigger("close"),this.returnFocusTo?(this.returnFocusTo.focus(),delete this.returnFocusTo):void 0},i.prototype.sendMessage=function(e){return e.preventDefault(),e.stopPropagation(),this.removeEmptyAttachments(),this.$form.submit()},i.prototype.initialize=function(){var e,t;return i.__super__.initialize.apply(this,arguments),this.$fullDialog=this.$el.closest(".ui-dialog"),t=this.$fullDialog.find(".ui-dialog-titlebar"),e=t.find(".ui-dialog-titlebar-close"),e.html(u()),this.$fullDialog.addClass("compose-message-dialog"),this.$fullDialog.find(".ui-dialog-buttonpane").prepend(d()),this.$addMediaComment=this.$fullDialog.find(".attach-media")},i.prototype.prepareTextarea=function(e){var t;return t=e.find("textarea"),t.elastic()},i.prototype.onCourse=function(e){return this.recipientView.setContext(e,!0),this.$contextCode.val((null!=e?e.id:void 0)?e.id:""),this.$messageCourseRO.text(e?e.name:t.t("no_course","No course"))},i.prototype.defaultCourse=null,i.prototype.setDefaultCourse=function(e){return this.defaultCourse=e},i.prototype.initializeForm=function(){var e,n,o,r,i,c,u,d,p,f,y=this;return this.prepareTextarea(this.$el),this.recipientView=new m({el:this.$recipients,disabled:null!=(d=this.model)?d.get("private"):void 0}).render(),this.recipientView.on("changeToken",this.recipientIdsChanged),this.$messageCourse.prop("disabled",!!this.model),this.courseView=new _({el:this.$messageCourse,courses:this.options.courses,defaultOption:t.t("select_course","Select course")}),this.courseView.on("course",this.onCourse),this.model?this.courseView.setValue(this.model.get("context_code")?this.model.get("context_code"):"course_"+a.keys(this.model.get("audience_contexts").courses)[0]):this.launchParams?this.launchParams.context&&this.courseView.setValue(this.launchParams.context):this.courseView.setValue(this.defaultCourse),this.model?(this.courseView.$picker.css("display","none"),this.recipientView.$input.focus()):(this.$messageCourseRO.css("display","none"),this.courseView.focus()),(this.tokenInput=this.$el.find(".recipients").data("token_input"))&&(this.tokenInput.$fakeInput.css("width","100%"),this.options.user_id&&(c={user_id:this.options.user_id,from_conversation_id:this.options.from_conversation_id},s.ajaxJSON(this.tokenInput.selector.url,"GET",c,function(e){return e.length?y.tokenInput.addToken({value:e[0].id,text:e[0].name,data:e[0]}):void 0}))),this.to&&"forward"!==this.to&&this.message&&(u=[],u.push(this.message.get("author")),("replyAll"===this.to||ENV.current_user_id===this.message.get("author").id)&&(u=u.concat(this.message.get("participants")),u.length>1&&(u=a.filter(u,function(e){return e.id!==ENV.current_user_id}))),this.recipientView.setTokens(u)),this.launchParams&&this.recipientView.setTokens([this.launchParams.user]),this.model?(this.$messageSubject.css("display","none"),this.$messageSubject.prop("disabled",!0)):this.$messageSubjectRO.css("display","none"),(null!=(p=this.model)?p.get("subject"):void 0)&&(this.$messageSubject.val(this.model.get("subject")),this.$messageSubjectRO.text(this.model.get("subject"))),(r=null!=(f=this.model)?f.messageCollection:void 0)&&(n=new Date(this.message.get("created_at")),i=this.message.get("participating_user_ids"),o=new v(r.filter(function(e){return new Date(e.get("created_at"))<=n&&!a.find(i,function(t){return!a.contains(e.get("participating_user_ids"),t)})})),e=new g({el:this.$contextMessages,collection:o}),e.render()),this.$fullDialog.on("click",".message-body",this.handleBodyClick),this.$fullDialog.on("click",".attach-file",l(function(){return y.addAttachment()})),this.$fullDialog.on("click",".attachment .remove_link",l(function(e){return y.removeAttachment(s(e.currentTarget))})),this.$fullDialog.on("keydown",".attachment",this.handleAttachmentKeyDown),this.$fullDialog.on("click",".attachment",this.handleAttachmentClick),this.$fullDialog.on("dblclick",".attachment",this.handleAttachmentDblClick),this.$fullDialog.on("change",".file_input",this.handleAttachment),this.$fullDialog.on("click",".attach-media",l(function(){return y.addMediaComment()})),this.$fullDialog.on("click",".media_comment .remove_link",l(function(e){return y.removeMediaComment(s(e.currentTarget))})),this.$addMediaComment[INST.kalturaSettings?"show":"hide"](),this.$form.formSubmit({fileUpload:function(){return y.$fullDialog.find(".attachment_list").length>0},files:function(){return y.$fullDialog.find(".file_input")},preparedFileUpload:!0,context_code:"user_"+ENV.current_user_id,folder_id:this.options.folderId,intent:"message",formDataTarget:"url",disableWhileLoading:!0,required:["body"],property_validations:{token_capture:function(){return y.recipientView&&!y.recipientView.tokens.length?t.t("errors.field_is_required","This field is required"):void 0}},handle_files:function(e,t){var n;return t.attachment_ids=function(){var t,o,s;for(s=[],t=0,o=e.length;o>t;t++)n=e[t],s.push(n.attachment.id);return s}(),t},processData:function(e){return e.context_code||(e.context_code=y.options.account_context_code),e},onSubmit:function(e){var t,n;return y.request=e,t=s.Deferred(),y.trigger("submitting",t),y.close(),n=y.to,y.to=null,s.when(y.request).then(function(e){var o;return t.resolve(),s.flashMessage(y.messages.flashSuccess),n?(o=e.messages[0],o.author={name:ENV.current_user.display_name,avatar_url:ENV.current_user.avatar_image_url},o=new h(e,{parse:!0}),y.trigger("addMessage",o.toJSON().conversation.messages[0],e)):y.trigger("newConversations",e)})}})},i.prototype.recipientIdsChanged=function(e){var t,n=this;return a.isEmpty(e)||a.contains(e,/(teachers|tas|observers)$/)?this.toggleUserNote(!1):(t=a.map(this.recipientView.tokenModels(),function(e){return n.canAddNotesFor(e)}),this.toggleUserNote(a.every(t)))},i.prototype.canAddNotesFor=function(e){var t,n,s;if(!ENV.CONVERSATIONS.NOTES_ENABLED)return!1;if(null==e)return!1;if(e.id.match(/students$/)||e.id.match(/^group/))return!0;s=e.get("common_courses");for(t in s)if(n=s[t],o.call(n,"StudentEnrollment")>=0&&(ENV.CONVERSATIONS.CAN_ADD_NOTES_FOR_ACCOUNT||ENV.CONVERSATIONS.CAN_ADD_NOTES_FOR_COURSES[t]))return!0;return!1},i.prototype.toggleUserNote=function(e){return this.$userNoteInfo.toggle(e),e===!1&&this.$userNote.prop("checked",!1),this.resizeBody()},i.prototype.resizeBody=function(){return this.updateAttachmentOverflow(),this.$messageBody.height(this.$el.offset().top+this.$el.height()-this.$messageBody.offset().top-this.$attachmentsPane.height())},i.prototype.attachmentsShouldOverflow=function(){var e;return e=this.$attachments.children(),e.length*e.outerWidth()>this.$attachmentsPane.width()},i.prototype.addAttachment=function(){var e;return e=s(p()),this.$attachments.append(e),e.hide(),e.find("input").click(),this.updateAttachmentOverflow(),this.focusAddAttachment()},i.prototype.setAttachmentClip=function(e){var t,n;return n=e.find(s(".attachment-name")),t=e.find(s(".attachment-name-clip")),t.height(n.height()),n.height()<35?t.addClass("hidden"):void 0},i.prototype.imageTypes=["jpg","jpeg","png","gif","bmp","svg"],i.prototype.handleBodyClick=function(e){return e.target===e.currentTarget?this.$conversationBody.focus():void 0},i.prototype.handleAttachmentClick=function(e){return s(e.currentTarget).focus()},i.prototype.handleAttachmentDblClick=function(e){return s(e.currentTarget).find("input").click()},i.prototype.handleAttachment=function(e){var t,n,a,r,i,c,l,u,d;return c=e.currentTarget,t=s(c).closest(".attachment"),this.updateAttachmentPane(),c.value?(t.slideDown("fast"),n=t.find(".attachment-icon i"),n.empty(),r=c.files[0],l=r.name,t.find(".attachment-name").text(l),this.setAttachmentClip(t),d=t.find(".remove_link"),d.attr("aria-label",d.attr("title")+": "+l),a=l.split(".").pop().toLowerCase(),o.call(this.imageTypes,a)>=0&&window.FileReader?(u=new FileReader,u.addEventListener("load",function(e){var t;return t=e.target,n.attr("class",""),n.append(s("<img />").attr("src",t.result))}),void u.readAsDataURL(r)):(i="paperclip",o.call(this.imageTypes,a)>=0?i="image":"pdf"===a?i="pdf":"doc"===a||"docx"===a?i="ms-word":("xls"===a||"xlsx"===a)&&(i="ms-excel"),n.attr("class","icon-"+i))):void t.hide()},i.prototype.handleAttachmentKeyDown=function(e){if(37===e.keyCode)return this.focusPrevAttachment(s(e.currentTarget));if(39===e.keyCode)return this.focusNextAttachment(s(e.currentTarget));if((13===e.keyCode||32===e.keyCode)&&!s(e.target).hasClass("remove_link"))return this.handleAttachmentDblClick(e),!1;if(46===e.keyCode||68===e.keyCode||13===e.keyCode||32===e.keyCode)return this.removeAttachment(e.currentTarget),!1},i.prototype.removeEmptyAttachments=function(){return a.each(this.$attachments.find("input[value=]"),this.removeAttachment)},i.prototype.removeAttachment=function(e){var t,n=this;return t=s(e).closest(".attachment"),this.focusNextAttachment(t)||this.focusPrevAttachment(t)||this.focusAddAttachment(),t.slideUp("fast",function(){return t.remove(),n.updateAttachmentPane()})},i.prototype.focusPrevAttachment=function(e){var t;return t=e.prevAll(":visible").first(),t.length?t.focus():!1},i.prototype.focusNextAttachment=function(e){var t;return t=e.nextAll(":visible").first(),t.length?t.focus():!1},i.prototype.focusAddAttachment=function(){return this.$fullDialog.find(".attach-file").focus()},i.prototype.addMediaComment=function(){var e=this;return this.$mediaComment.mediaComment("create","any",function(t,n){return e.$mediaCommentId.val(t),e.$mediaCommentType.val(n),e.$mediaComment.show(),e.$addMediaComment.hide()})},i.prototype.removeMediaComment=function(){return this.$mediaCommentId.val(""),this.$mediaCommentType.val(""),this.$mediaComment.hide(),this.$addMediaComment.show()},i.prototype.updateAttachmentOverflow=function(){return this.$attachmentsPane.toggleClass("overflowed",this.attachmentsShouldOverflow())},i.prototype.updateAttachmentPane=function(){return this.$attachmentsPane[this.$attachmentsPane.find("input:not([value=])").length?"addClass":"removeClass"]("has-items"),this.resizeBody()},i}(i)})}.call(this),function(){var e=function(e,t){return function(){return e.apply(t,arguments)}},t={}.hasOwnProperty,n=function(e,n){function o(){this.constructor=e}for(var s in n)t.call(n,s)&&(e[s]=n[s]);return o.prototype=n.prototype,e.prototype=new o,e.__super__=n.prototype,e};define("compiled/views/conversations/SearchView",["underscore","Backbone","compiled/views/conversations/AutocompleteView"],function(t,o,s){var a,r,i;return r=o.View,a=function(o){function a(){return this.onSearch=e(this.onSearch,this),i=a.__super__.constructor.apply(this,arguments)}return n(a,o),a.prototype.els={"#search-autocomplete":"$autocomplete"},a.prototype.initialize=function(){return a.__super__.initialize.apply(this,arguments),this.render(),this.autocompleteView=new s({el:this.$autocomplete,single:!0,excludeAll:!0}).render(),this.autocompleteView.on("changeToken",this.onSearch)},a.prototype.onSearch=function(e){return this.trigger("search",t.map(e,function(e){return"user_"+e}))},a}(r)})}.call(this),function(){var e=function(e,t){return function(){return e.apply(t,arguments)}},t={}.hasOwnProperty,n=function(e,n){function o(){this.constructor=e}for(var s in n)t.call(n,s)&&(e[s]=n[s]);return o.prototype=n.prototype,e.prototype=new o,e.__super__=n.prototype,e};define("compiled/views/conversations/InboxHeaderView",["i18n!conversations","underscore","Backbone","compiled/views/conversations/CourseSelectionView","compiled/views/conversations/SearchView","vendor/bootstrap/bootstrap-dropdown","vendor/bootstrap-select/bootstrap-select"],function(t,o,s,a,r){var i,c,l;return c=s.View,i=function(s){function i(){return this.onFilterChange=e(this.onFilterChange,this),this.onSearch=e(this.onSearch,this),l=i.__super__.constructor.apply(this,arguments)}return n(i,s),i.prototype.els={"#compose-btn":"$composeBtn","#reply-btn":"$replyBtn","#reply-all-btn":"$replyAllBtn","#archive-btn":"$archiveBtn","#delete-btn":"$deleteBtn","#type-filter":"$typeFilter","#course-filter":"$courseFilter","#admin-btn":"$adminBtn","#mark-unread-btn":"$markUnreadBtn","#mark-read-btn":"$markReadBtn","#forward-btn":"$forwardBtn","#star-toggle-btn":"$starToggleBtn","#admin-menu":"$adminMenu","#sending-message":"$sendingMessage","#sending-spinner":"$sendingSpinner","[role=search]":"$search"},i.prototype.events={"click #compose-btn":"onCompose","click #reply-btn":"onReply","click #reply-all-btn":"onReplyAll","click #archive-btn":"onArchive","click #delete-btn":"onDelete","change #type-filter":"onFilterChange","change #course-filter":"onFilterChange","click #mark-unread-btn":"onMarkUnread","click #mark-read-btn":"onMarkRead","click #forward-btn":"onForward","click #star-toggle-btn":"onStarToggle"},i.prototype.messages={star:t.t("star","Star"),unstar:t.t("unstar","Unstar"),archive:t.t("archive","Archive"),unarchive:t.t("unarchive","Unarchive"),archive_conversation:t.t("archive_conversation","Archive conversation"),unarchive_conversation:t.t("unarchive_conversation","Unarchive conversation")},i.prototype.spinnerOptions={color:"#fff",lines:10,length:2,radius:2,width:2,left:0},i.prototype.render=function(){var e;return i.__super__.render.call(this),this.$typeFilter.selectpicker(),this.courseView=new a({el:this.$courseFilter,courses:this.options.courses}),this.searchView=new r({el:this.$search}),this.searchView.on("search",this.onSearch),e=new Spinner(this.spinnerOptions),e.spin(this.$sendingSpinner[0]),this.toggleSending(!1)},i.prototype.onSearch=function(e){return this.trigger("search",e)},i.prototype.onCompose=function(){return this.trigger("compose")},i.prototype.onReply=function(){return this.trigger("reply")},i.prototype.onReplyAll=function(){return this.trigger("reply-all")},i.prototype.onArchive=function(){return this.trigger("archive")},i.prototype.onDelete=function(){return this.trigger("delete")},i.prototype.onMarkUnread=function(e){return e.preventDefault(),this.trigger("mark-unread")},i.prototype.onMarkRead=function(e){return e.preventDefault(),this.trigger("mark-read")},i.prototype.onForward=function(e){return e.preventDefault(),this.trigger("forward")},i.prototype.onStarToggle=function(e){return e.preventDefault(),this.trigger("star-toggle")},i.prototype.onModelChange=function(e,t){return this.detachModelEvents(t),this.attachModelEvents(e),this.updateUi(e)},i.prototype.updateUi=function(e){return this.toggleMessageBtns(!e||!e.get("selected")),this.onReadStateChange(e),this.onStarStateChange(e),this.onArchivedStateChange(e)},i.prototype.detachModelEvents=function(e){return e?e.off(null,null,this):void 0},i.prototype.attachModelEvents=function(e){return e?(e.on("change:workflow_state",this.onReadStateChange,this),e.on("change:starred",this.onStarStateChange,this)):void 0},i.prototype.onReadStateChange=function(e){return this.hideMarkUnreadBtn(!e||e.unread()),this.hideMarkReadBtn(!e||!e.unread()),this.refreshMenu()},i.prototype.onStarStateChange=function(e){var t;return e&&(t=e.starred()?"unstar":"star",this.$starToggleBtn.text(this.messages[t])),this.refreshMenu()},i.prototype.onArchivedStateChange=function(e){var t;if(e)return t="archived"===e.get("workflow_state"),this.$archiveBtn.find("i").attr("class",t?"icon-remove-from-collection":"icon-collection-save"),this.$archiveBtn.attr("title",t?this.messages.unarchive:this.messages.archive),this.$archiveBtn.find(".screenreader-only").text(t?this.messages.unarchive_conversation:this.messages.archive_conversation),this.refreshMenu()},i.prototype.refreshMenu=function(){return this.$adminMenu.is(".ui-menu")?this.$adminMenu.menu("refresh"):void 0},i.prototype.filterObj=function(e){return o.object(o.filter(o.pairs(e),function(e){return!!e[1]}))},i.prototype.onFilterChange=function(){var e;return null!=(e=this.searchView)&&e.autocompleteView.setContext(this.courseView.getCurrentContext()),this.trigger("filter",this.filterObj({type:this.$typeFilter.val(),course:this.$courseFilter.val()}))},i.prototype.displayState=function(e){return this.$typeFilter.selectpicker("val",e.type),this.courseView.setValue(e.course),this.trigger("course",this.courseView.getCurrentContext())},i.prototype.toggleMessageBtns=function(e){return this.toggleReplyBtn(e),this.toggleReplyAllBtn(e),this.toggleArchiveBtn(e),this.toggleDeleteBtn(e),this.toggleAdminBtn(e),this.hideForwardBtn(e)},i.prototype.toggleReplyBtn=function(e){return this._toggleBtn(this.$replyBtn,e)},i.prototype.toggleReplyAllBtn=function(e){return this._toggleBtn(this.$replyAllBtn,e)},i.prototype.toggleArchiveBtn=function(e){return this._toggleBtn(this.$archiveBtn,e)},i.prototype.toggleDeleteBtn=function(e){return this._toggleBtn(this.$deleteBtn,e)},i.prototype.toggleAdminBtn=function(e){return this._toggleBtn(this.$adminBtn,e)},i.prototype.hideMarkUnreadBtn=function(e){return e?this.$markUnreadBtn.parent().detach():this.$adminMenu.prepend(this.$markUnreadBtn.parent())},i.prototype.hideMarkReadBtn=function(e){return e?this.$markReadBtn.parent().detach():this.$adminMenu.prepend(this.$markReadBtn.parent())},i.prototype.hideForwardBtn=function(e){return e?this.$forwardBtn.parent().detach():this.$adminMenu.prepend(this.$forwardBtn.parent())},i.prototype.focusCompose=function(){return this.$composeBtn.focus()},i.prototype._toggleBtn=function(e,t){return t="undefined"==typeof t?!e.prop("disabled"):t,e.prop("disabled",t)},i.prototype.toggleSending=function(e){return this.$sendingMessage.toggle(e)},i}(c)})}.call(this),function(){define("compiled/object/unflatten",["underscore"],function(e){var t;return t=function(t){return e(t).reduce(function(t,n,o){var s,a,r,i;if(r=o.split("]["),i=r.length-1,/\[/.test(r[0])&&/\]$/.test(r[i])?(r[i]=r[i].replace(/\]$/,""),r=r.shift().split("[").concat(r),i=r.length-1):i=0,i)for(a=0,s=t;i>=a;)o=""===r[a]?s.length:r[a],s=s[o]=i>a?s[o]||(r[a+1]&&isNaN(r[a+1])?{}:[]):n,a++;else e.isArray(t[o])?t[o].push(n):t[o]=null!=t[o]?[t[o],n]:n;return t},{})}})}.call(this),function(){var e=[].slice;define("compiled/util/deparam",["compiled/object/unflatten"],function(t){var n,o;return n={"true":!0,"false":!1,"null":null},o=function(s,a){var r,i,c,l,u,d,p,h,m;if(!s||"boolean"==typeof s)return r=window.location.search.replace(/^\?/,""),r?o.apply(null,[r].concat(e.call(arguments))):{};for(c={},h=s.replace(/\+/g," ").split("&"),d=0,p=h.length;p>d;d++)l=h[d],m=l.split("="),i=m[0],u=m[1],i=decodeURIComponent(i),u=decodeURIComponent(u),a&&(u=u&&!isNaN(u)?+u:"undefined"===u?void 0:void 0!==n[u]?n[u]:u),c[i]=u;return t(c)}})}.call(this),function(){var e={}.hasOwnProperty,t=function(t,n){function o(){this.constructor=t}for(var s in n)e.call(n,s)&&(t[s]=n[s]);return o.prototype=n.prototype,t.prototype=new o,t.__super__=n.prototype,t};define("compiled/models/Course",["underscore","Backbone"],function(e,n){var o,s,a;return s=n.Model,o=function(n){function o(){return a=o.__super__.constructor.apply(this,arguments)}return t(o,n),o.prototype.modelType="course",o.prototype.resourceName="courses",o.prototype.toJSON=function(){return{course:e.omit(this.attributes,"id","calendar","enrollments","workflow_state")}},o}(s)})}.call(this),function(){var e={}.hasOwnProperty,t=function(t,n){function o(){this.constructor=t}for(var s in n)e.call(n,s)&&(t[s]=n[s]);return o.prototype=n.prototype,t.prototype=new o,t.__super__=n.prototype,t};define("compiled/collections/CourseCollection",["compiled/collections/PaginatedCollection","compiled/models/Course"],function(e){var n,o;return n=function(e){function n(){return o=n.__super__.constructor.apply(this,arguments)}return t(n,e),n.prototype.url="/api/v1/courses/",n.prototype.loadAll=!0,n.prototype.initialize=function(){return n.__super__.initialize.call(this),this.setParam("state",["unpublished","available","completed"]),this.setParam("include",["term"])},n}(e)})}.call(this),function(){var e={}.hasOwnProperty,t=function(t,n){function o(){this.constructor=t}for(var s in n)e.call(n,s)&&(t[s]=n[s]);return o.prototype=n.prototype,t.prototype=new o,t.__super__=n.prototype,t};define("compiled/collections/FavoriteCourseCollection",["compiled/collections/PaginatedCollection","compiled/models/Course"],function(e){var n,o;return n=function(e){function n(){return o=n.__super__.constructor.apply(this,arguments)}return t(n,e),n.prototype.url="/api/v1/users/self/favorites/courses/",n}(e)})}.call(this),define("translations/GroupUserCollection",["i18nObj","jquery"],function(e,t){t.extend(!0,e,{translations:{ar:{GroupUserCollection:{flash:{userAlreadyInGroup:"تحذير: %{user} هو عضو بالفعل في %{group}"}}},de:{GroupUserCollection:{flash:{userAlreadyInGroup:"ACHTUNG: %{user} ist bereits Mitglied von %{group}"}}},"en-AU":{GroupUserCollection:{flash:{userAlreadyInGroup:"WARNING: %{user} is already a member of %{group}"}}},"en-GB":{GroupUserCollection:{flash:{userAlreadyInGroup:"WARNING: %{user} is already a member of %{group}"}}},es:{GroupUserCollection:{flash:{userAlreadyInGroup:"AVISO: %{user} ya es miembro de %{group}"}}},"fa-IR":{GroupUserCollection:{flash:{userAlreadyInGroup:"هشدار: %{user} اکنون عضو %{group} است"}}},fr:{GroupUserCollection:{flash:{userAlreadyInGroup:"AVERTISSEMENT : %{user} est déjà un membre du groupe %{group}"}}},ja:{GroupUserCollection:{flash:{userAlreadyInGroup:"警告: %{user} は既に %{group} のメンバーです"}}},ko:{},nb:{GroupUserCollection:{flash:{userAlreadyInGroup:"ADVARSEL: %{user} er allerede medlem av %{group}"}}},nl:{GroupUserCollection:{flash:{userAlreadyInGroup:"WAARSCHUWING: %{gebruiker} is al lid van van %{group}"}}},pl:{GroupUserCollection:{flash:{userAlreadyInGroup:"OSTRZEŻENIE: użytkownik %{user} jest już członkiem grupy %{group}"}}},pt:{GroupUserCollection:{flash:{userAlreadyInGroup:"AVISO: %{user} já é um membro de %{group}"}}},"pt-BR":{GroupUserCollection:{flash:{userAlreadyInGroup:"AVISO: %{user} já é um membro de %{group}"}}},ru:{GroupUserCollection:{flash:{userAlreadyInGroup:"ПРЕДУПРЕЖДЕНИЕ. %{user} уже является членом %{group}"}}},tr:{GroupUserCollection:{flash:{userAlreadyInGroup:"UYARI: %{user}, zaten %{group}'ın bir üyesi"}}},zh:{GroupUserCollection:{flash:{userAlreadyInGroup:"警告: %{user} 已经是 %{group} 的成员"}}}}})}),define("translations/user",["i18nObj","jquery"],function(e,t){t.extend(!0,e,{translations:{ar:{user:{errors:{already_enrolled:"أنت مسجل بالفعل في هذا المساق",course_full:"هذا المساق مكتمل",invalid_code:"كود غير صالح",required:"مطلوب",terms:"يجب أن توافق على الشروط",too_long:"يتعذر تجاوز %{max} حرفًَا"}}},de:{user:{errors:{already_enrolled:"Sie sind bereits für diesen Kurs eingeschrieben",course_full:"Dieser Kurs ist voll belegt",invalid_code:"Ungültiger Code",required:"Erforderlich",terms:"Sie müssen den Bedingungen zustimmen",too_long:"Kann %{max} Zeichen nicht überschreiten"}}},"en-AU":{user:{errors:{already_enrolled:"You are already enrolled in this course",course_full:"This course is full",invalid_code:"Invalid code",required:"Required",terms:"You must agree to the terms",too_long:"Can't exceed %{max} characters"}}},"en-GB":{user:{errors:{already_enrolled:"You are already enrolled in this course",course_full:"This course is full",invalid_code:"Invalid code",required:"Required",terms:"You must agree to the terms",too_long:"Can't exceed %{max} characters"}}},es:{user:{errors:{already_enrolled:"Ya está matriculado en este curso",course_full:"Este curso está lleno",invalid_code:"Código inválido",required:"Obligatorio",terms:"Debe aceptar estos términos",too_long:"No puede exceder de %{max} caracteres"}}},"fa-IR":{user:{errors:{already_enrolled:"شما در حال حاضر در این درس ثبت نام شده اید",course_full:"ظرفیت این درس تکمیل شده است",invalid_code:"رمز معتبر نیست",required:"لازم",terms:"باید ضوابط را بپذیرید",too_long:"نمی تواند از %{max} نویسه فراتر رود"}}},fr:{user:{errors:{already_enrolled:"Vous êtes déjà inscrit à ce cours.",course_full:"Ce cours est complet.",invalid_code:"Code erroné",required:"Requis",terms:"Vous devez accepter les conditions.",too_long:"Ne doit pas dépasser %{max} caractères"}}},ja:{user:{errors:{already_enrolled:"このコースには既に登録されています",course_full:"このコースには空きがありません",invalid_code:"無効なコード",required:"必須",terms:"利用規約に同意する必要があります",too_long:"%{max} 文字以内にしてください"}}},ko:{user:{errors:{already_enrolled:"이 과목에 이미 등록함",course_full:"이 과목은 만원임",invalid_code:"유효하지 않은 코드",required:"필수",terms:"조건에 동의해야 합니다.",too_long:"%{max}글자를 초과할 수 없습니다."}}},nb:{user:{errors:{already_enrolled:"Du er allerede registrert på dette kurset",course_full:"Dette kurset er fulltegnet",invalid_code:"Ugyldig kode",required:"Obligatorisk",terms:"Du må si deg enig i vilkårene",too_long:"Kan ikke overstige %{max} tegn"}}},nl:{user:{errors:{already_enrolled:"Je bent al  voor deze cursus ingeschreven",course_full:"Deze cursus zit vol",invalid_code:"Ongeldige code",required:"Vereist",terms:"Je moet met de voorwaarden akkoord gaan",too_long:"Mag maximum aantal %{max} tekens niet overschrijden"}}},pl:{user:{errors:{already_enrolled:"Jesteś już zapisany/-a na ten kurs",course_full:"Ten kurs jest pełny",invalid_code:"Nieprawidłowy kod",required:"Wymagany",terms:"Musisz się zgodzić na warunki",too_long:"Nie możesz przekroczyć %{max} znaków"}}},pt:{user:{errors:{already_enrolled:"Já está inscrito nesta disciplina",course_full:"Esta disciplina está cheia",invalid_code:"Código inválido",required:"Necessário",terms:"Tem de aceitar os termos",too_long:"Não pode exceder %{max} caracteres"}}},"pt-BR":{user:{errors:{already_enrolled:"Você já está inscrito neste curso",course_full:"As vagas deste curso estão preenchidas",invalid_code:"Código inválido",required:"Obrigatório",terms:"Você deve concordar com os termos",too_long:"Não pode exceder %{max} caracteres"}}},ru:{user:{errors:{already_enrolled:"Вы уже зарегистрированы на данном курсе",course_full:"Группа для данного курса набрана",invalid_code:"Неверный код",required:"Требуется",terms:"Вы должны согласиться с условиями",too_long:"Не может превышать %{max} символов"}}},tr:{user:{errors:{already_enrolled:"Bu derse zaten kayıtlısınız",course_full:"Bu ders dolu",invalid_code:"Geçersiz kod",required:"Zorunlu",terms:"Şarları kabul etmelisiniz",too_long:"%{max} karakteri aşamazsınız"}}},zh:{user:{errors:{already_enrolled:"您已经登记此课程",course_full:"此课程名额已满",invalid_code:"无效的代码",required:"需要",terms:"您必须同意这些条款",too_long:"不能超过 %{max} 个字符"}}}}})
}),function(){var e={}.hasOwnProperty,t=function(t,n){function o(){this.constructor=t}for(var s in n)e.call(n,s)&&(t[s]=n[s]);return o.prototype=n.prototype,t.prototype=new o,t.__super__=n.prototype,t};define("compiled/models/User",["i18n!user","underscore","Backbone"],function(e,n,o){var s,a;return s=function(o){function s(){return a=s.__super__.constructor.apply(this,arguments)}return t(s,o),s.prototype.modelType="user",s.prototype.resourceName="users",s.prototype.errorMap={name:{blank:e.t("errors.required","Required"),too_long:e.t("errors.too_long","Can't exceed %{max} characters",{max:255})},self_enrollment_code:{blank:e.t("errors.required","Required"),invalid:e.t("errors.invalid_code","Invalid code"),already_enrolled:e.t("errors.already_enrolled","You are already enrolled in this course"),full:e.t("errors.course_full","This course is full")},terms_of_use:{accepted:e.t("errors.terms","You must agree to the terms")}},s.prototype.enrollments=function(e,t){return n.where(this.get("enrollments"),e,t)},s.prototype.hasEnrollmentType=function(e){return!!this.enrollments({type:e},!0)},s.prototype.hasEnrollmentRole=function(e){return!!this.enrollments({role:e},!0)},s.prototype.findEnrollmentByRole=function(e){return this.enrollments({role:e},!0)},s.prototype.allEnrollmentsByType=function(e){return this.enrollments({type:e})},s.prototype.allEnrollmentsByRole=function(e){return this.enrollments({role:e})},s.prototype.pending=function(e){return n.any(this.get("enrollments"),function(t){var n;return t.role===e&&("creation_pending"===(n=t.enrollment_state)||"invited"===n)})},s.prototype.sectionEditableEnrollments=function(){return n.select(this.get("enrollments"),function(e){return!n.include(["DesignerEnrollment","ObserverEnrollment"],e.type)})},s}(o.Model)})}.call(this),function(){var e=function(e,t){return function(){return e.apply(t,arguments)}},t={}.hasOwnProperty,n=function(e,n){function o(){this.constructor=e}for(var s in n)t.call(n,s)&&(e[s]=n[s]);return o.prototype=n.prototype,e.prototype=new o,e.__super__=n.prototype,e};define("compiled/models/GroupUser",["jquery","compiled/models/User","jquery.ajaxJSON"],function(t,o){var s,a;return s=function(o){function s(){return this.moved=e(this.moved,this),this.sync=e(this.sync,this),a=s.__super__.constructor.apply(this,arguments)}return n(s,o),s.prototype.sync=function(){var e,t;return e=this.get("group"),t=this.previous("group"),e!==t?(null!=e&&this.joinGroup(e),t&&(null==e||this.get("category").get("allows_multiple_memberships"))?this.leaveGroup(t):void 0):void 0},s.prototype.joinGroup=function(e){var n=this;return t.ajaxJSON("/api/v1/groups/"+e.id+"/memberships","POST",{user_id:this.get("id")},function(e){return n.trigger("ajaxJoinGroupSuccess",e)})},s.prototype.leaveGroup=function(e){return t.ajaxJSON("/api/v1/groups/"+e.id+"/users/"+this.get("id"),"DELETE")},s.prototype.moved=function(){return this.trigger("moved",this)},s}(o)})}.call(this),function(){var e=function(e,t){return function(){return e.apply(t,arguments)}},t={}.hasOwnProperty,n=function(e,n){function o(){this.constructor=e}for(var s in n)t.call(n,s)&&(e[s]=n[s]);return o.prototype=n.prototype,e.prototype=new o,e.__super__=n.prototype,e};define("compiled/collections/GroupUserCollection",["i18n!GroupUserCollection","jquery","compiled/collections/PaginatedCollection","compiled/models/GroupUser","str/htmlEscape"],function(t,o,s,a,r){var i,c;return i=function(s){function i(){return this.onChangeGroup=e(this.onChangeGroup,this),c=i.__super__.constructor.apply(this,arguments)}return n(i,s),i.prototype.comparator=function(e){return e.get("sortable_name").toLowerCase()},i.optionProperty("group"),i.optionProperty("category"),i.prototype.url=function(){return this.url="/api/v1/groups/"+this.group.id+"/users?per_page=50"},i.prototype.initialize=function(e){return i.__super__.initialize.apply(this,arguments),this.loaded=this.loadedAll=null!=e,this.on("change:group",this.onChangeGroup),this.model=a.extend({defaults:{group:this.group,category:this.category}})},i.prototype.load=function(e){return null==e&&(e="all"),this.loadAll="all"===e,this.loaded=!0,"none"!==e&&this.fetch(),this.load=function(){}},i.prototype.onChangeGroup=function(e,t){var n;return this.removeUser(e),null!=(n=this.groupUsersFor(t))?n.addUser(e):void 0},i.prototype.membershipsLocked=function(){return!1},i.prototype.addUser=function(e){var t,n=this;return this.membershipsLocked()?void(null!=(t=this.get(e))&&t.moved()):this.loaded?(this.get(e)?this.flashAlreadyInGroupError(e):(this.add(e),this.increment(1)),e.moved()):(e.once("ajaxJoinGroupSuccess",function(t){return t.just_created?void 0:(n.increment(-1),n.flashAlreadyInGroupError(e))}),this.increment(1))},i.prototype.flashAlreadyInGroupError=function(e){return o.flashError(t.t("flash.userAlreadyInGroup","WARNING: %{user} is already a member of %{group}",{user:r(e.get("name")),group:r(this.group.get("name"))}))},i.prototype.removeUser=function(e){var t,n;if(!this.membershipsLocked())return this.increment(-1),(null!=(t=this.group)&&null!=(n=t.get("leader"))?n.id:void 0)===e.id&&this.group.set("leader",null),this.loaded?this.remove(e):void 0},i.prototype.increment=function(e){return this.group.increment("members_count",e)},i.prototype.groupUsersFor=function(e){var t;return null!=(t=this.category)?t.groupUsersFor(e):void 0},i}(s)})}.call(this),function(){var e={}.hasOwnProperty,t=function(t,n){function o(){this.constructor=t}for(var s in n)e.call(n,s)&&(t[s]=n[s]);return o.prototype=n.prototype,t.prototype=new o,t.__super__=n.prototype,t};define("compiled/models/Group",["Backbone","compiled/collections/GroupUserCollection"],function(e,n){var o,s;return o=function(o){function a(){return s=a.__super__.constructor.apply(this,arguments)}return t(a,o),a.prototype.modelType="group",a.prototype.resourceName="groups",a.prototype.initialize=function(e,t){return a.__super__.initialize.apply(this,arguments),this.newAndEmpty=null!=t?t.newAndEmpty:void 0},a.prototype.users=function(){var e,t,o=this;return e=this.newAndEmpty?[]:null,this._users=new n(e,{group:this,category:null!=(t=this.collection)?t.category:void 0}),this._users.on("fetched:last",function(){return o.set("members_count",o._users.length)}),this.users=function(){return this._users},this._users},a.prototype.usersCount=function(){return this.get("members_count")},a.prototype.sync=function(t,n,o){return null==o&&(o={}),o.url=this.urlFor(t),e.sync(t,n,o)},a.prototype.urlFor=function(e){return"create"===e?"/api/v1/group_categories/"+this.get("group_category_id")+"/groups":"/api/v1/groups/"+this.id},a.prototype.theLimit=function(){var e,t,n;return e=this.get("max_membership"),e||(null!=(t=this.collection)&&null!=(n=t.category)?n.get("group_limit"):void 0)},a.prototype.isFull=function(){var e;return e=this.get("max_membership"),!e&&this.groupCategoryLimitMet()||e&&this.get("members_count")>=e},a.prototype.groupCategoryLimitMet=function(){var e,t,n;return e=null!=(t=this.collection)&&null!=(n=t.category)?n.get("group_limit"):void 0,e&&this.get("members_count")>=e},a.prototype.isLocked=function(){var e,t;return null!=(e=this.collection)&&null!=(t=e.category)?t.isLocked():void 0},a.prototype.toJSON=function(){var e;return ENV.student_mode?{name:this.get("name")}:(e=a.__super__.toJSON.apply(this,arguments),e.isFull=this.isFull(),e)},a}(e.Model)})}.call(this),function(){var e={}.hasOwnProperty,t=function(t,n){function o(){this.constructor=t}for(var s in n)e.call(n,s)&&(t[s]=n[s]);return o.prototype=n.prototype,t.prototype=new o,t.__super__=n.prototype,t};define("compiled/collections/GroupCollection",["compiled/collections/PaginatedCollection","compiled/collections/GroupUserCollection","compiled/models/Group"],function(e,n,o){var s,a;return s=function(e){function n(){return a=n.__super__.constructor.apply(this,arguments)}return t(n,e),n.prototype.model=o,n.prototype.comparator=function(e){return e.get("name").toLowerCase()},n.optionProperty("category"),n.optionProperty("loadAll"),n.prototype._defaultUrl=function(){return"/api/v1/users/self/groups"},n.prototype.url=function(){return this.url=null!=this.category?"/api/v1/group_categories/"+this.category.id+"/groups?per_page=50":n.__super__.url.apply(this,arguments)},n}(e)})}.call(this),function(){define("compiled/behaviors/unread_conversations",["jquery"],function(e){var t,n;return t=e("#identity .unread-messages-count"),n=function(){return document.hidden===!1?e.get("/api/v1/conversations/unread_count").done(function(e){return t.text(e.unread_count),t.toggle(e.unread_count>0)}):void 0},setInterval(n,3e4),n})}.call(this),function(){var e=function(e,t){return function(){return e.apply(t,arguments)}},t={}.hasOwnProperty,n=function(e,n){function o(){this.constructor=e}for(var s in n)t.call(n,s)&&(e[s]=n[s]);return o.prototype=n.prototype,e.prototype=new o,e.__super__=n.prototype,e};require(["i18n!conversations","jquery","underscore","Backbone","compiled/models/Message","compiled/collections/MessageCollection","compiled/views/conversations/MessageView","compiled/views/conversations/MessageListView","compiled/views/conversations/MessageDetailView","compiled/views/conversations/MessageFormDialog","compiled/views/conversations/InboxHeaderView","compiled/util/deparam","compiled/collections/CourseCollection","compiled/collections/FavoriteCourseCollection","compiled/collections/GroupCollection","compiled/behaviors/unread_conversations","jquery.disableWhileLoading"],function(t,o,s,a,r,i,c,l,u,d,p,h,m,_,g){var v,f;return v=function(a){function r(){return this.onKeyDown=e(this.onKeyDown,this),this.onSearch=e(this.onSearch,this),this.onNewConversations=e(this.onNewConversations,this),this.onAddMessage=e(this.onAddMessage,this),this.onSubmit=e(this.onSubmit,this),this._replyFromRemote=e(this._replyFromRemote,this),this.onCourse=e(this.onCourse,this),this.onFilter=e(this.onFilter,this),this.onStarToggle=e(this.onStarToggle,this),this.onForward=e(this.onForward,this),this.onMarkRead=e(this.onMarkRead,this),this.onMarkUnread=e(this.onMarkUnread,this),this.onCompose=e(this.onCompose,this),this.onDelete=e(this.onDelete,this),this.onArchive=e(this.onArchive,this),this.onReplyAll=e(this.onReplyAll,this),this.onReply=e(this.onReply,this),this.selectConversation=e(this.selectConversation,this),this.onSelected=e(this.onSelected,this),f=r.__super__.constructor.apply(this,arguments)}return n(r,a),r.prototype.routes={"":"index","filter=:state":"filter"},r.prototype.messages={confirmDelete:t.t("confirm.delete_conversation","Are you sure you want to delete your copy of this conversation? This action cannot be undone."),messageDeleted:t.t("message_deleted","Message Deleted!")},r.prototype.sendingCount=0,r.prototype.initialize=function(){var e;return e=this._initCollections(),this._initViews(),this._attachEvents(),this._isRemoteLaunch()?e.then(this._replyFromRemote):void 0},r.prototype.param=function(e){var t,n;return t=new RegExp(""+e+"=([^&]+)"),n=window.location.search.match(t),n?decodeURIComponent(n[1]):null},r.prototype.batchUpdate=function(e,t){var n,a=this;return null==t&&(t=o.noop),n=s.map(this.list.selectedMessages,function(e){return t.call(a,e),e.get("id")}),o.ajaxJSON("/api/v1/conversations","PUT",{"conversation_ids[]":n,event:e}),"destroy"===e&&(this.list.selectedMessages=[]),"archive"===e&&"sent"!==this.filters.type&&(this.list.selectedMessages=[]),"mark_as_read"===e&&"archived"===this.filters.type&&(this.list.selectedMessages=[]),"unstar"===e&&"starred"===this.filters.type&&(this.list.selectedMessages=[]),n},r.prototype.lastFetch=null,r.prototype.onSelected=function(e){var t;return this.lastFetch&&this.lastFetch.abort(),this.header.onModelChange(null,this.model),this.model=e,t=this.list.selectedMessages,0===t.length?(delete this.detail.model,this.detail.render()):t.length>1?(delete this.detail.model,this.detail.render({batch:!0}),this.header.onModelChange(t[0],null),this.header.toggleReplyBtn(!0),this.header.toggleReplyAllBtn(!0),this.header.hideForwardBtn(!0),void 0):(e=this.list.selectedMessage(),e.get("messages")?this.selectConversation(e):(this.lastFetch=e.fetch({data:{include_participant_contexts:!1,include_private_conversation_enrollments:!1},success:this.selectConversation}),this.detail.$el.disableWhileLoading(this.lastFetch)))},r.prototype.selectConversation=function(e){return this.header.onModelChange(e,null),this.detail.model=e,this.detail.render()},r.prototype.onReply=function(e){return this._delegateReply(e,"reply")},r.prototype.onReplyAll=function(e){return this._delegateReply(e,"replyAll")},r.prototype._delegateReply=function(e,t){var n,s;return n="reply"===t?"reply-btn":"reply-all-btn",s=o(e?".message-item-view[data-id="+e.id+"] ."+n:"#"+n),this.compose.show(this.detail.model,{to:t,trigger:s,message:e})},r.prototype.onArchive=function(){var e,t;return e="archived"===this.list.selectedMessage().get("workflow_state")?"mark_as_read":"archive",t=this.batchUpdate(e,function(t){var n;return n="mark_as_read"===e?"read":"archived",t.set("workflow_state",n),this.header.onArchivedStateChange(t)}),s.include(["inbox","archived"],this.filters.type)?(this.list.collection.remove(t),this.selectConversation(null)):void 0},r.prototype.onDelete=function(){var e;if(confirm(this.messages.confirmDelete))return e=this.batchUpdate("destroy"),delete this.detail.model,this.list.collection.remove(e),this.header.updateUi(null),o.flashMessage(this.messages.messageDeleted),this.detail.render()},r.prototype.onCompose=function(){return this.compose.show(null,{trigger:o("#compose-btn")})},r.prototype.index=function(){return this.filter("")},r.prototype.filter=function(e){var t;return t=this.filters=h(e),this.header.displayState(t),this.selectConversation(null),this.list.selectedMessages=[],this.list.collection.reset(),this.list.collection.setParam("scope",t.type),this.list.collection.setParam("filter",this._currentFilter()),this.list.collection.setParam("filter_mode","and"),this.list.collection.fetch(),this.compose.setDefaultCourse(t.course)},r.prototype.onMarkUnread=function(){return this.batchUpdate("mark_as_unread",function(e){return e.toggleReadState(!1)})},r.prototype.onMarkRead=function(){return this.batchUpdate("mark_as_read",function(e){return e.toggleReadState(!0)})},r.prototype.onForward=function(e){var t,n;return t=e?(t=this.detail.model.clone(),t.handleMessages(),t.set("messages",s.filter(t.get("messages"),function(t){return t.id===e.id||s.include(t.participating_user_ids,e.author_id)&&t.created_at<e.created_at})),n=o(".message-item-view[data-id="+e.id+"] .al-trigger"),t):(n=o("#admin-btn"),this.detail.model),this.compose.show(t,{to:"forward",trigger:n})},r.prototype.onStarToggle=function(){var e,t;return e=this.list.selectedMessage().get("starred")?"unstar":"star",t=this.batchUpdate(e,function(t){return t.toggleStarred("star"===e)}),"starred"===this.filters.type?("unstar"===e&&this.selectConversation(null),this.list.collection.remove(t)):void 0},r.prototype.onFilter=function(e){return this.navigate("filter="+o.param(e),{trigger:!0})},r.prototype.onCourse=function(e){return this.list.updateCourse(e)},r.prototype._isRemoteLaunch=function(){return!!window.location.search.match(/user_id/)},r.prototype._replyFromRemote=function(){return this.compose.show(null,{user:{id:this.param("user_id"),name:this.param("user_name")},context:this.param("context_id"),remoteLaunch:!0})},r.prototype._initCollections=function(){return this.courses={favorites:new _,all:new m,groups:new g},this.courses.favorites.fetch()},r.prototype._initViews=function(){return this._initListView(),this._initDetailView(),this._initHeaderView(),this._initComposeDialog()},r.prototype._attachEvents=function(){return this.list.collection.on("change:selected",this.onSelected),this.header.on("compose",this.onCompose),this.header.on("reply",this.onReply),this.header.on("reply-all",this.onReplyAll),this.header.on("archive",this.onArchive),this.header.on("delete",this.onDelete),this.header.on("filter",this.onFilter),this.header.on("course",this.onCourse),this.header.on("mark-unread",this.onMarkUnread),this.header.on("mark-read",this.onMarkRead),this.header.on("forward",this.onForward),this.header.on("star-toggle",this.onStarToggle),this.header.on("search",this.onSearch),this.compose.on("close",this.onCloseCompose),this.compose.on("addMessage",this.onAddMessage),this.compose.on("addMessage",this.list.updateMessage),this.compose.on("newConversations",this.onNewConversations),this.compose.on("submitting",this.onSubmit),this.detail.on("reply",this.onReply),this.detail.on("reply-all",this.onReplyAll),this.detail.on("forward",this.onForward),o(document).ready(this.onPageLoad),o(window).keydown(this.onKeyDown)},r.prototype.onPageLoad=function(){return o("#main").css({display:"block",top:o("#header").height()})},r.prototype.onSubmit=function(){return this._incrementSending(1)},r.prototype.onAddMessage=function(e,t){var n;return this._incrementSending(-1),n=this.list.collection.get(t.id),null!=n&&n.get("messages")&&(e.context_name=n.messageCollection.last().get("context_name"),n.get("messages").unshift(e),n.trigger("change:messages"),n===this.detail.model)?this.detail.render():void 0},r.prototype.onNewConversations=function(){return this._incrementSending(-1)},r.prototype._incrementSending=function(e){return this.sendingCount+=e,this.header.toggleSending(this.sendingCount>0)},r.prototype._currentFilter=function(){var e;return e=this.searchTokens||[],this.filters.course&&(e=e.concat(this.filters.course)),e},r.prototype.onSearch=function(e){return this.list.collection.reset(),this.searchTokens=e.length?e:null,this.list.collection.setParam("filter",this._currentFilter()),delete this.detail.model,this.list.selectedMessages=[],this.detail.render(),this.list.collection.fetch()},r.prototype._initListView=function(){return this.list=new l({collection:new i,el:o(".message-list"),scrollContainer:o(".message-list-scroller"),buffer:50}),this.list.render()},r.prototype._initDetailView=function(){return this.detail=new u({el:o(".message-detail")}),this.detail.render()},r.prototype._initHeaderView=function(){return this.header=new p({el:o("header.panel"),courses:this.courses}),this.header.render()},r.prototype._initComposeDialog=function(){return this.compose=new d({courses:this.courses,folderId:ENV.CONVERSATIONS.ATTACHMENTS_FOLDER_ID,account_context_code:ENV.CONVERSATIONS.ACCOUNT_CONTEXT_CODE})},r.prototype.onKeyDown=function(e){var t,n;n=e.target.nodeName.toLowerCase(),"input"!==n&&"textarea"!==n&&(t=e.ctrlKey||e.metaKey,65===e.which&&t&&(e.preventDefault(),this.list.selectAll()))},r}(a.Router),window.conversationsRouter=new v,a.history.start()})}.call(this),define("compiled/bundles/conversations_new",function(){});