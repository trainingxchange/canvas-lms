(function(){require(["jquery","i18n!external_content.success","jquery.ajaxJSON","jquery.instructure_misc_helpers"],function(e,t){var r,n,o,a,i;for(o=function(n){return a[r]&&a[r].ready?(a.$(a).trigger("externalContentReady",n),a[r].ready(n),setTimeout(function(){return e("#dialog_message").text("external_tool_dialog"===r?t.t("popup_success","Success! This popup should close on its own..."):"")},1e3)):e("#dialog_message").text(t.t("content_failure","Content retrieval failed, please try again or notify your system administrator of the error."))},n=ENV.retrieved_data,r=ENV.service,a=window.parent;a&&a.parent!==a&&!a[r];)a=a.parent;return"oembed"===n.return_type?(i=e.replaceTags(e.replaceTags(e("#oembed_retrieve_url").attr("href"),"endpoint",encodeURIComponent(n.endpoint)),"url",encodeURIComponent(n.url)),e.ajaxJSON(i,"GET",{},function(e){return o(e)},function(){return e("#dialog_message").text(t.t("oembed_failure","Content retrieval failed, please try again or notify your system administrator of the error."))})):o(n)})}).call(this);