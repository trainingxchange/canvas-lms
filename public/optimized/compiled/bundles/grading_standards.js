(function(){define("compiled/util/round",[],function(){var a;return a=function(a,e){var n;return null==e&&(e=0),"number"==typeof a||a instanceof Number||(a=parseFloat(a)),n=Math.pow(10,e),Math.round(a*n)/n},a.DEFAULT=2,a})}).call(this),define("translations/grading_standards",["i18nObj","jquery"],function(a,e){e.extend(!0,a,{translations:{ar:{grading_standards:{buttons:{save:"حفظ"},confirm:{delete_grading_scheme:"هل ترغب بالتأكيد في حذف نظام تقييم الدرجات هذا؟",unlink_grading_scheme:"هل ترغب بالتأكيد في إلغاء ارتباط نظام تقييم الدرجات هذا؟"},errors:{cannot_delete_grading_scheme:"توجد مشكلة في حذف نظام تقييم الدرجات هذا",cannot_load_grading_standards:"فشل تحميل معايير تقييم الدرجات.  الرجاء إعادة المحاولة مرة أخرى",cannot_remove_grading_scheme:"توجد مشكلة في إزالة نظام تقييم الدرجات هذا.  الرجاء إعادة تحميل الصفحة والمحاولة مرة أخرى.",save_failed:"فشل الحفظ"},grading_scheme_currently_set:"تم التعيين حاليًا",grading_scheme_not_set:"غير معيّن",no_grading_standards:"لم يتم العثور على معايير تقييم درجات",status:{loading_grading_standards:"جارٍ تحميل معايير تقييم الدرجات...",saving:"جارٍ الحفظ..."},titles:{grading_scheme_info:"عرض/تحرير نظام تقييم الدرجات"}}},de:{grading_standards:{buttons:{save:"Speichern"},confirm:{delete_grading_scheme:"Möchten Sie dieses Benotungssystem wirklich löschen?",unlink_grading_scheme:"Möchten Sie diese Verknüpfung dieses Benotungssystems wirklich entfernen?"},errors:{cannot_delete_grading_scheme:"Beim Löschen dieses Benotungssystems ist ein Problem aufgetreten.",cannot_load_grading_standards:"Der Ladevorgang der Benotungskriterien ist fehlgeschlagen.  Versuchen Sie es erneut",cannot_remove_grading_scheme:"Beim Entfernen dieses Benotungssystems ist ein Problem aufgetreten.  Bitte laden Sie die Seite erneut und versuchen Sie es ein weiteres Mal.",save_failed:"Speichern fehlgeschlagen"},grading_scheme_currently_set:"Zurzeit definiert",grading_scheme_not_set:"Nicht definiert",no_grading_standards:"Es wurden keine Benotungskriterien gefunden",status:{loading_grading_standards:"Benotungskriterien werden geladen...",saving:"Speichervorgang läuft..."},titles:{grading_scheme_info:"Benotungssystem anzeigen/bearbeiten"}}},"en-AU":{grading_standards:{buttons:{save:"Save"},confirm:{delete_grading_scheme:"Are you sure you want to delete this grading scheme?",unlink_grading_scheme:"Are you sure you want to unlink this grading scheme?"},errors:{cannot_delete_grading_scheme:"There was a problem deleting this grading scheme",cannot_load_grading_standards:"Loading Grading Standards Failed.  Please Try Again",cannot_remove_grading_scheme:"There was a problem removing this grading scheme.  Please reload the page and try again.",save_failed:"Save Failed"},grading_scheme_currently_set:"Currently Set",grading_scheme_not_set:"Not Set",no_grading_standards:"No grading standards found",status:{loading_grading_standards:"Loading Grading Standards...",saving:"Saving..."},titles:{grading_scheme_info:"View/Edit Grading Scheme"}}},"en-GB":{grading_standards:{buttons:{save:"Save"},confirm:{delete_grading_scheme:"Are you sure you want to delete this grading scheme?",unlink_grading_scheme:"Are you sure you want to unlink this grading scheme?"},errors:{cannot_delete_grading_scheme:"There was a problem deleting this grading scheme",cannot_load_grading_standards:"Loading grading standards failed.  Please try again",cannot_remove_grading_scheme:"There was a problem removing this grading scheme.  Please reload the page and try again.",save_failed:"Save failed"},grading_scheme_currently_set:"Currently set",grading_scheme_not_set:"Not set",no_grading_standards:"No grading standards found",status:{loading_grading_standards:"Loading grading standards...",saving:"Saving..."},titles:{grading_scheme_info:"View/edit grading scheme"}}},es:{grading_standards:{buttons:{save:"Guardar"},confirm:{delete_grading_scheme:"¿Seguro que quiere borrar este esquema de calificación?",unlink_grading_scheme:"¿Seguro que quiere desenlazar este esquema de calificación?"},errors:{cannot_delete_grading_scheme:"Hubo un problema borrando este esquema de calificación",cannot_load_grading_standards:"Falló la Carga de Estandares de Calificación. Intente de Nuevo.",cannot_remove_grading_scheme:"Hubo un problema removiendo este esquema de calificación. Por favor recargue la página e intente de nuevo.",save_failed:"Guardado Falló"},grading_scheme_currently_set:"Establecido Actualmente",grading_scheme_not_set:"No Establecido",no_grading_standards:"No se encontraron estandares de calificación",status:{loading_grading_standards:"Cargando los Estandares de Calificación...",saving:"Guardando..."},titles:{grading_scheme_info:"Ver/Editar Esquema de Calificación"}}},"fa-IR":{grading_standards:{buttons:{save:"ذخیره سازی"},confirm:{delete_grading_scheme:"مطمئنید که می خواهید این طرح نمره گذاری حذف شود؟",unlink_grading_scheme:"مطمئنید که می خواهید پیوند این طرح نمره گذاری را لغو کنید؟"},errors:{cannot_delete_grading_scheme:"در هنگام حذف این طرح نمره گذاری اشکالی رخ داد",cannot_load_grading_standards:"بارگذاری استانداردهای نمره گذاری انجام نشد. لطفا دوباره سعی کنید",cannot_remove_grading_scheme:"در هنگام حذف این طرح نمره گذاری اشکالی رخ داد. لطفا صفحه را دوباره بارگذاری کنید و دوباره سعی کنید.",save_failed:"ذخیره سازی انجام نشد"},grading_scheme_currently_set:"اخیرا تعیین شده",grading_scheme_not_set:"تعیین نشده",no_grading_standards:"استاندارد نمره گذاری موجود نیست",status:{loading_grading_standards:"در حال بارگذاری استانداردهای نمره گذاری...",saving:"در حال ذخیره سازی..."},titles:{grading_scheme_info:"مشاهده/ویرایش طرح نمره گذاری"}}},fr:{grading_standards:{buttons:{save:"Enregistrer"},confirm:{delete_grading_scheme:"Voulez-vous vraiment supprimer ce système de notation ?",unlink_grading_scheme:"Voulez-vous vraiment annuler le lien de ce système de notation ?"},errors:{cannot_delete_grading_scheme:"Une erreur s’est produite lors de la suppression de ce système de notation",cannot_load_grading_standards:"Échec du chargement des critères de notation. Veuillez réessayer.",cannot_remove_grading_scheme:"Une erreur s’est produite lors de la suppression de ce système de notation. Veuillez recharger la page et réessayer.",save_failed:"L’enregistrement a échoué."},grading_scheme_currently_set:"Actuellement défini",grading_scheme_not_set:"Non défini",no_grading_standards:"Aucun critère de notation trouvé",status:{loading_grading_standards:"Chargement des critères de notation...",saving:"Enregistrement en cours..."},titles:{grading_scheme_info:"Afficher/Modifier le système de notation"}}},ja:{grading_standards:{buttons:{save:"保存"},confirm:{delete_grading_scheme:"この採点スキームを削除してもよろしいですか?",unlink_grading_scheme:"この採点スキームへのリンクを解除してもよろしいですか?"},errors:{cannot_delete_grading_scheme:"この採点スキームを削除する際に問題が発生しました",cannot_load_grading_standards:"採点基準の読み込みに失敗しました。もう一度、試してください。",cannot_remove_grading_scheme:"この採点スキームを削除する際に問題が発生しました。ページを再読み込みしてから、もう一度試してください。",save_failed:"保存に失敗しました"},grading_scheme_currently_set:"現在設定されています",grading_scheme_not_set:"設定されていません",no_grading_standards:"採点基準が見つかりません",status:{loading_grading_standards:"採点基準を読み込んでいます...",saving:"保存しています..."},titles:{grading_scheme_info:"採点スキームの表示/編集"}}},ko:{grading_standards:{buttons:{save:"저장"},confirm:{delete_grading_scheme:"이 평가 구성표를 삭제하시겠습니까?",unlink_grading_scheme:"이 평가 구성표를 연결 해제하시겠습니까?"},errors:{cannot_delete_grading_scheme:"평가 구성표 삭제 중 문제 발생",cannot_load_grading_standards:"평가 기준을 로드하는 데 실패했습니다. 다시 시도하시기 바랍니다.",cannot_remove_grading_scheme:"이 평가 구성표를 제거하는 데 문제가 발생했습니다. 페이지를 새로 고치고 다시 시도하시기 바랍니다.",save_failed:"저장 실패"},grading_scheme_currently_set:"설정됨",grading_scheme_not_set:"설정 안 됨",no_grading_standards:"평가 기준을 찾을 수 없음",status:{loading_grading_standards:"평가 기준을 로드하는 중...",saving:"저장 중..."},titles:{grading_scheme_info:"평가 구성표 보기/편집"}}},nb:{grading_standards:{buttons:{save:"Lagre"},confirm:{delete_grading_scheme:"Er du sikker på at du vil slette denne karaktersettingsplanen?",unlink_grading_scheme:"Er du sikker på at du vil koble fra denne karaktersettingsplanen?"},errors:{cannot_delete_grading_scheme:"Det oppsto et problem ved forsøk på å slette denne karaktersettingsplanen",cannot_load_grading_standards:"Lasting av retningslinjer for karakterer feilet. Vennligst prøv igjen",cannot_remove_grading_scheme:"Det oppsto et problem ved forsøk på å fjerne denne karaktersettingsplanen. Vennligst last siden på nytt og forsøk igjen.",save_failed:"Lagring mislyktes"},grading_scheme_currently_set:"Gjeldende innstilling",grading_scheme_not_set:"Ikke satt",no_grading_standards:"Ingen retningslinjer for karaktersetting ble funnet",status:{loading_grading_standards:"Laster retningslinjer for karaktersetting...",saving:"Lagrer..."},titles:{grading_scheme_info:"Se/rediger karaktersettingsplan"}}},nl:{grading_standards:{buttons:{save:"Opslaan"},confirm:{delete_grading_scheme:"Weet je zeker dat je dit beoordelingsschema wilt verwijderen?",unlink_grading_scheme:"Weet je zeker dat je dit beoordelingsschema wilt ontkoppelen?"},errors:{cannot_delete_grading_scheme:"Er is een probleem opgetreden tijdens het verwijderen van dit beoordelingsschema",cannot_load_grading_standards:"Laden van beoordelingsnormen mislukt. Probeer het opnieuw",cannot_remove_grading_scheme:"Er is een probleem opgetreden tijdens het verwijderen van dit beoordelingsschema. Herlaad de pagina en probeer het opnieuw.",save_failed:"Opslaan mislukt"},grading_scheme_currently_set:"Momenteel ingesteld",grading_scheme_not_set:"Niet ingesteld",no_grading_standards:"Geen beoordelingsnormen gevonden",status:{loading_grading_standards:"Bezig met laden van beoordelingsnormen",saving:"Bezig met opslaan..."},titles:{grading_scheme_info:"Beoordelingsschema bekijken/bewerken"}}},pl:{grading_standards:{buttons:{save:"Zapisz"},confirm:{delete_grading_scheme:"Czy na pewno chcesz usunąć ten schemat oceniania?",unlink_grading_scheme:"Czy na pewno chcesz usunąć łącze dla tego schematu oceniania?"},errors:{cannot_delete_grading_scheme:"Wystąpił problem podczas usuwania tego schematu oceniania",cannot_load_grading_standards:"Ładowanie standardów oceniania nie powiodło się.  Spróbuj ponownie",cannot_remove_grading_scheme:"Wystąpił problem podczas usuwania tego schematu oceniania.  Ponownie załaduj stronę i spróbuj jeszcze raz.",save_failed:"Zapisywanie nie powiodło się"},grading_scheme_currently_set:"Bieżące ustawienie",grading_scheme_not_set:"Nieustawione",no_grading_standards:"Nie znaleziono żadnych standardów oceniania",status:{loading_grading_standards:"Trwa ładowanie standardów oceniania...",saving:"Trwa zapisywanie..."},titles:{grading_scheme_info:"Pokaż/edytuj schemat oceniania"}}},pt:{grading_standards:{buttons:{save:"Guardar"},confirm:{delete_grading_scheme:"Tem certeza de que deseja excluir este esquema de avaliação?",unlink_grading_scheme:"Tem certeza de que deseja desvincular este esquema de avaliação?"},errors:{cannot_delete_grading_scheme:"Houve um problema com a exclusão deste esquema de avaliação.",cannot_load_grading_standards:"Falha no carregamento dos padrões de avaliação.  Tente novamente",cannot_remove_grading_scheme:"Houve um problema com a remoção deste esquema de avaliação.  Carregue novamente a página e tente novamente.",save_failed:"Falha ao guardar"},grading_scheme_currently_set:"Atualmente definido",grading_scheme_not_set:"Não definido",no_grading_standards:"Nenhum padrão de avaliação encontrado",status:{loading_grading_standards:"Carregando padrões de avaliação...",saving:"A guardar..."},titles:{grading_scheme_info:"Exibir/Editar esquema de avaliação"}}},"pt-BR":{grading_standards:{buttons:{save:"Salvar"},confirm:{delete_grading_scheme:"Tem certeza de que deseja excluir este esquema de avaliação?",unlink_grading_scheme:"Tem certeza de que deseja desvincular este esquema de avaliação?"},errors:{cannot_delete_grading_scheme:"Houve um problema com a exclusão deste esquema de avaliação.",cannot_load_grading_standards:"Falha no carregamento dos padrões de avaliação.  Tente novamente",cannot_remove_grading_scheme:"Houve um problema com a remoção deste esquema de avaliação.  Carregue novamente a página e tente novamente.",save_failed:"Falha ao salvar"},grading_scheme_currently_set:"Atualmente definido",grading_scheme_not_set:"Não definido",no_grading_standards:"Nenhum padrão de avaliação encontrado",status:{loading_grading_standards:"Carregando padrões de avaliação...",saving:"Salvando..."},titles:{grading_scheme_info:"Exibir/Editar esquema de avaliação"}}},ru:{grading_standards:{buttons:{save:"Сохранить"},confirm:{delete_grading_scheme:"Действительно хотите удалить эту схему оценки?",unlink_grading_scheme:"Действительно хотите отключить эту схему оценки?"},errors:{cannot_delete_grading_scheme:"При удалении этой схемы оценки возникла проблема",cannot_load_grading_standards:"Ошибка загрузки стандартов оценок.  Повторите попытку",cannot_remove_grading_scheme:"При удалении этой схемы оценки возникла проблема  Перезагрузите страницу и повторите попытку.",save_failed:"Ошибка сохранения"},grading_scheme_currently_set:"В настоящий момент установлено",grading_scheme_not_set:"Не установлено",no_grading_standards:"Стандарты оценок не найдены",status:{loading_grading_standards:"Загрузка стандартов оценок...",saving:"Сохранение..."},titles:{grading_scheme_info:"Просмотр/редактирование схемы оценок"}}},tr:{grading_standards:{buttons:{save:"Kaydet"},confirm:{delete_grading_scheme:"Bu notlandırma şemasını silmek istediğinize emin misiniz?",unlink_grading_scheme:"Bu notlandırma şemasının bağlantısını kaldırmak istediğinize emin misiniz?"},errors:{cannot_delete_grading_scheme:"Bu notlandırma şemasını silmede problem oldu",cannot_load_grading_standards:"Notlandırma Standartlarını Yükleme Başarısız. Lütfen Tekrar Deneyin",cannot_remove_grading_scheme:"Bu notlandırma şemasını kaldırmada problem oluştu. Lütfen sayayı yenileyip tekrar deneyin.",save_failed:"Kaydetme Başrısız"},grading_scheme_currently_set:"Şu Anda Ayarlı Olan",grading_scheme_not_set:"Ayarlanmadı",no_grading_standards:"Notlandırma standardı bulunamadı",status:{loading_grading_standards:"Notlandırma Standartları Yükleniyor...",saving:"Kaydediliyor..."},titles:{grading_scheme_info:"Notlandırma Şemasını Göster/Düzenle"}}},zh:{grading_standards:{buttons:{save:"保存"},confirm:{delete_grading_scheme:"是否确定要删除此评分方案?",unlink_grading_scheme:"是否确定要解链此评分方案?"},errors:{cannot_delete_grading_scheme:"删除此评分方案时出错",cannot_load_grading_standards:"加载评分标准失败。请重试",cannot_remove_grading_scheme:"删除此评分方案时出错。请重新加载页面，然后重试。",save_failed:"保存失败"},grading_scheme_currently_set:"现已设置",grading_scheme_not_set:"未设置",no_grading_standards:"找不到评分标准",status:{loading_grading_standards:"正在加载评分标准...",saving:"正在保存..."},titles:{grading_scheme_info:"查看/编辑评分方案"}}}}})}),define("grading_standards",["compiled/util/round","i18n!grading_standards","jquery","jquery.ajaxJSON","jquery.instructure_forms","jqueryui/dialog","jquery.instructure_misc_plugins","compiled/jquery.rails_flash_notifications","jquery.templateData","vendor/jquery.scrollTo"],function(a,e,n){n(document).ready(function(){n(".add_standard_link").click(function(a){a.preventDefault();var e=n("#grading_standard_blank").clone(!0).attr("id","grading_standard_new");n("#standards").append(e.show()),e.find(".edit_grading_standard_link").click()}),n(".edit_letter_grades_link").click(function(a){a.preventDefault(),n("#edit_letter_grades_form").dialog({title:e.t("titles.grading_scheme_info","View/Edit Grading Scheme"),width:600,height:310,dialogClass:"form-inline",resizable:!1,close:function(){n(a.target).focus()}})}),n(".grading_standard .delete_grading_standard_link").click(function(a){a.preventDefault();var d=n(this).parents(".grading_standard"),r=d.find(".update_grading_standard_url").attr("href");d.confirmDelete({url:r,message:e.t("confirm.delete_grading_scheme","Are you sure you want to delete this grading scheme?"),success:function(){n(this).slideUp(function(){n(this).remove()})},error:function(){n.flashError(e.t("errors.cannot_delete_grading_scheme","There was a problem deleting this grading scheme"))}})}),n(".grading_standard .done_button").click(function(a){a.preventDefault(),n("#edit_letter_grades_form").dialog("close")}),n(".grading_standard .remove_grading_standard_link").click(function(a){function d(){n("#edit_assignment_form .grading_standard_id").val(""),n("#assignment_grading_type").val("points").change(),n("#course_grading_standard_enabled").attr("checked",!1).change(),n("#course_form .grading_scheme_set").text(e.t("grading_scheme_not_set","Not Set")),t.addClass("editing"),t.find(".update_grading_standard_url").attr("href",n("#update_grading_standard_url").attr("href"));var a=n.parseJSON(n("#default_grading_standard_data").val()),d={title:"",id:null,data:a};t.fillTemplateData({data:d,id:"grading_standard_blank",avoid:".find_grading_standard",hrefValues:["id"]}).find(".edit_grading_standard_link").removeClass("read_only"),t.triggerHandler("grading_standard_updated",d),n("#edit_letter_grades_form").dialog("close"),t.undim()}a.preventDefault();var r=confirm(e.t("confirm.unlink_grading_scheme","Are you sure you want to unlink this grading scheme?"));if(!r)return!1;var t=n(this).parents(".grading_standard");t.dim();var s={"assignment[grading_standard_id]":"","assignment[grading_type]":"points"},i=n("#edit_assignment_form").attr("action");n("#update_course_url").length?(s={"course[grading_standard_id]":""},i=n("#update_course_url").attr("href")):i&&i.match(/assignments$/)&&(i=null),i?n.ajaxJSON(i,"PUT",s,d,function(){n.flashError(e.t("errors.cannot_remove_grading_scheme","There was a problem removing this grading scheme.  Please reload the page and try again."))}):d()}),n(".grading_standard .edit_grading_standard_link").click(function(a){a.preventDefault();var e=n(this).parents(".grading_standard");e.addClass("editing"),e.find(".max_score_cell").attr("tabindex","0"),n(this).hasClass("read_only")&&e.attr("id","grading_standard_blank"),e.find(".grading_standard_row").each(function(){var a=n(this).getTemplateData({textValues:["min_score","name"]});n(this).find(".standard_value").val(a.min_score).end().find(".standard_name").val(a.name)}),n("#standards").ifExists(function(){n("html,body").scrollTo(e)}),e.find(":text:first").blur().focus().select()}),n(".grading_standard .grading_standard_brief").find(".collapse_data_link,.expand_data_link").click(function(a){a.preventDefault();var e=n(this).parents(".grading_standard_brief");e.find(".collapse_data_link,.expand_data_link").toggle(),e.find(".details").slideToggle()}),n(".grading_standard_select").live("click",function(a){a.preventDefault();var e=n(this).getTemplateData({textValues:["id"]}).id;n(".grading_standard .grading_standards_select .grading_standard_select").removeClass("selected_side_tab"),n(this).addClass("selected_side_tab"),n(".grading_standard .grading_standards .grading_standard_brief").hide(),n("#grading_standard_brief_"+e).show()}),n(".grading_standard").find(".find_grading_standard_link,.cancel_find_grading_standard_link").click(function(a){a.preventDefault(),n(this).parents(".grading_standard").find(".display_grading_standard,.find_grading_standard").toggle();var d=n(this).parents(".grading_standard").find(".find_grading_standard:visible");if(d.length>0&&!d.hasClass("loaded")){d.find(".loading_message").text(e.t("status.loading_grading_standards","Loading Grading Standards..."));var r=d.find(".grading_standards_url").attr("href");n.ajaxJSON(r,"GET",{},function(a){if(0===a.length)d.find(".loading_message").text(e.t("no_grading_standards","No grading standards found"));else{d.find(".loading_message").remove();for(var n in a){var r=a[n].grading_standard;r.user_name=r.display_name;var t=d.find(".grading_standards_select .grading_standard_select.blank:first").clone(!0);t.fillTemplateData({data:r}).data("context_code",r.context_code).removeClass("blank"),d.find(".grading_standards_select").append(t.show());var s=d.find(".grading_standard_brief.blank:first").clone(!0);s.fillTemplateData({data:r,id:"grading_standard_brief_"+r.id}).data("context_code",r.context_code),s.removeClass("blank");for(var i=0;i<r.data.length;i++){var g=r.data[i],_={name:g[0],value:0==i?100:"< "+100*r.data[i-1][1],next_value:100*g[1]},o=s.find(".details_row.blank:first").clone(!0);o.removeClass("blank"),o.fillTemplateData({data:_}),s.find(".details > table").append(o.show())}d.find(".grading_standards").append(s)}d.find(".grading_standards_select .grading_standard_select:visible:first a:first").click()}d.addClass("loaded"),d.find(".grading_standards_holder").slideDown()},function(){d.find(".loading_message").text(e.t("errors.cannot_load_grading_standards","Loading Grading Standards Failed.  Please Try Again"))})}}),n(".grading_standard .grading_standard_brief .select_grading_standard_link").click(function(a){a.preventDefault();var e=n(this).parents(".grading_standard_brief"),d=e.getTemplateData({textValues:["id","title"],dataValues:["context_code"]}),r=d.id,t=d.title,s=[];n(this).parents(".grading_standard_brief").find(".details_row:not(.blank)").each(function(){var a=n(this).find(".name").text(),e=parseFloat(n(this).find(".next_value").text())/100;isNaN(e)&&(e=""),s.push([a,e])}),n(this).parents(".grading_standard").triggerHandler("grading_standard_updated",{id:r,data:s,title:t});var i=n("#edit_letter_grades_form").data().context_code;n(this).parents(".grading_standard").find(".edit_grading_standard_link").toggleClass("read_only",i!=d.context_code),n(this).parents(".find_grading_standard").find(".cancel_find_grading_standard_link").click()}),n(".grading_standard .cancel_button").click(function(){n(this).parents(".grading_standard").removeClass("editing").find(".insert_grading_standard").hide();var a=n(this).parents(".grading_standard");a.find(".max_score_cell").removeAttr("tabindex"),a.find(".to_add").remove(),a.find(".to_delete").removeClass("to_delete").show(),"grading_standard_new"==a.attr("id")&&a.remove()}),n(".grading_standard").bind("grading_standard_updated",function(d,r){var t=n(this);t.addClass("editing"),t.find(".update_grading_standard_url").attr("href",n("#update_grading_standard_url").attr("href")),t.fillTemplateData({data:r,id:"grading_standard_"+(r.id||"blank"),avoid:".find_grading_standard",hrefValues:["id"]}).fillFormData(r,{object_name:"grading_standard"});var s=t.find(".insert_grading_standard:first").clone(!0),i=t.find(".grading_standard_row:first").clone(!0).removeClass("blank"),g=t.find(".grading_standard_data");g.empty(),g.append(s.clone(!0).show());for(var _ in r.data){var o=i.clone(!0),l=r.data[_];o.removeClass("to_delete").removeClass("to_add"),o.find(".standard_name").val(l[0]).attr("name","grading_standard[standard_data][scheme_"+_+"][name]").end().find(".standard_value").val(a(100*l[1],2)).attr("name","grading_standard[standard_data][scheme_"+_+"][value]"),g.append(o.show()),g.append(s.clone(!0).show())}if(g.find(":text:first").blur(),g.append(i.hide()),g.append(s.hide()),t.find(".grading_standard_row").each(function(){n(this).find(".name").text(n(this).find(".standard_name").val()).end().find(".min_score").text(n(this).find(".standard_value").val()).end().find(".max_score").text(n(this).find(".edit_max_score").text())}),t.removeClass("editing"),t.find(".insert_grading_standard").hide(),r.id){t.find(".remove_grading_standard_link").removeClass("read_only");var c={"assignment[grading_standard_id]":r.id,"assignment[grading_type]":"letter_grade"},m=n("#edit_assignment_form").attr("action");n("input.grading_standard_id, ").val(r.id),n("#update_course_url").length?(c={"course[grading_standard_id]":r.id},m=n("#update_course_url").attr("href")):m&&m.match(/assignments$/)&&(m=null),m&&n.ajaxJSON(m,"PUT",c,function(a){n("#course_form .grading_scheme_set").text(a&&a.course&&a.course.grading_standard_title||e.t("grading_scheme_currently_set","Currently Set"))},function(){})}else t.find(".remove_grading_standard_link").addClass("read_only")}),n(".grading_standard .save_button").click(function(){var a=n(this).parents(".grading_standard"),d=n("#edit_letter_grades_form .create_grading_standard_url,#create_grading_standard_url").attr("href"),r="POST";"grading_standard_blank"!=a.attr("id")&&"grading_standard_new"!=a.attr("id")&&(d=n(this).parents(".grading_standard").find(".update_grading_standard_url").attr("href"),r="PUT");var t=a.find(".standard_title,.grading_standard_row:visible").getFormData();a.find("button").attr("disabled",!0).filter(".save_button").text(e.t("status.saving","Saving...")),n.ajaxJSON(d,r,t,function(n){var d=n.grading_standard;a.find("button").attr("disabled",!1).filter(".save_button").text(e.t("buttons.save","Save")),a.triggerHandler("grading_standard_updated",d)},function(){a.find("button").attr("disabled",!1).filter(".save_button").text(e.t("errors.save_failed","Save Failed"))})}),n(".grading_standard thead").mouseover(function(){n(this).parents(".grading_standard").hasClass("editing")&&(n(this).parents(".grading_standard").find(".insert_grading_standard").hide(),n(this).parents(".grading_standard").find(".insert_grading_standard:first").show())}),n(".grading_standard .grading_standard_row").mouseover(function(a){if(n(this).parents(".grading_standard").hasClass("editing")){n(this).parents(".grading_standard").find(".insert_grading_standard").hide();var e=a.pageY,d=n(this).offset(),r=n(this).height();e>d.top+r/2?n(this).next(".insert_grading_standard").show():n(this).prev(".insert_grading_standard").show()}}),n(".grading_standard *").focus(function(){n(this).trigger("mouseover"),n(this).hasClass("delete_row_link")&&n(this).parents(".grading_standard_row").nextAll(".grading_standard_row").first().trigger("mouseover")}),n(".grading_standard .insert_grading_standard_link").click(function(a){if(a.preventDefault(),!(n(this).parents(".grading_standard").find(".grading_standard_row").length>40)){for(var e=n(this).parents(".grading_standard"),d=e.find(".grading_standard_row:first").clone(!0).removeClass("blank"),r=e.find(".insert_grading_standard:first").clone(!0),t=null;!t||n(".standard_name[name='grading_standard[standard_data][scheme_"+t+"][name]']").length>0;)t=Math.round(1e4*Math.random());d.find(".standard_name").val("-").attr("name","grading_standard[standard_data][scheme_"+t+"][name]"),d.find(".standard_value").attr("name","grading_standard[standard_data][scheme_"+t+"][value]"),n(this).parents(".insert_grading_standard").after(d.show()),d.after(r),e.find(":text:first").blur(),d.find(":text:first").focus().select(),d.addClass("to_add")}}),n(".grading_standard .delete_row_link").click(function(a){if(a.preventDefault(),!(n(this).parents(".grading_standard").find(".grading_standard_row:visible").length<2)){var e=n(this).parents(".grading_standard_row");e.prev(".insert_grading_standard").length>0?e.prev(".insert_grading_standard").remove():e.next(".insert_grading_standard").remove(),e.fadeOut(function(){n(this).addClass("to_delete"),n(".grading_standard input[type='text']:first").triggerHandler("change")})}}),n(".grading_standard input[type='text']").bind("blur change",function(){var e=n(this).parents(".grading_standard"),d=parseFloat(n(this).parents(".grading_standard_row").find(".standard_value").val());d=a(d,2),n(this).parents(".grading_standard_row").find(".standard_value").val(d),isNaN(d)&&(d=null);for(var r=d||100,t=d||0,s=e.find(".grading_standard_row:not(.blank,.to_delete)"),i=s.index(n(this).parents(".grading_standard_row"))+1;i<s.length;i++){var g=s.eq(i),_=parseFloat(g.find(".standard_value").val());isNaN(_)&&(_=null),i==s.length-1?_=0:(!_||_>r-.1)&&(_=parseInt(r)-1),g.find(".standard_value").val(_),r=_}for(var i=s.index(n(this).parents(".grading_standard_row"))-1;i>=0;i--){var g=s.eq(i),_=parseFloat(g.find(".standard_value").val());isNaN(_)&&(_=null),i==s.length-1?_=0:(!_||t+.1>_)&&(_=parseInt(t)+1),t=_,g.find(".standard_value").val(_)}r=100,s.each(function(a){var e=parseFloat(n(this).find(".standard_value").val()),a=s.index(this);isNaN(e)&&(e=null),a==s.length-1?e=0:(!e||e>r-.1)&&(e=parseInt(r)-1),n(this).find(".standard_value").val(e),r=e}),t=0;for(var i=s.length-1;i>=0;i--){var g=s.eq(i),_=parseFloat(g.find(".standard_value").val());isNaN(_)&&(_=null),i==s.length-1?_=0:(!_||t+.1>_)&&0!=_&&(_=parseInt(t)+1),t=_,g.find(".standard_value").val(_)}s.each(function(a){var e=s.eq(a-1),d=0;e&&e.length>0&&(d=parseFloat(e.find(".standard_value").val()),isNaN(d)&&(d=0),n(this).find(".edit_max_score").text("< "+d))}),s.filter(":first").find(".edit_max_score").text(100),s.find(".max_score_cell").each(function(){n(this).data("label")||n(this).data("label",n(this).attr("aria-label"));var a=n(this).data("label");n(this).attr("aria-label",a+" "+n(this).find(".edit_max_score").text()+"%")})})})}),function(){require(["grading_standards"])}.call(this),define("compiled/bundles/grading_standards",function(){});