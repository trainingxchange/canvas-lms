define("translations/rubric_assessment",["i18nObj","jquery"],function(i,t){t.extend(!0,i,{translations:{ar:{rubric_assessment:{options:{select:"[ تحديد ]"},titles:{additional_comments:"التعليقات الإضافية",criterion_long_description:"وصف طويل للمعيار"}}},de:{rubric_assessment:{options:{select:"[ Bitte auswählen ]"},titles:{additional_comments:"Zusätzliche Kommentare",criterion_long_description:"Ausführliche Kriteriumsbeschreibung"}}},"en-AU":{rubric_assessment:{options:{select:"[ Select ]"},titles:{additional_comments:"Additional Comments",criterion_long_description:"Criterion Long Description"}}},"en-GB":{rubric_assessment:{options:{select:"[ Select ]"},titles:{additional_comments:"Additional comments",criterion_long_description:"Criterion long description"}}},es:{rubric_assessment:{options:{select:"[ Seleccionar ]"},titles:{additional_comments:"Comentarios Adicionales",criterion_long_description:"Descripción Detallada de los Criterios"}}},"fa-IR":{rubric_assessment:{options:{select:"[ انتخاب ] "},titles:{additional_comments:"نظرهای دیگر",criterion_long_description:"شرح طولانی معیار"}}},fr:{rubric_assessment:{options:{select:"[ Sélectionner ]"},titles:{additional_comments:"Commentaires supplémentaires",criterion_long_description:"Description longue du critère"}}},ja:{rubric_assessment:{options:{select:"[ 選択 ]"},titles:{additional_comments:"追加コメント",criterion_long_description:"基準の詳しい説明"}}},ko:{rubric_assessment:{options:{select:"[ 선택 ]"},titles:{additional_comments:"추가 의견",criterion_long_description:"기준 상세 설명"}}},nb:{rubric_assessment:{options:{select:"[ Velg ]"},titles:{additional_comments:"Tilleggskommentarer",criterion_long_description:"Lang beskrivelse av kriterium"}}},nl:{rubric_assessment:{options:{select:"[ Selecteer ]"},titles:{additional_comments:"Extra opmerkingen",criterion_long_description:"Criterium voor uitgebreide beschrijving"}}},pl:{rubric_assessment:{options:{select:"[ Wybierz ]"},titles:{additional_comments:"Komentarze dodatkowe",criterion_long_description:"Szczegółowy opis kryterium"}}},pt:{rubric_assessment:{options:{select:"[ Selecionar ]"},titles:{additional_comments:"Comentários Adicionais",criterion_long_description:"Descrição longa do critério"}}},"pt-BR":{rubric_assessment:{options:{select:"[ Selecionar ]"},titles:{additional_comments:"Comentários Adicionais",criterion_long_description:"Descrição longa do critério"}}},ru:{rubric_assessment:{options:{select:"[ Выбрать ]"},titles:{additional_comments:"Дополнительные комментарии",criterion_long_description:"Длинное описание критерия"}}},tr:{rubric_assessment:{options:{select:"[ Seçiniz ]"},titles:{additional_comments:"Ek Yorumlar",criterion_long_description:"Kriterin Uzun Açıklaması"}}},zh:{rubric_assessment:{options:{select:"[选择]"},titles:{additional_comments:"其它评论",criterion_long_description:"标准长说明"}}}}})}),define("rubric_assessment",["i18n!rubric_assessment","jquery","str/htmlEscape","compiled/str/TextHelper","jquery.instructure_forms","jqueryui/dialog","jquery.instructure_misc_plugins","jquery.templateData","vendor/jquery.scrollTo"],function(i,t,e,n){return window.rubricAssessment={init:function(){var e=t("#rubric_criterion_comments_dialog");t(".rubric").delegate(".rating","click",function(){t(this).parents(".criterion").find(".criterion_points").val(t(this).find(".points").text()).change()}).delegate(".long_description_link","click",function(e){if(e.preventDefault(),!t(this).parents(".rubric").hasClass("editing")){var n=t(this).parents(".criterion").getTemplateData({textValues:["long_description","description"]}),s=t(this).parents(".criterion").hasClass("learning_outcome_criterion");t("#rubric_long_description_dialog").fillTemplateData({data:n,htmlValues:s?["long_description"]:[]}).find(".editing").hide().end().find(".displaying").show().end().dialog({title:i.t("titles.criterion_long_description","Criterion Long Description"),width:400})}}).delegate(".criterion .saved_custom_rating","change",function(){if(t(this).parents(".rubric").hasClass("assessing")){var i=t(this).val();i&&i.length>0&&t(this).parents(".custom_ratings_entry").find(".custom_rating_field").val(unescape(i))}}).delegate(".criterion_comments_link","click",function(n){n.preventDefault();var s=t(this),r=t(this).parents(".criterion"),o=r.getTemplateData({textValues:["custom_rating"]}).custom_rating,a=t(this).closest("td").children(".editing").is(":visible"),c={criterion_comments:o,criterion_description:r.find(".description:first").text()};e.data("current_rating",r),e.fillTemplateData({data:c}),e.fillFormData(c),e.find(".editing").showIf(a),e.find(".displaying").showIf(!a),e.dialog({title:i.t("titles.additional_comments","Additional Comments"),width:400,close:function(){s.focus()}}),e.find("textarea.criterion_comments").focus()}).find(".criterion_points").bind("keypress change blur",function(i){var e=t(i.target);if(e.parents(".rubric").hasClass("assessing")){var n=parseFloat(e.val(),10);isNaN(n)&&(n=null);var s=e.parents(".criterion");s.find(".rating.selected").removeClass("selected"),n||0===n?(s.find(".criterion_description").addClass("completed"),s.find(".rating").each(function(){var i=parseFloat(t(this).find(".points").text(),10);i==n&&t(this).addClass("selected")})):s.find(".criterion_description").removeClass("completed");var r=0;e.parents(".rubric").find(".criterion:visible:not(.ignore_criterion_for_scoring) .criterion_points").each(function(){var i=parseFloat(t(this).val(),10);isNaN(i)&&(i=0),r+=i}),e.parents(".rubric").find(".rubric_total").text(r)}}),t(".rubric_summary").delegate(".rating_comments_dialog_link","click",function(n){n.preventDefault();var s=t(this),r=t(this).parents(".criterion"),o=r.getTemplateData({textValues:["rating_custom"]}).rating_custom,a={criterion_comments:o,criterion_description:r.find(".description_title:first").text()};e.data("current_rating",r),e.fillTemplateData({data:a}),e.fillFormData(a),e.find(".editing").hide(),e.find(".displaying").show(),e.dialog({title:i.t("titles.additional_comments","Additional Comments"),width:400,close:function(){s.focus()}}),e.find(".criterion_description").focus()}),e.find(".save_button").click(function(){var i=e.find("textarea.criterion_comments").val(),t=e.data("current_rating");t&&(t.find(".custom_rating").text(i),t.find(".criterion_comments").toggleClass("empty",!i)),e.dialog("close")}),e.find(".cancel_button").click(function(){e.dialog("close")}),setInterval(rubricAssessment.sizeRatings,2500)},sizeRatings:function(){var i=t(".rubric .criterion:visible");if(i.length){var e=t.windowScrollTop();t(".rubric .criterion:visible").each(function(){var i=t(this),e=i.find(".ratings:visible");if(e.length){var n=e.find(".rating .container").css("height",""),s=Math.max(e.height(),i.find(".criterion_description .container").height());n.css("height",s-10+"px")}}),t("html,body").scrollTop(e)}},assessmentData:function(i){i=rubricAssessment.findRubric(i);var e={};return e["rubric_assessment[user_id]"]=ENV.RUBRIC_ASSESSMENT.assessment_user_id||i.find(".user_id").text(),e["rubric_assessment[assessment_type]"]=ENV.RUBRIC_ASSESSMENT.assessment_type||i.find(".assessment_type").text(),i.find(".criterion:not(.blank)").each(function(){var i=t(this).attr("id"),n="rubric_assessment["+i+"]";e[n+"[points]"]=t(this).find(".criterion_points").val(),t(this).find(".rating.selected")&&(e[n+"[description]"]=t(this).find(".rating.selected .description").text(),e[n+"[comments]"]=t(this).find(".custom_rating").text()),t(this).find(".custom_rating_field:visible").length>0&&(e[n+"[comments]"]=t(this).find(".custom_rating_field:visible").val(),e[n+"[save_comment]"]=t(this).find(".save_custom_rating").attr("checked")?"1":"0")}),e},findRubric:function(i){return i.hasClass("rubric")||($new_rubric=i.closest(".rubric"),0===$new_rubric.length&&($new_rubric=i.find(".rubric:first")),i=$new_rubric),i},updateRubricAssociation:function(t,e){var s=e.summary_data;if(s&&s.saved_comments)for(var r in s.saved_comments){var o=s.saved_comments[r],a=t.find("#criterion_"+r).find(".saved_custom_rating_holder").hide(),c=a.find(".saved_custom_rating");c.find(".comment").remove(),c.empty().append('<option value="">'+i.t("options.select","[ Select ]")+"</option>");for(var d in o)o[d]&&(c.append('<option value="'+escape(o[d])+'">'+n.truncateText(o[d],{max:50})+"</option>"),a.show())}},populateRubric:function(i,n){i=rubricAssessment.findRubric(i);i.attr("id").substring(7);if(i.find(".user_id").text(ENV.RUBRIC_ASSESSMENT.assessment_user_id||n.user_id).end().find(".assessment_type").text(ENV.RUBRIC_ASSESSMENT.assessment_type||n.assessment_type),i.find(".criterion_description").removeClass("completed").removeClass("original_completed").end().find(".rating").removeClass("selected").removeClass("original_selected").end().find(".custom_rating_field").val("").end().find(".custom_rating_comments").text("").end().find(".criterion_points").val("").change().end().find(".criterion_rating_points").text("").end().find(".custom_rating").text("").end().find(".save_custom_rating").attr("checked",!1),i.find(".criterion_comments").addClass("empty"),n){var s=n,r=0;for(var o in s.data){var a=s.data[o],c=a.comments_enabled?a.comments:a.description;if(a.comments_enabled&&a.comments_html)var d=a.comments_html;else var d=e(c);var l=i.find("#criterion_"+a.criterion_id);a.id||l.find(".rating").each(function(){var i=parseFloat(t(this).find(".points").text(),10);i==a.points&&(a.id=t(this).find(".rating_id").text())}),l.find(".criterion_description").addClass("original_completed").end().find("#rating_"+a.id).addClass("original_selected").addClass("selected").end().find(".custom_rating_field").val(c).end().find(".custom_rating_comments").html(d).end().find(".criterion_points").val(a.points).change().end().find(".criterion_rating_points_holder").showIf(a.points||0===a.points).end().find(".criterion_rating_points").text(a.points).end().find(".custom_rating").text(c).end().find(".criterion_comments").toggleClass("empty",!c).end().find(".save_custom_rating").attr("checked",!1),c&&l.find(".criterion_comments").show(),a.points&&!a.ignore_for_scoring&&(r+=a.points)}i.find(".rubric_total").text(r)}},populateRubricSummary:function(i,t){if(i.find(".criterion_points").text("").end().find(".rating_custom").text(""),t){var e=t,n=0;for(var s in e.data){var r=e.data[s];i.find("#criterion_"+r.criterion_id).find(".rating").hide().end().find(".rating.description").showIf(!i.hasClass("free_form")).text(r.description).end().find(".rating_"+r.id).show().end().find(".criterion_points").text(r.points).end().find(".ignore_for_scoring").showIf(r.ignore_for_scoring),r.comments_enabled&&r.comments&&i.find("#criterion_"+r.criterion_id).find(".rating_custom").show().text(r.comments),r.points&&!r.ignore_for_scoring&&(n+=r.points)}i.show().find(".rubric_total").text(n),i.closest(".edit").show()}else i.hide()}},t(rubricAssessment.init),rubricAssessment}),function(){require(["rubric_assessment"])}.call(this),define("compiled/bundles/rubric_assessment",function(){});