define("translations/files",["i18nObj","jquery"],function(e,t){t.extend(!0,e,{translations:{ar:{errors:{failed:"فشل"},files:{alts:{file:"ملف",folder:"مجلد",folder_locked:"تم تأمين المجلد",locked_file:"تم تأمين الملف"},buttons:{update_file:"تحديث الملف"},cancel:"إلغاء",errors:{extracting:"حديث أخطاء أثناء استخراج الملف المضغوط.  يرجى المحاولة مرة أخرى.",failed_uploading:"فشل التحميل: %{error_info}",loading_file:"حدث خطأ أثناء تحميل محتويات الملف.  يرجى المحاولة مرة أخرى.",server_returned_invalid_status:"توقف الخادم عن العودة للحالة الصالحة",server_unresponsive:"توقف الخادم عن الاستجابة لطلبات الحالة",unexpected_response:"لم يتم إرجاع الاستجابة المتوقعة",update_file_failed:"فشل تحديث الملف، الرجاء المحاولة مرة أخرى",uploading:"خطأ في التحميل",uploading_zip:"حدثت أخطاء أثناء تحميل الملف المضغوط."},links:{add_files:"إضافة ملفات"},messages:{access_denied:"لا يمكنك قراءة محتويات هذا المجلد.",done_uploading:"انتهاء التحميل",error_count:{one:"خطأ واحد",other:"%{count} من الأخطاء"},extraction_complete:"احجبل الاستخراج!  جارٍ تحديث بنية الملف...",finalizing:"إنهاء",folder_empty:"لا يوجد شيء في هذا المجلد",loading_files:"جارٍ تحميل الملفات...",no_files_selected:"لم يتم تحديد ملفات صالحة",queued:"‏‏في قائمة الانتظار",updating_file:"جارٍ تحديث الملف...",upload_complete:"انتهى التحميل",uploading:"التحميل",uploading_files:{one:"جارٍ تحميل ملف واحد...",other:"جارٍ تحميل %{count} من الملفات..."}},prompts:{delete_file:"هل ترغب بالتأكيد في حذف هذا الملف؟",delete_folder:"هل ترغب بالتأكيد في حذف هذا المجلد وكل محتوياته؟",duplicate_filenames:"توجد ملفات بالأسماء التالية بالفعل في هذا المجلد. هل تريد استبدالها أم إعادة تسمية الملفات الجديدة بأسماء فريدة؟",extract_zip:"هذا الملف ملف مضغوط.  هل تريد استخراج محتوياته داخل هذا المجلد؟"},titles:{click_and_drag:"انقر واسحب لنقل المجلد إلى مجلد آخر",drag_to_move:"اسحب للانتقال إلى مجلد مختلف",extracting:"استخراج الملفات إلى مجلدات",file_uplaods_queue:"قائمة انتظار تحميل الملف",lock_file:"تأمين الملف",lock_folder:"تأمين المجلد"},update_file:"تحديث الملف",upload_error:"حدث خطأ أثناء تحميل الملف",warnings:{file_uploaded_without_response:"ربما تم تحميل الملف، لكن فشل الخادم في الاستجابة.  أعد تحميل الصفحة للتأكيد."}}},de:{errors:{failed:"Fehlgeschlagen"},files:{alts:{file:"Datei",folder:"Ordner",folder_locked:"Gesperrter Ordner",locked_file:"Gesperrte Datei"},buttons:{update_file:"Datei aktualisieren"},cancel:"Abbrechen",errors:{extracting:"Beim Extrahieren der Zip-datei sind Fehler aufgetreten.  Bitte versuchen Sie es erneut.",failed_uploading:"Upload fehlgeschlagen: %{error_info}",loading_file:"Fehler beim Laden von Dateiinhalten.  Bitte versuchen Sie es erneut.",server_returned_invalid_status:"Server gibt keinen gültigen Status zurück",server_unresponsive:"Server reagiert nicht mehr auf Statusanforderungen",unexpected_response:"hat nicht die erwartete Antwort zurückerhalten",update_file_failed:"Dateiaktualisierung fehlgeschlagen, bitte erneut versuchen",uploading:"Fehler beim Hochladen",uploading_zip:"Beim Hochladen der Zip-datei ist ein Fehler aufgetreten."},links:{add_files:"Dateien hinzufügen"},messages:{access_denied:"Sie können die Inhalte dieses Ordners nicht anzeigen.",done_uploading:"Upload abgeschlossen",error_count:{one:"1 Fehler",other:"%{count} Fehler"},extraction_complete:"Extraktion abgeschlossen!  Dateistruktur wird aktualisiert...",finalizing:"Fertigstellen",folder_empty:"Keine Inhalte in diesem Ordner",loading_files:"Dateien werden geladen...",no_files_selected:"Es wurden keine gültigen Dateien ausgewählt",queued:"In Warteschlange",updating_file:"Datei wird aktualisiert...",upload_complete:"Upload abgeschlossen",uploading:"Upload",uploading_files:{one:"1 Datei wird hochgeladen...",other:"%{count} Dateien werden hochgeladen..."}},prompts:{delete_file:"Möchten Sie diese Datei wirklich löschen?",delete_folder:"Möchten Sie diesen Ordner und seinen gesamten Inhalt wirklich löschen?",duplicate_filenames:"Dieser Ordner enthält bereits Dateien mit folgenden Namen. Wollen Sie diese Dateien ersetzen oder die neuen Dateien umbenennen?",extract_zip:"Diese Datei ist eine ZIP-datei.  Wollen Sie den Inhalt in diesen Ordner extrahieren?"},titles:{click_and_drag:"Klicken und ziehen, um den Ordner in einen anderen Ordner zu verschieben",drag_to_move:"Ziehen zum Verschieben in einen anderen Ordner",extracting:"Dateien in Ordner extrahieren",file_uplaods_queue:"Warteschleife für Dateiuploads",lock_file:"Datei sperren",lock_folder:"Ordner sperren"},update_file:"Datei aktualisieren",upload_error:"Beim Hochladen Ihrer Datei ist ein Fehler aufgetreten",warnings:{file_uploaded_without_response:"Die Datei wurde möglicherweise hochgeladen, aber der Server reagiert nicht.  Bitte laden Sie die Seite erneut, um eine Bestätigung zu erhalten."}}},"en-AU":{errors:{failed:"Failed"},files:{alts:{file:"File",folder:"Folder",folder_locked:"Locked Folder",locked_file:"Locked File"},buttons:{update_file:"Update File"},cancel:"Cancel",errors:{extracting:"There were errors extracting the zip file.  Please try again.",failed_uploading:"Failed uploading: %{error_info}",loading_file:"Error Loading File Contents.  Please try again.",server_returned_invalid_status:"The server stopped returning a valid status",server_unresponsive:"The server stopped responding to status requests",unexpected_response:"didn't get back expected response",update_file_failed:"Updating File Failed, please try again",uploading:"Uploading Error",uploading_zip:"There were errors uploading the zip file."},links:{add_files:"Add Files"},messages:{access_denied:"You cannot read the contents of this folder.",done_uploading:"Done uploading",error_count:{one:"1 Error",other:"%{count} Errors"},extraction_complete:"Extraction complete!  Updating...",finalizing:"Finalizing",folder_empty:"Nothing in this Folder",loading_files:"Loading Files...",no_files_selected:"No valid files were selected",queued:"Queued",updating_file:"Updating File...",upload_complete:"Done uploading",uploading:"Uploading",uploading_files:{one:"Uploading 1 File...",other:"Uploading %{count} Files..."}},prompts:{delete_file:"Are you sure you want to delete this file?",delete_folder:"Are you sure you want to delete this folder and all of its contents?",duplicate_filenames:"Files with the following names already exist in this folder. Do you want to replace them, or rename the new files with unique names?",extract_zip:"This file is a zip file.  Do you want to extract its contents into this folder?"},titles:{click_and_drag:"Click and drag to move folder to another folder",drag_to_move:"Drag to move to a different folder",extracting:"Extracting Files into Folder",file_uplaods_queue:"File Uploads Queue",lock_file:"Lock File",lock_folder:"Lock Folder"},update_file:"Update File",upload_error:"There was an error uploading your file",warnings:{file_uploaded_without_response:"File may have uploaded, but the server failed to respond.  Reload the page to confirm."}}},"en-GB":{errors:{failed:"Failed"},files:{alts:{file:"File",folder:"Folder",folder_locked:"Locked folder",locked_file:"Locked file"},buttons:{update_file:"Update file"},cancel:"Cancel",errors:{extracting:"There were errors extracting the zip file.  Please try again.",failed_uploading:"Failed uploading: %{error_info}",loading_file:"Error loading file contents.  Please try again.",server_returned_invalid_status:"The server stopped returning a valid status",server_unresponsive:"The server stopped responding to status requests",unexpected_response:"didn't get back expected response",update_file_failed:"Updating file failed, please try again",uploading:"Uploading error",uploading_zip:"There were errors uploading the zip file."},links:{add_files:"Add files"},messages:{access_denied:"You cannot read the contents of this folder.",done_uploading:"Done uploading",error_count:{one:"1 error",other:"%{count} errors"},extraction_complete:"Extraction complete!  Updating...",finalizing:"Finalising",folder_empty:"Nothing in this folder",loading_files:"Loading files...",no_files_selected:"No valid files were selected",queued:"Queued",updating_file:"Updating file...",upload_complete:"Done uploading",uploading:"Uploading",uploading_files:{one:"Uploading one file...",other:"Uploading %{count} files..."}},prompts:{delete_file:"Are you sure you want to delete this file?",delete_folder:"Are you sure you want to delete this folder and all of its contents?",duplicate_filenames:"Files with the following names already exist in this folder. Do you want to replace them, or rename the new files with unique names?",extract_zip:"This file is a zip file.  Do you want to extract its contents into this folder?"},titles:{click_and_drag:"Click and drag to move folder to another folder",drag_to_move:"Drag to move to a different folder",extracting:"Extracting files into folder",file_uplaods_queue:"File uploads queue",lock_file:"Lock file",lock_folder:"Lock folder"},update_file:"Update file",upload_error:"There was an error uploading your file",warnings:{file_uploaded_without_response:"File may have uploaded, but the server failed to respond.  Reload the page to confirm."}}},es:{errors:{failed:"Falló"},files:{alts:{file:"Archivo",folder:"Carpeta",folder_locked:"Carpeta Bloqueada",locked_file:"Archivo Bloqueado"},buttons:{update_file:"Actualice el Archivo"},cancel:"Cancelar",errors:{extracting:"Hubieron errors extrayendo el archivo zip. Intente de nuevo.",failed_uploading:"La Carga Falló: %{error_info} ",loading_file:"Error Cargando los Contenidos de Archivo. Intente de nuevo.",server_returned_invalid_status:"El servidor dejó de reporter un estátus válido",server_unresponsive:"El servidor dejó de responder a las solicitudes de estatus",unexpected_response:"no se obtuvo una respuesta esperada",update_file_failed:"Actualización del Archivo Falló, intente de nuevo",uploading:"Error de Carga",uploading_zip:"Se han producido varios errores al cargar el archivo zip"},links:{add_files:"Agregar Archivos"},messages:{access_denied:"No puede leer el contenido de este folder.",done_uploading:"Carga completa",error_count:{one:"1 Error",other:"%{count} Errores"},extraction_complete:"¡Extracción completa! Actualización la Estructura del Archivo...",finalizing:"Finalizando",folder_empty:"Nada en esta Carpeta",loading_files:"Cargando los archivos...",no_files_selected:"Ningún archivo válido fue seleccionado",queued:"En Fila",updating_file:"Actualizando el Archivo...",upload_complete:"Carga completa",uploading:"Cargando ",uploading_files:{one:"Cargando 1 Archivo...",other:"Cargando %{count} Archivos..."}},prompts:{delete_file:"¿Está seguro de que quiere borrar este archivo?",delete_folder:"¿Está seguro de que quiere borrar esta carpeta y todos sus componentes?",duplicate_filenames:"Los archivos con los siguientes nombres ya existen en esta carpeta. ¿Desea reemplazarlos, o renombrarlos con nombres únicos?",extract_zip:"Este archivo es un archivo comprimido zip. ¿Desea extraer sus contenidos en esta carpeta?"},titles:{click_and_drag:"Hacer click y arrastrar para mover la carpeta a otra carpeta",drag_to_move:"Arrastrar para mover a una carpeta diferente",extracting:"Extrayendo Archivos a la Carpeta",file_uplaods_queue:"Lista de Cargas de Archivos",lock_file:"Bloquear el Archivo",lock_folder:"Bloquear la Carpeta"},update_file:"Actualice el Archivo",upload_error:"Ocurrió un error al cargar su archivo",warnings:{file_uploaded_without_response:"El archive puede haberse cargado, pero el servidor no ha respondido. Recargue la página para confirmar."}}},"fa-IR":{errors:{failed:"انجام نشد"},files:{alts:{file:"فایل",folder:"پوشه",folder_locked:"پوشه قفل شده",locked_file:"فایل قفل شده"},buttons:{update_file:"بهنگام سازی فایل"},cancel:"لغو",errors:{extracting:"در هنگام استخراج فایل فشرده خطاهایی رخ داد. لطفا دوباره سعی کنید.",failed_uploading:"بارگذاری انجام نشد: %{error_info}",loading_file:"در هنگام بارگذاری محتوای فایل خطایی رخ داد. لطفا دوباره سعی کنید.",server_returned_invalid_status:"سرور برگرداندن وضعیت معتبر را متوقف کرد",server_unresponsive:"سرور، پاسخ دادن به درخواست های وضعیت را متوقف کرد",unexpected_response:"پاسخ مورد انتظار را برنگرداند",update_file_failed:"بهنگام سازی فایل انجام نشد. لطفا دوباره سعی کنید",uploading:"خطا در بارگذاری",uploading_zip:"خطاهایی در هنگام بارگذاری فایل فشرده رخ داد."},links:{add_files:"افزودن فایل ها"},messages:{access_denied:"نمی توانید محتوای این پوشه را بخوانید.",done_uploading:"بارگذاری انجام شد",error_count:{one:"%{count} خطا",other:"%{count} خطا"},extraction_complete:"استخراج انجام شد! در حال بهنگام سازی...",finalizing:"در حال نهایی کردن",folder_empty:"چیزی در این پوشه موجود نیست",loading_files:"در حال بارگذاری فایل ها...",no_files_selected:"هیچ فایل معتبری انتخاب نشده است",queued:"در صف",updating_file:"در حال بهنگام سازی فایل...",upload_complete:"بارگذاری انجام شد",uploading:"در حال بارگذاری",uploading_files:{one:"در حال بارگذاری %{count} فایل...",other:"در حال بارگذاری %{count} فایل..."}},prompts:{delete_file:"مطمئنید که می خواهید این فایل حذف شود؟",delete_folder:"مطمئنید که می خواهید این پوشه و تمام محتوای آن حذف شود؟",duplicate_filenames:"فایل هایی با نام های زیر هم اکنون در این پوشه موجود هستند. می خواهید آنها را جایگزین کنید یا نام فایل های جدید را با استفاده از نام های یکتا تغییر دهید؟",extract_zip:"این فایل، یک فایل فشرده است. می خواهید محتوای آن را در این پوشه استخراج کنید؟"},titles:{click_and_drag:"برای انتقال پوشه به یک پوشه دیگر، کلیک کنید و بکشید",drag_to_move:"برای انتقال به یک پوشه دیگر، بکشید",extracting:"در حال استخراج فایل ها در پوشه",file_uplaods_queue:"صف بارگذاری های فایل",lock_file:"قفل کردن فایل",lock_folder:"قفل کردن پوشه"},update_file:"بهنگام سازی فایل",upload_error:"در هنگام بهنگام سازی فایل شما خطایی رخ داد",warnings:{file_uploaded_without_response:"فایل ممکن است بارگذاری شده باشد، اما سرور پاسخ نداد. صفحه را برای تأیید، دوباره بارگذاری کنید."}}},fr:{errors:{failed:"Échec"},files:{alts:{file:"Fichier",folder:"Dossier",folder_locked:"Dossier verrouillé",locked_file:"Fichier verrouillé"},buttons:{update_file:"Mettre à jour le fichier"},cancel:"Annuler",errors:{extracting:"Des erreurs se sont produites lors de l’extraction du fichier zip. Veuillez réessayer.",failed_uploading:"Échec lors du téléchargement : %{error_info}",loading_file:"Erreur lors du chargement du contenu du fichier. Veuillez réessayer.",server_returned_invalid_status:"Le serveur ne renvoie plus de statut valide",server_unresponsive:"Le serveur ne répond plus aux demandes de statuts",unexpected_response:"la réponse attendue n’a pas été obtenue",update_file_failed:"Échec de la mise à jour du fichier, veuillez réessayer",uploading:"Erreur de téléchargement",uploading_zip:"Des erreurs sont survenues lors du téléchargement du fichier zip."},links:{add_files:"Ajouter des fichiers"},messages:{access_denied:"Impossible de lire le contenu de ce dossier.",done_uploading:"Téléchargement terminé",error_count:{one:"1 erreur",other:"%{count} erreurs"},extraction_complete:"Extraction terminée. Mise à jour de la structure de fichiers...",finalizing:"Finalisation",folder_empty:"Ce dossier est vide",loading_files:"Chargement des fichiers...",no_files_selected:"Aucun fichier valide n’est sélectionné",queued:"En file d’attente",updating_file:"Mise à jour du fichier...",upload_complete:"Téléchargement terminé",uploading:"Téléchargement",uploading_files:{one:"Téléchargement d’un fichier...",other:"Téléchargement de %{count} fichiers..."}},prompts:{delete_file:"Voulez-vous vraiment supprimer ce fichier ?",delete_folder:"Voulez-vous vraiment supprimer ce dossier et tout ce qu’il contient ?",duplicate_filenames:"Des fichiers portant ce nom existent déjà dans ce dossier. Voulez-vous les remplacer ou renommer les nouveaux fichiers avec des noms uniques ?",extract_zip:"Ce fichier est un fichier zip. Voulez-vous extraire son contenu dans ce dossier ?"},titles:{click_and_drag:"Cliquer sur le dossier et le faire glisser dans un autre dossier",drag_to_move:"Faire glisser pour déplacer dans un dossier différent",extracting:"Extraction des fichiers dans un dossier",file_uplaods_queue:"File d’attente de téléchargement des fichiers",lock_file:"Verrouiller le fichier",lock_folder:"Verrouiller le dossier"},update_file:"Mettre à jour le fichier",upload_error:"Erreur lors du téléchargement du fichier",warnings:{file_uploaded_without_response:"Le fichier est peut-être téléchargé mais le serveur n’a pas répondu. Retéléchargez la page pour confirmer."}}},ja:{errors:{failed:"失敗しました"},files:{alts:{file:"ファイル",folder:"フォルダ",folder_locked:"ロックされているフォルダ",locked_file:"ロックされているファイル"},buttons:{update_file:"ファイルの更新"},cancel:"キャンセル",errors:{extracting:"zip ファイルを解凍する際にエラーが発生しました。もう一度、試してください。",failed_uploading:"アップロードに失敗しました。 %{error_info}",loading_file:"ファイルの内容を読み込む際にエラーが発生しました。もう一度、試してください。",server_returned_invalid_status:"サーバは、有効なステータスを返すことを停止しました。",server_unresponsive:"サーバは、ステータス要求への応答を停止しました。",unexpected_response:"予期された応答を返しませんでした",update_file_failed:"ファイルの更新に失敗しました。もう一度やり直してください",uploading:"アップロード エラーです",uploading_zip:"zip ファイルをアップロードする際にエラーが発生しました。"},links:{add_files:"ファイルの追加"},messages:{access_denied:"このフォルダの内容は読み取りできません。",done_uploading:"アップロードが完了しました",error_count:{one:"%{count} 個のエラー",other:"%{count} 個のエラー"},extraction_complete:"解凍が完了しました!ファイル構造を更新しています...",finalizing:"最終処理を行っています",folder_empty:"このフォルダには何も入っていません",loading_files:"ファイルを読み込んでいます。",no_files_selected:"有効なファイルが選択されませんでした",queued:"キューに入っています",updating_file:"ファイルを更新しています...",upload_complete:"アップロードが完了しました",uploading:"アップロードしています",uploading_files:{one:"%{count} 個のファイルをアップロードしています...",other:"%{count} 個のファイルをアップロードしています..."}},prompts:{delete_file:"このファイルを削除してもよろしいですか?",delete_folder:"このフォルダとそのすべての内容を削除してもよろしいですか?",duplicate_filenames:"次の名前のファイルは、既にこのフォルダに存在しています。同じ名前のファイルを置き換えますか? または、新しいファイルを一意の名前に変更しますか?",extract_zip:"このファイルは zip ファイルです。解凍後の内容をこのフォルダに入れますか?"},titles:{click_and_drag:"クリック アンド ドラッグでフォルダを別のフォルダに移動します",drag_to_move:"ドラッグして別のフォルダに移動します",extracting:"ファイルをフォルダ内に解凍しています",file_uplaods_queue:"ファイル アップロード キュー",lock_file:"ファイルのロック",lock_folder:"フォルダのロック"},update_file:"ファイルの更新",upload_error:"ファイルをアップロードする際にエラーが発生しました",warnings:{file_uploaded_without_response:"ファイルはアップロードされたようですが、サーバからの応答に失敗しました。ページを再読み込みして、確認してください。"}}},ko:{errors:{failed:"실패함"},files:{alts:{file:"파일",folder:"폴더",folder_locked:"잠긴 폴더",locked_file:"잠긴 파일"},buttons:{update_file:"파일 업데이트"},cancel:"취소",errors:{extracting:"zip 파일의 압축을 해제하는 데 오류가 있습니다.  다시 시도하시기 바랍니다.",failed_uploading:"업로드 실패: %{error_info}",loading_file:"파일 내용 업로드 오류입니다. 다시 시도하시기 바랍니다.",server_returned_invalid_status:"서버가 유효한 상태 반환을 멈춤",server_unresponsive:"서버가 상태 요청에 응답을 멈춤",unexpected_response:"필요한 응답을 받지 못함",update_file_failed:"파일 업데이트 실패. 다시 시도하시기 바랍니다.",uploading:"업로드 오류",uploading_zip:"zip 파일을 업로드하는 중에 오류가 발생했습니다."},links:{add_files:"파일 추가"},messages:{access_denied:"이 폴더의 내용을 읽을 수 없습니다.",done_uploading:"업로드 마침",error_count:{one:"오류 %{count}개",other:"오류 %{count}개"},extraction_complete:"추출이 완료되었습니다! 업데이트 중...",finalizing:"마무리 중",folder_empty:"이 폴더에 내용 없음",loading_files:"파일 로드 중...",no_files_selected:"유효한 파일이 선택되지 않음",queued:"대기",updating_file:"파일 업데이트 중...",upload_complete:"업로드 마침",uploading:"업로드 중",uploading_files:{one:"파일 %{count}개 업로드 중...",other:"파일 %{count}개 업로드 중..."}},prompts:{delete_file:"이 파일을 삭제하시겠습니까?",delete_folder:"이 폴더와 폴더의 모든 내용을 삭제하시겠습니까?",duplicate_filenames:"다음 이름을 가진 파일이 이 폴더에 이미 존재합니다. 파일을 대체하시겠습니까, 아니면 새 파일을 고유한 이름으로 바꾸시겠습니까?",extract_zip:"이 파일은 zip 파일입니다. 이 폴더에 압축을 해제하시겠습니까?"},titles:{click_and_drag:"폴더를 다른 폴더로 옮기려면 클릭해서 끌기",drag_to_move:"다른 폴더로 옮기려면 끌기",extracting:"폴더에 파일 압축 해제",file_uplaods_queue:"파일 업로드 큐",lock_file:"파일 잠금",lock_folder:"폴더 잠금"},update_file:"파일 업데이트",upload_error:"파일 업로드 중 오류 발생",warnings:{file_uploaded_without_response:"파일을 업로드했으나 서버가 응답에 실패했습니다. 확인하려면 페이지를 다시 로드하십시오."}}},nb:{errors:{failed:"Feilet"},files:{alts:{file:"Fil",folder:"Mappe",folder_locked:"Låst mappe",locked_file:"Låst fil"},buttons:{update_file:"Oppdater fil"},cancel:"Avbryt",errors:{extracting:"Det skjedde en feil under åpning av zipfilen. Prøv igjen.",failed_uploading:"Opplasting mislyktes: %{error_info}",loading_file:"Feil under lasting av filinnhold. Prøv igjen.",server_returned_invalid_status:"Tjeneren sluttet å returnere en gyldig status",server_unresponsive:"Tjeneren sluttet å svare på statusforespørsler",unexpected_response:"fikk ikke forventet svar",update_file_failed:"Oppdatering av fil mislyktes. Prøv igjen",uploading:"Opplastingsfeil",uploading_zip:"Feil oppsto under opplasting av zipfilen."},links:{add_files:"Legg til filer"},messages:{access_denied:"Du kan ikke lese mappens innhold.",done_uploading:"Opplasting fullført",error_count:{one:"1 feil",other:"%{count} feil"},extraction_complete:"Utpakking ferdig!  Oppdaterer...",finalizing:"Sluttfører",folder_empty:"Ingen ting i denne mappen",loading_files:"Laster filer...",no_files_selected:"Ingen gyldige filer ble valgt",queued:"Satt i kø",updating_file:"Oppdaterer fil...",upload_complete:"Opplasting fullført",uploading:"Laster opp",uploading_files:{one:"Laster opp 1 fil...",other:"Laster opp %{count} filer..."}},prompts:{delete_file:"Er du sikker på at du ønsker å slette denne filen?",delete_folder:"Er du sikker på at du vil slette denne mappen og alt dens innhold?",duplicate_filenames:"Filer med følgende navn finnes allerede i mappen. Ønsker du å erstatte dem, eller gi de nye filene nye navn?",extract_zip:"Denne filen er en zipfil. Vil du pakke ut dens innhold til denne mappen?"},titles:{click_and_drag:"Klikk og dra for å flytte mappen til en annen mappe",drag_to_move:"Dra for å flytte til en annen mappe",extracting:"Pakker ut filer til mappen",file_uplaods_queue:"Filopplastingskø",lock_file:"Lås fil",lock_folder:"Lås mappe"},update_file:"Oppdater fil",upload_error:"En feil oppsto under opplasting av filen",warnings:{file_uploaded_without_response:"Filen kan være lastet opp, men serveren responderte ikke. Last siden på nytt for å bekrefte."}}},nl:{errors:{failed:"Mislukt"},files:{alts:{file:"Bestand",folder:"Map",folder_locked:"Vergrendelde map",locked_file:"Vergrendeld bestand"},buttons:{update_file:"Bestand updaten"},cancel:"Annuleren",errors:{extracting:"Er zijn fouten opgetreden tijdens het uitpakken van het zipbestand. Probeer het opnieuw.",failed_uploading:"Uploaden mislukt: %{error_info}",loading_file:"Er is een fout opgetreden tijdens het laden van bestandsinhoud. Probeer het opnieuw.",server_returned_invalid_status:"De server is gestopt met het terugsturen van een ongeldige status",server_unresponsive:"De server reageert niet meer op statusverzoeken",unexpected_response:"geen verwacht antwoord teruggekregen",update_file_failed:"Het updaten van het bestand mislukt, probeer het opnieuw",uploading:"Fout tijdens het uploaden",uploading_zip:"Er zijn fouten opgetreden tijdens het uploaden van het zipbestand."},links:{add_files:"Bestanden toevoegen"},messages:{access_denied:"De inhoud van deze map kan niet gelezen worden.",done_uploading:"Klaar met uploaden",error_count:{one:"1 fout",other:"%{count} fouten"},extraction_complete:"Klaar met uitpakken! Bezig met bijwerken...",finalizing:"Wordt voltooid",folder_empty:"Deze map is leeg",loading_files:"Bezig met laden van bestanden...",no_files_selected:"Geen geldige bestanden geselecteerd",queued:"In de wacht",updating_file:"Bezig met het bijwerken van bestand...",upload_complete:"Klaar met uploaden",uploading:"Bezig met uploaden",uploading_files:{one:"Bezig met uploaden van 1 bestand...",other:"Bezig met uploaden van %{count} bestanden..."}},prompts:{delete_file:"Weet je zeker dat je dit bestand wilt verwijderen?",delete_folder:"Weet je zeker dat je deze map inclusief alle inhoud wilt verwijderen?",duplicate_filenames:"Er staan al bestanden met de volgende namen in deze map. Wil je de bestanden vervangen of wil je de naam van de nieuwe bestanden met een unieke naam wijzigen? ",extract_zip:"Dit bestand is een zipbestand.  Wil je de inhoud uitpakken in deze map?"},titles:{click_and_drag:"Klikken en slepen om een map naar een andere map te verplaatsen",drag_to_move:"Slepen om naar een andere map te verplaatsen",extracting:"Bestanden worden uitgepakt in map",file_uplaods_queue:"Wachtrij voor te uploaden bestanden",lock_file:"Bestand vergrendelen",lock_folder:"Map vergrendelen"},update_file:"Bestand bijwerken",upload_error:"Er is een fout opgetreden tijdens het uploaden van jouw bestand",warnings:{file_uploaded_without_response:"Bestand kan geüpload zijn, maar de server reageert niet. De pagina opnieuw laden om te bevestigen."}}},pl:{errors:{failed:"Niepowodzenie"},files:{alts:{file:"Plik",folder:"Folder",folder_locked:"Folder zablokowany",locked_file:"Plik zablokowany"},buttons:{update_file:"Aktualizuj plik"},cancel:"Anuluj",errors:{extracting:"Wystąpiły błędy podczas rozpakowywania pliku .zip.  Spróbuj ponownie.",failed_uploading:"Przekazywanie nie powiodło się: %{error_info}",loading_file:"Wystąpił błąd podczas przekazywania zawartości pliku.  Spróbuj ponownie.",server_returned_invalid_status:"Serwer przestał zgłaszać prawidłowy status",server_unresponsive:"Serwer przestał odpowiadać na zapytania o status",unexpected_response:"nie odpowiedział poprawnie",update_file_failed:"Aktualizacja pliku nie powiodła się, ponów próbę",uploading:"Błąd przekazywania",uploading_zip:"Wystąpiły błędy podczas przysyłania pliku zip."},links:{add_files:"Dodaj pliki"},messages:{access_denied:"Nie masz dostępu do zawartości tego folderu.",done_uploading:"Przekazywanie zostało zakończone",error_count:{one:"1 błąd",other:"%{count} błędów"},extraction_complete:"Zakończono wypakowywanie!  Trwa aktualizacja struktury plików...",finalizing:"finalizowanie",folder_empty:"Folder jest pusty",loading_files:"Trwa przekazywanie plików...",no_files_selected:"Nie wybrano żadnego poprawnego pliku",queued:"W kolejce",updating_file:"Trwa aktualizacja pliku...",upload_complete:"Przekazywanie zostało zakończone",uploading:"Przekazywanie...",uploading_files:{one:"Przesyłanie 1 pliku...",other:"Przesyłanie %{count} plików..."}},prompts:{delete_file:"Czy na pewno chcesz usunąć ten plik?",delete_folder:"Czy na pewno chcesz usunąć ten folder i całą jego zawartość?",duplicate_filenames:"Pliki o tych nazwach istnieją już w tym folderze. Chcesz je zastąpić czy zmienić nazwy nowych plików?",extract_zip:"Ten plik jest plikiem .zip.  Czy chcesz wypakować jego zawartość do tego folderu?"},titles:{click_and_drag:"Kliknij i przeciągnij, aby przenieść folder do innego folderu",drag_to_move:"Przeciągnij, aby przenieść do innego folderu",extracting:"Wypakowywanie plików do folderu",file_uplaods_queue:"Kolejka przekazywanych plików",lock_file:"Zablokuj plik",lock_folder:"Zablokuj folder"},update_file:"Aktualizuj plik",upload_error:"Wystąpił błąd podczas przesyłania Twojego pliku",warnings:{file_uploaded_without_response:"Plik mógł zostać przekazany, ale nie uzyskano odpowiedzi z serwera.  Ponownie załaduj stronę, aby potwierdzić."}}},pt:{errors:{failed:"Falhou"},files:{alts:{file:"Arquivo",folder:"Pasta",folder_locked:"Pasta travada",locked_file:"Ficheiro bloqueado"},buttons:{update_file:"Atualizar arquivo"},cancel:"Cancelar",errors:{extracting:"Houve erros durante a extração do arquivo zip.  Tente novamente.",failed_uploading:"Falha no upload: %{error_info}",loading_file:"Erro ao carregar conteúdo do arquivo.  Tente novamente.",server_returned_invalid_status:"O servidor parou de retornar um status válido",server_unresponsive:"O servidor parou de responder às solicitações de status",unexpected_response:"não retornou a resposta esperada",update_file_failed:"Falha na atualização do arquivo, tente novamente",uploading:"Erro no upload",uploading_zip:"Ocorreram erros durante o carregamento do ficheiro zip."},links:{add_files:"Adicionar arquivos"},messages:{access_denied:"Não é possível ler o conteúdo desta pasta.",done_uploading:"Upload concluído",error_count:{one:"1 erro",other:"%{count} erros"},extraction_complete:"Extração concluída!  Atualizando a estrutura de arquivo...",finalizing:"Concluindo",folder_empty:"Nada nesta pasta",loading_files:"Carregando arquivos...",no_files_selected:"Nenhum arquivo válido selecionado",queued:"Na fila",updating_file:"Atualizando arquivo...",upload_complete:"Upload concluído",uploading:"Realizando upload",uploading_files:{one:"Fazendo upload de 1 arquivo...",other:"Fazendo upload de %{count} arquivos..."}},prompts:{delete_file:"Tem certeza de que deseja excluir este arquivo?",delete_folder:"Tem certeza de que deseja excluir esta pasta e todo seu conteúdo?",duplicate_filenames:"Já existem ficheiros com os seguintes nomes nesta pasta. Deseja substituí-los ou mudar o nome dos novos ficheiros para nomes exclusivos?",extract_zip:"Este arquivo é um arquivo zip.  Deseja extrair seu conteúdo nesta pasta?"},titles:{click_and_drag:"Clique e arraste para mover a pasta para outra pasta",drag_to_move:"Arrastar para mover a uma pasta diferente",extracting:"Extraindo arquivos na pasta",file_uplaods_queue:"Fila de upload de arquivo",lock_file:"Travar arquivo",lock_folder:"Travar pasta"},update_file:"Atualizar arquivo",upload_error:"Ocorreu um erro durante o carregamento do ficheiro",warnings:{file_uploaded_without_response:"O upload do arquivo foi realizado, mas o servidor não responde.  Recarregue a página para confirmar."}}},"pt-BR":{errors:{failed:"Falhou"},files:{alts:{file:"Arquivo",folder:"Pasta",folder_locked:"Pasta travada",locked_file:"Arquivo travado"},buttons:{update_file:"Atualizar arquivo"},cancel:"Cancelar",errors:{extracting:"Houve erros durante a extração do arquivo zip.  Tente novamente.",failed_uploading:"Falha no upload: %{error_info}",loading_file:"Erro ao carregar conteúdo do arquivo.  Tente novamente.",server_returned_invalid_status:"O servidor parou de retornar um status válido",server_unresponsive:"O servidor parou de responder às solicitações de status",unexpected_response:"não retornou a resposta esperada",update_file_failed:"Falha na atualização do arquivo, tente novamente",uploading:"Erro no upload",uploading_zip:"Houve erros durante o upload do arquivo zip."},links:{add_files:"Adicionar arquivos"},messages:{access_denied:"Não é possível ler o conteúdo desta pasta.",done_uploading:"Upload concluído",error_count:{one:"1 erro",other:"%{count} erros"},extraction_complete:"Extração concluída!  Atualizando a estrutura de arquivo...",finalizing:"Concluindo",folder_empty:"Nada nesta pasta",loading_files:"Carregando arquivos...",no_files_selected:"Nenhum arquivo válido selecionado",queued:"Na fila",updating_file:"Atualizando arquivo...",upload_complete:"Upload concluído",uploading:"Realizando upload",uploading_files:{one:"Fazendo upload de 1 arquivo...",other:"Fazendo upload de %{count} arquivos..."}},prompts:{delete_file:"Tem certeza de que deseja excluir este arquivo?",delete_folder:"Tem certeza de que deseja excluir esta pasta e todo seu conteúdo?",duplicate_filenames:"Arquivos com os seguintes nomes já existem nesta pasta. Você deseja substituí-los ou renomear os novos arquivos com nomes exclusivos?",extract_zip:"Este arquivo é um arquivo zip.  Deseja extrair seu conteúdo nesta pasta?"},titles:{click_and_drag:"Clique e arraste para mover a pasta para outra pasta",drag_to_move:"Arrastar para mover a uma pasta diferente",extracting:"Extraindo arquivos na pasta",file_uplaods_queue:"Fila de upload de arquivo",lock_file:"Travar arquivo",lock_folder:"Travar pasta"},update_file:"Atualizar arquivo",upload_error:"Ocorreu um erro durante o envio do seu arquivo",warnings:{file_uploaded_without_response:"O upload do arquivo foi realizado, mas o servidor não responde.  Recarregue a página para confirmar."}}},ru:{errors:{failed:"Ошибка"},files:{alts:{file:"Файл",folder:"Папка",folder_locked:"Заблокированная папка",locked_file:"Заблокированный файл"},buttons:{update_file:"Обновить файл"},cancel:"Отменить",errors:{extracting:"При извлечении ZIP-файла произошли ошибки.  Повторите попытку.",failed_uploading:"Ошибка загрузки: %{error_info}",loading_file:"Ошибка загрузки содержания файла.  Повторите попытку.",server_returned_invalid_status:"Сервер прекратил возвращать действительное состояние",server_unresponsive:"Сервер прекратил отвечать на запросы статуса",unexpected_response:"ожидаемый ответ не получен",update_file_failed:"Ошибка загрузки файла, повторите попытку",uploading:"Ошибка загрузки",uploading_zip:"Произошло несколько ошибок при загрузке архива"},links:{add_files:"Добавить файлы"},messages:{access_denied:"Чтение содержимого этой папки невозможно.",done_uploading:"Загрузка завершена",error_count:{one:"1 ошибка",other:"%{count} ошибки(ок)"},extraction_complete:"Извлечение завершено!  Загрузка структуры файла...",finalizing:"Завершение",folder_empty:"Эта папка пустая",loading_files:"Загрузка файлов...",no_files_selected:"Допустимые файлы не выбраны",queued:"Постановка в очередь",updating_file:"Обновление файла...",upload_complete:"Загрузка завершена",uploading:"Загрузка",uploading_files:{one:"Загрузка 1 файла...",other:"Загрузка %{count} файлов..."}},prompts:{delete_file:"Действительно хотите удалить этот файл?",delete_folder:"Удалить эту папку и все ее содержимое?",duplicate_filenames:"Файлы с такими именами уже существуют в этой папке. Заменить их или переименовать новые файлы, используя эти уникальные имена?",extract_zip:"Это ZIP-файл.  Извлечь его содержимое в эту папку?"},titles:{click_and_drag:"Щелкните и перетащите для переноса этой папки в другую папку",drag_to_move:"Перетащите для переноса в другую папку",extracting:"Извлечение файлов в папку",file_uplaods_queue:"Очередь загрузки файлов",lock_file:"Заблокировать файл",lock_folder:"Заблокировать папку"},update_file:"Обновить файл",upload_error:"Произошла ошибка во время загрузки вашего файла",warnings:{file_uploaded_without_response:"Файлы могут быть загружены, но сервер не смог ответить.  Перезагрузите страницу для подтверждения."}}},tr:{errors:{failed:"Başarısız"},files:{alts:{file:"Dosya",folder:"Klasör",folder_locked:"Kilitli Klasör",locked_file:"Kilitli Dosya"},buttons:{update_file:"Dosyayı Güncelle"},cancel:"İptal",errors:{extracting:"Sıkıştırılmış dosya açılırken hata oluştu. Lütfen tekrar deneyin.",failed_uploading:"Yükleme başarısız: %{error_info}",loading_file:"Dosya İçeriklerini Yüklemede Hata. Lütfen tekrar deneyin.",server_returned_invalid_status:"Çalışan duruma geçerken sunucu durdu",server_unresponsive:"Durum isteklerine cevap verirken sunucu durdur",unexpected_response:"beklenen yanıta geri dönülemedi",update_file_failed:"Dosya Güncelleme Başarıszı, lütfen tekrar deneyin",uploading:"Yükleme Hatası",uploading_zip:"zip dosyasını yüklerken hata oluştu."},links:{add_files:"Dosyaları Ekle"},messages:{access_denied:"Bu klasörün içindekileri okuyamazsınız.",done_uploading:"Yükleme tamamlandı",error_count:{one:"1 Hata",other:"%{count} Hata"},extraction_complete:"Dosyaların çıkarılması tamamlandı! Güncelleniyor...",finalizing:"Sonlandırılıyor",folder_empty:"Bu Klasör Boş",loading_files:"Dosyalar Yükleniyor...",no_files_selected:"Geçerli dosya seçilmedi",queued:"Sıraya Konuldu",updating_file:"Dosya Güncelleniyor...",upload_complete:"Yükleme tamamlandı",uploading:"Yükleniyor",uploading_files:{one:"1 Dosya Yükleniyor...",other:"%{count} Dosya Yükleniyor..."}},prompts:{delete_file:"Bu dosyayı silmek istediğinize emin misiniz?",delete_folder:"Bu klasörü ve içindeki herşeyi silmek istediğinize emin misiniz?",duplicate_filenames:"Aşağıdaki isimli dosyalar zaten bu klasörde var. Onların üzerine yazmak mı yoksa dosyalara yeni isimler vermek mi istersiniz?",extract_zip:"Bu dosya sıkıştırılmış bir dosya. İçindekileri bu klasöre çıkarmak ister misiniz?"},titles:{click_and_drag:"Klasörü başka bir klasöre taşımak için tıklayıp sürükleyin",drag_to_move:"Başka bir klasöre taşımak için sürükleyin",extracting:"Dosyalar Klasöre Çıkarılıyor",file_uplaods_queue:"Dosya Yükleme Kuyruğu",lock_file:"Dosyayı Kilitle",lock_folder:"Klasörü Kilitle"},update_file:"Dosyayı Güncelle",upload_error:"Dosyanın yüklenmesinde hata meydana geldi",warnings:{file_uploaded_without_response:"Dosya yüklenmiş olabilir fakat sunucu cevap vermiyor. Onaylamak için sayfayı yeniden yükleyin."}}},zh:{errors:{failed:"已失败"},files:{alts:{file:"文件",folder:"文件夹",folder_locked:"已锁定文件夹",locked_file:"已锁定文件"},buttons:{update_file:"更新文件"},cancel:"取消",errors:{extracting:"提取压缩文件时出错。请重试。",failed_uploading:"上传失败: %{error_info}",loading_file:"加载文件内容出错。请重试。",server_returned_invalid_status:"服务器停止返回有效状态",server_unresponsive:"服务器停止响应状态请求",unexpected_response:"未得到预期响应",update_file_failed:"更新文件失败，请重试",uploading:"上传出错",uploading_zip:"上传 zip 文件时出错。"},links:{add_files:"添加文件"},messages:{access_denied:"您无法阅读此文件夹的内容。",done_uploading:"完成上传",error_count:{one:"%{count} 个错误",other:"%{count} 个错误"},extraction_complete:"提取完成！正在更新文件结构...",finalizing:"完成",folder_empty:"此文件夹中没有内容",loading_files:"正在加载文件...",no_files_selected:"未选择有效的文件",queued:"已排队",updating_file:"正在更新文件...",upload_complete:"完成上传",uploading:"正在上传",uploading_files:{one:"正在上传 %{count} 个文件...",other:"正在上传 %{count} 个文件..."}},prompts:{delete_file:"是否确定要删除此文件?",delete_folder:"是否确定要删除此文件夹及其所有内容?",duplicate_filenames:"此文件中已存在以下名称的文件。是否要替换它们，或者用独特的名称重命名新文件?",extract_zip:"此文件为压缩文件。是否要提取其内容到此文件夹?"},titles:{click_and_drag:"单击并拖动可将文件夹移动到其它文件夹",drag_to_move:"拖动以移动到其它文件夹",extracting:"正在提取文件到文件夹",file_uplaods_queue:"文件上传队列",lock_file:"锁定文件",lock_folder:"锁定文件夹"},update_file:"更新文件",upload_error:"上传您的文件时出错",warnings:{file_uploaded_without_response:"文件可能已上传，但服务器没有响应。请重新加载页面以确认。"}}}}})
}),define("full_files",["underscore","INST","i18n!files","jquery","str/htmlEscape","compiled/tinymce","tinymce.editor_box","jqueryui/draggable","jquery.ajaxJSON","jquery.doc_previews","jquery.inst_tree","jquery.instructure_date_and_time","jquery.instructure_forms","jqueryui/dialog","jquery.instructure_misc_helpers","jquery.instructure_misc_plugins","jquery.keycodes","jquery.loadingImg","jquery.scrollToVisible","jquery.templateData","media_comments","vendor/jquery.scrollTo","jqueryui/droppable","jqueryui/progressbar","vendor/scribd.view"],function(e,t,i,a,n){"string"==typeof ENV.contexts&&(ENV.contexts=a.parseJSON(ENV.contexts));var o={},r=[];!function(){var s=a("#files_content"),d=a("#swfupload_holder"),u=a("#add_file_link"),c=a("#files_structure"),f=a("#files_structure_list");a.extend(o,{canManageAContext:!1,init:function(){s=a("#files_content"),d=a("#swfupload_holder"),u=a("#add_file_link"),c=a("#files_structure"),f=a("#files_structure_list"),s.prepend(d),o.clearDataCache.cacheIndex=0;for(var e in ENV.contexts){var t={context:ENV.contexts[e],context_name:ENV.contexts[e].name,context_string:ENV.contexts[e].asset_string};if(ENV.contexts[e].asset_string){var p=ENV.contexts[e].asset_string.replace(/_\d+$/,"");t[p]=ENV.contexts[e]}r.push([t,{}])}for(var e in r)if(r[e]){var _=r[e][0],p=null,h=null,g=null;for(var m in _)_[m]&&"context_string"!=m&&"context_name"!=m&&"context"!=m&&(p=m,h=_[m].name,g=_[m]);r[e][0].context_string=p+"_"+_[p].id,r[e][0].context_name=h,r[e][0].context=g,g&&g.permissions&&g.permissions.manage_files&&(o.canManageAContext=!0)}s.append(a("#drag_n_drop_panel")),s.append(a("#content_templates .content_panel").hide()),a.handlesHTML5Files&&s.bind("dragenter dragover",function(e){e.preventDefault(),e.stopPropagation();var t=o.currentItemData();t&&"folder"==t.mime_class&&(a(this).addClass("file_drag"),a("#drag_n_drop_panel").css("top",s.scrollTop()))}).bind("dragleave dragout",function(){a(this).closest(".drag_panel").length||a(this).removeClass("file_drag")}).bind("drop",function(e){var t=e.originalEvent.dataTransfer;if(t){var r=o.currentItemData();if(e.preventDefault(),e.stopPropagation(),a(this).removeClass("file_drag"),!r||"folder"!=r.mime_class)return;for(var s=[],d=t.files,u=0;u<d.length;u++)d[u]&&d[u].size>0&&s.push(d[u]);if(0===s.length)return void alert(i.t("messages.no_files_selected","No valid files were selected"));var c=!1;if(1==s.length&&s[0].type.match(/application\/(x-)?zip/)&&(c=confirm(i.t("prompts.extract_zip","This file is a zip file.  Do you want to extract its contents into this folder?"))),c){var f=s[0];r.context_string;var p=a("."+r.context_string+"_zip_import_url").attr("href"),_={folder_id:r.id,zip_file:s[0],format:"json"},h=a("<div/>");h.append("Uploading and extracting <b>"+n(f.name)+"</b><br/>to "+n(r.name)+"..."),h.append("<div class='progress'/>");var g=h.find(".progress");g.css("margin","10px"),g.progressbar(),h.dialog({title:i.t("titles.extracting","Extracting Files into Folder"),close:function(){h.data("closed",!0),setTimeout(function(){h.detach()},500)}});var m=function(e){h.text(i.t("errors.extracting","There were errors extracting the zip file.  Please try again."));var t=a("<ul/>");for(var n in e){var o=e[n],r=a("<li/>");r.text(o),t.append(r)}h.append(t)},v=function(e){var t=a("#file_context_links ."+r.context_string+"_zip_import_status_url").attr("href");t=a.replaceTags(t,"id",e),a.ajaxJSON(t,"GET",{},function(t){var a=t.zip_file_import;h.data("closed")||(a&&a.data&&a.data.errors?m(a.data.errors):a&&"imported"==a.workflow_state?(g.progressbar("value",100),h.append(i.t("messages.extraction_complete","Extraction complete!  Updating...")),o.refreshContext(r.context_string,function(){h.dialog("close")})):a?a&&"failed"==a.workflow_state?m([]):(v.errorCount=0,setTimeout(function(){v(e)},2e3),g.progressbar("value",100*(a.progress||0))):(v.blankCount=v.blankCount||0,v.blankCount++,v.blankCount>30?m([i.t("errors.server_returned_invalid_status","The server stopped returning a valid status")]):setTimeout(function(){v(e)},2e3)))},function(){v.errorCount=v.errorCount||0,v.errorCount++,v.errorCount>5?m([i.t("errors.server_unresponsive","The server stopped responding to status requests")]):setTimeout(function(){v(e)},2e3)})};a.ajaxFileUpload({url:p,data:_,method:"POST",success:function(e){zip_import_id=e.zip_file_import.id,v(zip_import_id)},error:function(){h.text(i.t("errors.uploading_zip","There were errors uploading the zip file."))}})}else{var r=o.currentItemData(),y=[];for(u in s)y.push(s[u].name);o.preflight(r.id,r.context_string,y,function(e){for(u in s)s[u].duplicate_handling=e},function(){for(var e in s)l.queueAjaxUpload(s[e])},function(){})}return!1}})},preflight:function(e,t,o,r,l,s){var d={folder_id:e,context_code:t,filenames:o};a.ajaxJSON("/files/preflight","GET",d,function(e){if(e.duplicates&&e.duplicates.length>0){var t=a("#duplicate_filename_dialog");t.find(".duplicate_filename_prompt").text(i.t("prompts.duplicate_filenames","Files with the following names already exist in this folder. Do you want to replace them, or rename the new files with unique names?"));var o="";for(idx in e.duplicates)o+="<span class='duplicate_filename'>"+n(e.duplicates[idx])+"</span>";t.find(".duplicate_filenames").html(o),t.dialog({title:"",width:500}),t.find("button").unbind("click"),t.find(".cancel_button").click(function(){s(),t.dialog("close")}),t.find(".rename_button").click(function(){r("rename"),l(),t.dialog("close")}),t.find(".overwrite_button").click(function(){r("overwrite"),l(),t.dialog("close")})}else l()},function(){s()})},context_page_view_ids:{},updatePageView:function(){},viewInlinePingUrl:function(e,t){var i=a("#file_context_links ."+e+"_inline_view_attachment_url").attr("href");return i=a.replaceTags(i,"id",t)},scribdRenderUrl:function(e,t){var i=a("#file_context_links ."+e+"_scribd_render_url").attr("href");return i=a.replaceTags(i,"id",t)},selectFolder:function(e){if(o.selectFolder.forceRefresh||!e.hasClass("active-node")&&!e.hasClass("active-leaf")){o.selectFolder.forceRefresh=!1;for(var t=e;t.parent("ul").parent("li").length>0;)t=t.parent("ul").parent("li"),o.expandFolder(t);return e.children(".text:visible:first").click(),0===c.find("li.node.active-node,li.leaf.active-leaf").length&&c.find("li.node:visible:first").children(".text:visible:first").click(),o.currentItemData()?void(!o.currentItemData().includes_files&&o.currentItemData().full_name&&o.getFilesForFolder(o.currentItemData())):void setTimeout(function(){o.selectFolder(e)},250)}},deleteAttachmentIds:function(e){for(var t in e){var i=e[t],n=a("#files_structure .file_"+i);n.prev("li.separator").remove(),n.remove(),o.refreshView(),o.updateQuota()}},gettingFiles:{},getFilesForFolder:function(t,i){var n=t.context_string+"_"+t.id;if(!o.gettingFiles[n]){var r=c.find("li.folder_"+t.id);if(!r.hasClass("folder_locked")||t.context&&t.context.permissions&&t.context.permissions.manage_files){if(t.false_folder)return void o.refreshContext(t.context_string,function(){o.getFilesForFolder(t,i)});o.gettingFiles[n]=!0;var l=a.replaceTags(a("#file_context_links ."+t.context_string+"_folder_url").attr("href"),"id",t.id);a.ajaxJSON(l,"GET",{},function(r){o.gettingFiles[n]=!1;var l=r.actual_folder.folder;l.includes_files=!0,o.updateFolder(t.context_string,{folder:l,already_in_place:!0},!1),r.files=e.sortBy(r.files,function(e){return(e.attachment.display_name||"").toLowerCase()});for(var d in r.files){var f=r.files[d].attachment;f&&o.updateFile(t.context_string,{attachment:f,definitely_new:!0},!1)}c.find(".folder_"+l.id).triggerHandler("files_load");var p=s.find(".message.no_content:visible").length>0;(i!==!1||p)&&(i&&a.isFunction(i)?i(r):o.refreshView()),u.triggerHandler("show")},function(){o.gettingFiles[n]=!1})}}},expandFolder:function(e){f[0]&&f[0].ExpandNode&&f[0].ExpandNode(a("#files_structure_list"),e)},collapseFolder:function(e){f[0]&&f[0].CollapseNode&&f[0].CollapseNode(a("#files_structure_list"),e)},fullPath:function(e){var t=[],i=o.itemData(e);for(t.unshift(i.name.replace(/\//g,"//"));e.parent("ul").parent("li").length>0;)e=e.parent("ul").parent("li"),i=o.itemData(e),t.unshift(i.name.replace(/\//g,"//"));return t.join("/")},selectNodeFromPath:function(e){var t=o.nodeFromPath(e);o.selectFolder(t);var i=function(){t.unbind("files_load",i),t.hasClass("active-node")&&o.selectNodeFromPath(e)};t.bind("files_load",i),0===c.find(".node.active-node,.leaf.active-leaf").length&&o.selectFolder(c.find(".node:visible:first"))},nodeFromPath:function(e){var t=e.replace(/\/\//g,"\\").split("/"),i=c,n=!0;for(var o in t){var r=t[o].replace(/\\\\/g,"/"),l=!1;n&&i.children("ul").children("li").each(function(){return a(this).children(".text.name").text()==r?(i=a(this),l=!0,!1):void 0}),n=l}return i},draggable_helper:function(e,t){if(!a(this).hasClass("folder_item")){var i=t.width();return t.clone().css("backgroundColor","#eeeeee").css("height",50).css("borderWidth",1).css("borderStyle","solid").css("borderColor","#ccc").css("width",i-50)}t=a(this);var n=t.clone().attr("id","file_drag");n.find(".header .sub_header").remove(),n.find(".header").append("<div class='sub_header'/>"),n.find(".header .sub_header").html("&nbsp;"),n.addClass("file_drag"),n.find(".links").remove(),n.css("width",100);var o=a("<ul/>");return o.addClass("files_content"),o.append(n),o.addClass("true-draggable"),o.css("width",200),o.css("height",50),a("#content").append(o),o},updateQuota:function(){if(a("#quota").length){var e=a(".quota_url").attr("href");a.ajaxJSON(e,"GET",{},function(e){a("#quota").text(e.quota),a("#quota_used").text(e.quota_used)},function(){})}}}),a.extend(o,{draggable_options:{handle:".draggable.item_icon",distance:5,helper:o.draggable_helper,start:function(){s.addClass("dragging")},stop:function(){setTimeout(function(){s.removeClass("dragging")},500)}},droppable_options:{accept:".file,.folder",hoverClass:"drop_target",tolerance:"pointer",drop:function(e,t){if(a(t.helper).hasClass("true-draggable")){var i=a(t.draggable),n=o.itemData(i),r=a(this),l=o.itemData(a(this).parent(".folder"));if(l=l||o.itemData(a(this)),c.loadingImage(),i.hasClass("file"))if(a(t.helper).hasClass("copy_drag")){var s=a("#file_context_links ."+l.context_string+"_attachments_url").attr("href"),d={"attachment[source_attachment_id]":n.id,"attachment[folder_id]":l.id};a.ajaxJSON(s,"POST",d,function(e){c.loadingImage("remove"),o.updateFile(l.context_string,e,!1),o.selectFolder(r),o.refreshView()},function(){c.loadingImage("remove")})}else{var s=a("#file_context_links ."+l.context_string+"_attachment_url").attr("href");s=a.replaceTags(s,"id",n.id),a.ajaxJSON(s,"PUT",{"attachment[folder_id]":l.id},function(e){c.loadingImage("remove"),o.updateFile(l.context_string,e,!1),o.selectFolder(r),o.refreshView()},function(){c.loadingImage("remove")})}else if(a(t.helper).hasClass("copy_drag")){var s=a("#file_context_links ."+l.context_string+"_folders_url").attr("href"),d={"folder[source_folder_id]":n.id,"folder[parent_folder_id]":l.id};a.ajaxJSON(s,"POST",d,function(){c.loadingImage("remove"),o.refreshContext(l.root_context_string)},function(){c.loadingImage("remove")})}else{var s=a("#file_context_links ."+l.context_string+"_folder_url").attr("href");s=a.replaceTags(s,"id",n.id),a.ajaxJSON(s,"PUT",{"folder[parent_folder_id]":l.id},function(){c.loadingImage("remove"),o.refreshContext(n.root_context_string)},function(){c.loadingImage("remove")})}}},over:function(e,t){a(t.helper).hasClass("true-draggable")||a(this).removeClass("drop_target");var i=o.itemData(a(t.draggable)),r=o.itemData(a(this).parent(".folder"));r=r||o.itemData(a(this)),a(t.helper).find(".header .sub_header").text("move to "+r.name),i&&r&&i.context_string!=r.context_string&&(a(t.helper).addClass("copy_drag"),a(t.helper).find(".header .sub_header").html("<strong>copy</strong> to "+n(r.name)))},out:function(e,t){a(t.helper).removeClass("copy_drag"),a(t.helper).find(".header .sub_header").html("&nbsp;")}},breadcrumb:function(){for(var e=location.hash.substring(1).replace(/\/\//g,"\\").split("/"),t=a("<div/>"),i=[],n=0;n<e.length-1;n++){var o=a("<a/>");i.push(e[n].replace(/\\\\/g,"/")),o.attr("href","#"+i.join("/")),o.text(e[n]),t.append(o)}return t},refreshContext:function(t,i){if(o.refreshContext.refreshing=o.refreshContext.refreshing||{},!o.refreshContext.refreshing[t]){o.refreshContext.refreshing[t]=!0;var n=a("#file_context_links ."+t+"_attachments_url").attr("href");a.ajaxJSON(n,"GET",{},function(n){o.clearDataCache(),o.refreshContext.refreshing[t]=!1;var l=c.scrollTop(),s=null;for(var d in r){var u=r[d][0];if(u.context_string==t){s=u.context_name,r[d][0].context.includes_files=!0;for(var p in n.folders)for(var _ in r[d][1].folders)r[d][1].folders[_].id==n.folders[p].id&&(n.folders[p].includes_files=r[d][1].folders[_].includes_files);n.files=n.files||[];for(var p in r[d][1].files)n.files.push(r[d][1].files[p]);r[d][1]=n}}var h=a("#files_structure > ul > li.context."+t).filter(":first");0===h.length&&(h=null);var g=[],m=!1;if(h){m=h.hasClass("open");var v=h.find("li.node.open");v.each(function(){g.push(o.itemData(a(this)).id)})}var y=null;for(var d in n.contexts)for(var p in n.contexts[d])y||(y=p,s=n.contexts[d][p].name);var b=null;!n.folders&&n[0]&&n[0][1]&&n[0][1].folders&&(n.folders=n[0][1].folders);for(var d in n.folders)!b&&n.folders[d].folder&&null===n.folders[d].folder.parent_folder_id&&(b=n.folders[d].folder);var x=h;x&&0!==x.length||(x=c.find(".folder_blank").clone(!0).removeClass("folder_blank")),x.children(".name").text(s),x.children(".id").text(b.id),x.addClass("context folder folder_"+b.id+" "+t),x.find("li").addClass("to_be_removed");var k=x.children("ul"),w=function(e,t){for(var i in n.folders)if(t.id&&n.folders[i].folder.parent_folder_id==t.id){var a=e.children("ul").children(".folder_"+n.folders[i].folder.id);0===a.length&&(a=c.find(".folder_blank").clone(!0).removeClass("folder_blank"),a.addClass("folder folder_"+n.folders[i].folder.id),a.children(".id").text(n.folders[i].folder.id),a.children(".name").text(n.folders[i].folder.name)),a.removeClass("to_be_removed"),w(a,n.folders[i].folder),0===a.parents("body").length&&e.children("ul").append(a.show())}};n.folders=e.sortBy(n.folders,function(e){return(e.folder.name||"").toLowerCase()});for(var d in n.folders)if(n.folders[d].folder.parent_folder_id==b.id){var F=k.find(".folder_"+n.folders[d].folder.id);0===F.length&&(F=c.find(".folder_blank").clone(!0).removeClass("folder_blank"),F.addClass("folder folder_"+n.folders[d].folder.id),F.children(".name").text(n.folders[d].folder.name),F.children(".id").text(n.folders[d].folder.id)),F.removeClass("to_be_removed"),w(F,n.folders[d].folder),0===F.parents("body").length&&k.append(F.show())}var S={};for(var d in n.groups)S[(n.groups[d].group||n.groups[d].course_assigned_group).category]=!0;for(var d in S){var D=c.find(".folder_blank").clone(!0).removeClass("folder_blank");D.fillTemplateData({data:{name:d}}),D.addClass("groups");for(var p in n.groups){var C=n.groups[p].group||n.groups[p].course_assigned_group;if(C.category==d){var U=null;for(var _ in n.folders)U||null!==!n.folders[_].folder.parent_folder_id||(U=n.folders[_].folder);if(U){var E=D.children("ul").children(".group_"+C.id);0===E.length&&(E=c.find(".folder_blank").clone(!0).removeClass("folder_blank"),E.addClass("group context folder folder_"+U.id),E.addClass("group_"+C.id),E.fillTemplateData({data:{name:C.name,id:U.id}})),E.removeClass("to_be_removed"),w(E,U),0===E.parents("body").length&&D.children("ul").append(E.show())}}}k.append(D.show())}var z=!1;x.find(".to_be_removed").remove(),c.find("#files_structure_list > .folder").each(function(){var e=o.itemData(a(this));e&&e.root_context_string==t&&(a(this)[0]!=x[0]&&(a(this).after(x.show()),a(this).remove()),z=!0)}),z||c.find("#files_structure_list").append(x.show()),x.children(".text").droppable(o.droppable_options),x.find(".folder > .text").droppable(o.droppable_options);for(var d in g)o.expandFolder(x.find(".folder_"+g[d]));m&&o.expandFolder(x),c.scrollTop(l),f.instTree.InitInstTree(f),c.find("li.node.active-node,li.leaf.active-leaf").filter(":first").children(".name").click(),i&&a.isFunction(i)&&i()},function(){o.refreshContext.refreshing[t]=!1})}},refreshContentListeners:function(){var e=o.currentContext();e&&e.permissions&&e.permissions.manage_files&&s.find(".folder.draggable_droppable").droppable(o.droppable_options),o.canManageAContext&&(s.find(".folder.draggable_droppable").draggable(o.draggable_options),s.find(".file").draggable(o.draggable_options))},nodeClumpSize:25,addScrollCatcher:function(){var e=function(){var e=s.scrollTop(),t=0;s.find(".catcher").remove();var i=s.find(".folder_item:visible:last"),a=i.data("node");if(a){a=a.next();for(var n=!1;a.length>0;)a.hasClass("separator")||(t++,t<=o.nodeClumpSize?o.addContentItem(a):n=!0),a=a.next();o.refreshContentListeners(),n&&o.addScrollCatcher()}s.scrollTop(e)},t=a("<li class='catcher'>&nbsp;</li>");o.watchingScroll||(s.bind("scroll",function(){var t=s.find(".catcher:visible:first");if(t.length>0){var i=t.offset().top,a=s.offset().top+s.height();a>i&&e()}}),o.watchingScroll=!0),s.append(t)},addContentItem:function(t,n){var l=o.itemData(t);if(l&&l.id){var d=!1;if(t.hasClass("node")){var u=s.find(".folder_"+l.id);if(0===u.length){var c=a.replaceTags(a("."+l.context_string+"_folder_url").attr("href"),"id",l.id);d=!0,u=a("#content_templates .folder:first").clone(!0),n&&u.hide(),u.fillTemplateData({data:l}).data({node:t,parent_node:t.parent().parent()}).addClass("folder_"+l.id),u.find(".rename_item_link,.delete_item_link,.folder_url").attr("href",c),u.find(".item_icon.draggable").attr("title",i.t("titles.click_and_drag","Click and drag to move folder to another folder"))}if(u.toggleClass("editable_folder_item",!(t.hasClass("context")||!(l.context&&l.context.permissions&&l.context.permissions.manage_files||l.permissions&&l.permissions.update))),u.removeClass("to_be_removed"),u.find(".item_icon").toggleClass("draggable",u.hasClass("editable_folder_item")),u.find(".item_icon").attr("alt",i.t("alts.folder","Folder")).attr("src",a("#content_blank_icon").attr("src")),l&&l.currently_locked&&u.find(".item_icon").attr("alt",i.t("alts.folder_locked","Locked Folder")).attr("src",a("#content_locked_icon").attr("src")),u.find(".lock_item_link").showIf(!l.currently_locked),u.find(".unlock_item_link").showIf(l.currently_locked),u.toggleClass("folder_locked",!(!l||!l.currently_locked)).toggleClass("draggable_droppable",t.hasClass("folder")&&!t.hasClass("context")),d){var f=e.filter(r[0][1].folders,function(e){return e.folder.parent_folder_id===l.parent_folder_id}),p=e.find(f,function(e){return e.folder.name==l.name}),_=e.indexOf(f,p);$target=s.find("li.folder_item.folder").eq(_),$files=s.children("li.folder_item.file"),$target.length?$target.before(u):$files&&$files.length?$files.first().before(u):s.append(u)}}else{var u=s.find(".file_"+l.id);if(0===u.length){d=!0,u=a("#content_templates .file:first").clone(!0),n&&u.hide();var h=a.replaceTags(a("#file_context_links ."+l.context_string+"_attachment_url").attr("href"),"id",l.id),g=a.replaceTags(a("#file_context_links ."+l.context_string+"_download_attachment_url").attr("href"),"id",l.id);u.fillTemplateData({data:l}).data({parent_node:t.parent().parent(),node:t}).addClass(l.mime_class+" file_"+l.id),u.find(".attachment_url").attr("href",h),u.find(".download_url").attr("href",g),u.find(".item_icon.draggable").attr("title","Click and drag to move file to another folder")}if(u.toggleClass("editable_folder_item",!!(l.context&&l.context.permissions&&l.context.permissions.manage_files||l.permissions&&l.permissions.update)).removeClass("to_be_removed").find(".item_icon").attr({alt:i.t("alts.file","File"),src:a("#content_blank_icon").attr("src")}),l&&l.currently_locked&&u.find(".item_icon").attr({alt:i.t("alts.locked_file","Locked File"),src:a("#content_locked_icon").attr("src")}),u.find(".lock_item_link").showIf(!l.currently_locked),u.find(".unlock_item_link").showIf(l.currently_locked),u.find(".preview_item_link").showIf(l.scribd_doc||l.content_type.match(/image/)||l.content_type.match(/(video|audio)/)&&l.media_entry_id),u.find(".edit_item_content_link_holder").showIf(u.hasClass("editable_folder_item")&&"User"!=l.context_type&&(u.hasClass("text")||u.hasClass("html")||u.hasClass("code"))),u.find(".item_icon").toggleClass("draggable",u.hasClass("editable_folder_item")),d){var m=e.filter(r[0][1].files,function(e){return e.attachment.folder_id===l.folder_id}),v=e.find(m,function(e){return e.attachment.display_name===l.display_name}),_=e.indexOf(m,v);$target=s.find("li.folder_item.file").eq(_),$target.length?$target.before(u):s.append(u)}}return d}},updateFile:function(t,i,n){o.clearDataCache();var l=a.underscore(i.attachment.context_type)+"_"+i.attachment.context_id;for(var s in r){var d=r[s]&&(r[s][0].context_string==t||r[s][0].context_string==l);if(d){var u=!1,p=!1;if(!i.definitely_new)for(var _ in r[s][1].files){var h=r[s][1].files[_].attachment;h.id==i.attachment.id&&(r[s][1].files[_]=i,c.find(".file_"+h.id).each(function(){var e=o.itemData(a(this).parent("ul").parent("li"));e.id==i.attachment.folder_id?(a(this).fillTemplateData({data:{name:i.attachment.display_name}}),i.attachment.display_name&&a(this).find(".name").attr("title",i.attachment.display_name)):p=!0}),u=!0,p&&c.find(".file_"+h.id).remove())}if(!u||p){u||(i.definitely_new=!1,r[s][1].files.push(i));var g=r[s][1].files;r[s][1].files=e.sortBy(g,function(e){return(e.attachment.display_name||"").toLowerCase()});var m=i.attachment;m.name=m.display_name;var v=c.find(".file_blank").clone(!0).removeClass("file_blank").addClass("file_"+m.id).addClass(m.mime_class).fillTemplateData({data:m});m.name&&v.find(".name").attr("title",m.name);var y=function(){c.find(".folder_"+m.folder_id).children("ul").append(v.show())},b=e.filter(r[s][1].files,function(e){return e.attachment.folder_id===i.attachment.folder_id}),x=e.find(b,function(e){return e.attachment.display_name===i.attachment.display_name}),k=e.indexOf(b,x),w=c.find(".folder_"+m.folder_id).children("ul").find("> li.file").eq(k);w.length?w.before(v.show()):y()}}}n!==!1&&(o.refreshView(i.attachment),f.instTree.InitInstTree(f))},updateFolder:function(e,t,i){o.clearDataCache();var n=a.underscore(t.folder.context_type)+"_"+t.folder.context_id,l=t.already_in_place;t.already_in_place=null;for(var s in r)if(r[s]&&(r[s][0].context_string==e||r[s][0].context_string==n)){var d=!1,u=!1;for(var f in r[s][1].folders){var p=r[s][1].folders[f].folder;p.id==t.folder.id&&(p.includes_files&&(t.folder.includes_files=p.includes_files),r[s][1].folders[f]=t,c.find(".folder_"+p.id).each(function(){var e=o.itemData(a(this).parent("ul").parent("li"));if(e=e||{parent_folder_id:null},e.id==t.folder.parent_folder_id){if(a(this).hasClass("context")||a(this).children(".name").text(t.folder.name).attr("title",t.folder.name),!l){a(this).prev("li.separator").remove();var i=a(this).parent("ul").parent("li"),n=null,r=a(this),s=a(this)[0],d=o.itemData(a(this)).name||"";i.children("ul").children("li:not(.separator)").each(function(){var e=o.itemData(a(this)).name||"",t=a(this),i=t[0];return i!=s&&(!t.hasClass("folder")||d.toLowerCase()<e.toLowerCase())?(n=t,!1):void 0}),n?n.before(r.show()).before("<li class='separator'/>"):i.children("ul").append("<li class='separator'/>").append(r.show())}}else u=!0}),d=!0,u&&c.find(".folder_"+p.id).remove())}(!d||u)&&(o.foldersStillLoading=o.foldersStillLoading||{},o.foldersStillLoading[t.folder.id]=t,o.refreshContext(e),e!=n&&o.refreshContext(n))}i!==!1&&o.refreshView(t.folder)},refreshView:function(e){c.find("li.node.active-node,li.leaf.active-leaf").filter(":first").children(".text:visible:first").click(),e&&e.id&&(s.find(".file_"+e.id).mouseover(),s.find(".folder_"+e.id).mouseover()),u.triggerHandler("show")},currentItemData:function(){return o.itemData(c.find("li.node.active-node,#files_structure li.leaf.active-leaf"))},currentContext:function(){var e=o.currentItemData().context_string;for(var t in r)if(r[t][0].context_string==e)return r[t][0].context;return null},clearDataCache:function(){o.clearDataCache.cacheIndex++},itemData:function(e){var t=e.data("item_data");if(t&&t.cacheIndex==o.clearDataCache.cacheIndex)return t;var t=o.uncachedItemData(e);return t&&(t.cacheIndex=o.clearDataCache.cacheIndex,e.data("item_data",t)),t},uncachedItemData:function(e){if(e.closest("#files_content").length>0)return o.itemData(e.data("node"));var t=e.getTemplateData({textValues:["id"]}).id;for(var i in r){var n=r[i];if(e.hasClass("file")){var l=n[1].files;for(var s in l){var d=l[s].attachment;if(d.id==t)return d.context_string=a.underscore(d.context_type)+"_"+d.context_id,d.root_context_string=n[0].context_string,d.context=n[0].context,d.name=d.display_name,d}}else if(e.hasClass("groups")){if(e.parents("li.context:last").hasClass(n[0].context_string))return res=e.getTemplateData({textValues:["name"]}),res.context_string=n[0].context_string,res.context=n[0].context,res}else if(e.hasClass("folder")){var u=n[1].folders;for(var s in u){var c=u[s].folder;if(c.id==t)return c.context_string=a.underscore(c.context_type)+"_"+c.context_id,c.root_context_string=n[0].context_string,e.hasClass("context")&&(c.name=e.getTemplateData({textValues:["name"]}).name),c.context=n[0].context,c}}else if(e.hasClass("group")){var f=n[1].groups;for(var s in f){var p=f[s].group||f[s].course_assigned_group;if(p.context_string=a.underscore(p.context_type)+"_"+p.context_id,p.root_context_string=n[0].context_string,p.id==t)return p}}}if(e.hasClass("folder")){var n=null;for(var i in r)e.closest(".context").hasClass(r[i][0].context_string)&&(n=r[i]);for(var i in o.foldersStillLoading)if(o.foldersStillLoading[i].folder.id==t){var c=o.foldersStillLoading[i].folder;return c.name=e.getTemplateData({textValues:["name"]}).name,c.context_string=n[0].context_string,c.context=n[0].context,c}if(n){var c={};return c.name=e.getTemplateData({textValues:["name"]}).name,c.id=t,c.context_string=n[0].context_string,c.permissions={read_contents:!0},c.context=n[0].context,c.false_folder=!0,c}}return null}}),a(document).ready(function(){function n(){var e=a("#edit_content_dialog");e.find("button").attr("disabled",!1).filter(".save_button").text(i.t("buttons.update_file","Update File")),e.find("button").attr("disabled",!0).filter(".save_button").text(i.t("messages.updating_file","Updating File..."));var t=o.currentItemData().context_string,n=e.find("textarea"),r=n.data("tinyIsVisible")?n.editorBox("get_code"):n.val();a.ajaxFileUpload({url:e.data("update_url"),method:"PUT",binary:!1,data:{"attachment[uploaded_data]":{fake_file:!0,name:e.data("filename"),content_type:e.data("content_type"),content:r}},success:function(a){e.find("button").attr("disabled",!1).filter(".save_button").text(i.t("buttons.update_file","Update File")),o.updateFile(t,a),e.dialog("close")},error:function(){e.find("button").attr("disabled",!1).filter(".save_button").text(i.t("errors.update_file_failed","Updating File Failed, please try again"))}})}if(o.init(),setInterval(function(){u.triggerHandler("show")},1e3),a(".folder_item").live("mousedown",function(e){e.preventDefault()}),a(".folder_item.ui-draggable").live("mouseover",function(){a(this).find(".item_icon").attr("title",i.t("titles.drag_to_move","Drag to move to a different folder"))}),d.hover(function(){u.css("text-decoration","underline")},function(){u.css("text-decoration","none")}),u.bind("show",function(){var e=u.width(),t=u.height(),i=u.offset(),a=s.offset();i.left=i.left-a.left,i.top=i.top-a.top,d.css({width:e+5,height:t+5,top:i.top-5,left:i.left-5})}),a("#file_uploads_dialog_link").click(function(e){e.preventDefault(),a("#file_uploads").dialog({title:i.t("titles.file_uplaods_queue","File Uploads Queue")})}),setTimeout(function(){c.find(".folder > .text").droppable(o.droppable_options),a("#files_structure_list > li").hide(),f.instTree({autoclose:!1,multi:!1,dragdrop:!1,onExpand:function(e){if(e.hasClass("folder")){var t=o.itemData(e);t&&!t.includes_files&&o.getFilesForFolder(t,!1)}},onCollapse:function(e){e.find(".node.active-node,.leaf.active-leaf").length>0&&e.find(".text:visible:first").click()},onClick:function(e,n){s.find(".content_panel").addClass("to_be_hidden"),s.find(".folder_item").addClass("to_be_removed"),s.find(".catcher").addClass("to_be_removed"),s.find(".file_preview").remove(),s.find(".message").remove();var r=function(){s.find(".content_panel.to_be_hidden").hide(),s.find(".catcher.to_be_removed").remove(),s.find(".folder_item.to_be_removed").remove()},l=o.itemData(n),d=encodeURIComponent(o.fullPath(n));if(location.hash!="#"+d&&location.replace("#"+d),!l.includes_files&&l.full_name&&o.getFilesForFolder(l),l.context_string&&(t&&(t.interaction_context=l.context_string),o.updatePageView(l.context_string)),n.hasClass("node")){var c=a.replaceTags(a("."+l.context_string+"_folder_url").attr("href"),"id",l.id),f=!1,p=a("<li class='message'>"+i.t("messages.folder_empty","Nothing in this Folder")+"</li>");if(n.hasClass("folder"))if(l&&l.permissions&&l.permissions.read_contents){var _=a("#folder_panel");_.find(".rename_item_link,.delete_item_link,.folder_url").attr("href",c),_.find(".breadcrumb").empty().append(o.breadcrumb()),_.toggleClass("editable_content_panel",!!(l.context&&l.context.permissions&&l.context.permissions.manage_files||l.permissions&&l.permissions.update)).toggleClass("addable_content_panel",!!(l.context&&l.context.permissions&&l.context.permissions.manage_files||l.permissions&&l.permissions.update)).toggleClass("downloadable_content_panel",!_.hasClass("editable_content_panel")&&!_.hasClass("addable_content_panel")&&!(!l.permissions||!l.permissions.read_contents)),_.removeClass("to_be_hidden"),_.find(".download_zip,.upload_zip").hide(),(n.hasClass("context")||!(l&&l.permissions&&l.permissions.update))&&_.removeClass("editable_content_panel");var h=a.replaceTags(a("."+l.context_string+"_folder_url").attr("href")+"/download","id",l.id);a(".download_zip_link").attr("href",h),a(".upload_zip_link").attr("href",a("."+l.context_string+"_import_url").attr("href")+"?return_to="+encodeURIComponent(location.href)+"&folder_id="+l.id),l.unlock_at_string=a.datetimeString(l.unlock_at),l.lock_at_string=a.datetimeString(l.lock_at),_.find(".lock_after").showIf(l.lock_at),_.find(".lock_until").showIf(l.unlock_at),_.find(".currently_locked_box").showIf(l.currently_locked),_.find(".lock_item_link").showIf(l.parent_folder_id&&!l.currently_locked),_.find(".unlock_item_link").showIf(l.parent_folder_id&&l.currently_locked),_.find(".download_zip").showIf(l.permissions&&l.permissions.read_contents),_.find(".upload_zip").showIf(l.context&&l.context.permissions&&l.context.permissions.manage_files),_.find(".edit_link").showIf(l.context&&l.context.permissions&&l.context.permissions.manage_files),_.fillTemplateData({data:l}),_.data("node",n),_.show(),u.triggerHandler("show")}else s.find(".content_panel:last").after("<li class='message'>"+i.t("messages.access_denied","You cannot read the contents of this folder.")+"</li>"),f=!0;else if(n.hasClass("groups")){var _=a("#groups_panel"),g=l.context,m=a("."+l.context_string+"_groups_url").attr("href");_.find(".category_name").text(l.name),_.find(".context_name").text(g.name),_.find(".breadcrumb").empty().append(o.breadcrumb()),_.find(".groups_link").attr("href",m),_.removeClass("to_be_hidden"),g&&g.permissions&&g.permissions.read_roster&&_.toggleClass("addable_content_panel",!0),_.show()}if(!f){var v=0,y=n.children("ul").children("li.node,li.leaf").length;r.already_cleared=!0,setTimeout(function(){var e=!1;n.children("ul").children("li.node,li.leaf").each(function(){v++,v<o.nodeClumpSize&&(newItem=o.addContentItem(a(this),!0),newItem&&(e=!0))}),s.find("li.folder_item").show(),y>=o.nodeClumpSize&&o.addScrollCatcher(),e&&o.refreshContentListeners(),(0===n.children("ul").children("li.node,li.leaf").length||n.hasClass("folder")&&!l.includes_files)&&(n.hasClass("folder")&&!l.includes_files&&(p.addClass("no_content"),p.text(i.t("messages.loading_files","Loading Files...")),o.getFilesForFolder(l,function(e){e.files.length>0?o.refreshView():s.find(".message.no_content").remove()
})),0===s.find(".message.no_content").length&&s.append(p)),r()},10)}}else if(n.hasClass("file")){var _=a("#file_panel"),b=null;l.unlock_at_string=a.datetimeString(l.unlock_at),l.lock_at_string=a.datetimeString(l.lock_at),_.find(".lock_after").showIf(l.lock_at),_.find(".lock_until").showIf(l.unlock_at),_.find(".currently_locked_box").showIf(l.currently_locked),_.find(".lock_item_link").showIf(!l.currently_locked),_.find(".unlock_item_link").showIf(l.currently_locked),_.removeClass("to_be_hidden"),_.fillTemplateData({data:l});var x=a.replaceTags(a("#file_context_links ."+l.context_string+"_attachment_url").attr("href"),"id",l.id),k=a.replaceTags(a("#file_context_links ."+l.context_string+"_download_attachment_url").attr("href"),"id",l.id);if(_.find(".breadcrumb").empty().append(o.breadcrumb()),_.find(".attachment_url").attr("href",x).end().find(".download_item_link").attr("href",k),_.removeClass("editable_content_panel"),l&&l.permissions&&l.permissions.update&&_.addClass("editable_content_panel"),_.removeClass("panel_locked"),l&&l.permissions&&l.permissions.download)if(l&&l.permissions&&l.permissions.download&&a.isPreviewable(l.content_type))b=a("#content_templates .file_scribd_preview").clone(!0),b.append("<div id='doc_preview_holder'/>");else if(l&&l.content_type.match(/image/)){b=a("#content_templates .file_image_preview").clone(!0);var w=a.replaceTags(a("#file_context_links ."+l.context_string+"_preview_attachment_url").attr("href"),"id",l.id);b.find("a").attr("href",k),b.find("img").attr("src",a(".preview_loading_image").attr("src")).attr("src",w||"").attr("title",l.display_name)}else if(l&&l.content_type.match(/(video|audio)/)&&l.media_entry_id){b=a("#content_templates .file_media_preview").clone(!0),b.fillTemplateData({data:l});var F=l.content_type.match(/video/)?"video":"audio";b.find(".media_preview").mediaComment("show_inline","maybe",F,k),b.find("a").attr("href",k)}else b=a("#content_templates .file_no_preview").clone(!0),b.fillTemplateData({data:l}),b.find("a").attr("href",k);else _.addClass("panel_locked");if(_.data("node",n),_.show(),b){b.addClass("file_preview"),s.append(b);var S=function(){a("#doc_preview_holder").loadDocPreview({mimeType:l.content_type,attachment_id:l.id,height:"100%",crocodoc_session_url:l.crocodoc_session_url,canvadoc_session_url:l.canvadoc_session_url,scribd_doc_id:l.scribd_doc&&l.scribd_doc.attributes&&l.scribd_doc.attributes.doc_id,scribd_access_key:l.scribd_doc&&l.scribd_doc.attributes&&l.scribd_doc.attributes.access_key,attachment_view_inline_ping_url:o.viewInlinePingUrl(l.context_string,l.id),attachment_scribd_render_url:o.scribdRenderUrl(l.context_string,l.id),attachment_preview_processing:"pending_upload"==l.workflow_state||"processing"==l.workflow_state})};l.canvadoc_session_url||l.crocodoc_session_url?S():l.permissions&&l.permissions.download&&a.isPreviewable(l.content_type)&&S()}a(window).triggerHandler("resize")}r.already_cleared||r()}}),a("#files_structure_list > li.context").show(),1==a("#files_structure_list .context").length&&o.expandFolder(a("#files_structure_list .context"))},500),a(window).bind("resize",function(){var e=c.offset().top,t=a(window).height()-e,i=142,n=a("#section-tabs").height();c.height(Math.max(n,t-i)),s.height(Math.max(n,t-i));var o=s.height(),r=a("#file_panel").outerHeight();a("#doc_preview_holder").height(o-r)}),a("#folder_panel .download_zip").click(function(e){e.preventDefault(),t.downloadFolderFiles(a(this).find(".download_zip_link").attr("href"))}),a(".folder_item .edit_item_content_link").click(function(e){e.preventDefault(),e.stopPropagation();var t=a(this).parents(".folder_item,#file_panel,#folder_panel"),r=o.itemData(t),l=t.find(".download_url").attr("href"),s=t.find(".name:first").text(),d=a("#edit_content_dialog");d.data("update_url",t.find(".rename_item_link").attr("href")).data("content_type",r.content_type||"").data("filename",r.filename||"file_to_update"),d.find(".display_name").text(s),d.find(".loading_message").text("Loading File Contents...").show().end().find(".content").hide(),d.dialog({width:600,height:410,buttons:[{text:i.t("cancel","Cancel"),click:function(){a("#edit_content_dialog").dialog("close")}},{text:i.t("update_file","Update File"),click:n,"class":"btn-primary"}],close:function(){var e=a(this).find("textarea");e.data("tinyIsVisible")&&(e.editorBox("toggle"),e.data("tinyIsVisible",!1))}}),a.ajax({dataType:"json",error:function(){d.find(".loading_message").text(i.t("errors.loading_file","Error Loading File Contents.  Please try again."))},success:function(e){var i=e.body,a=d.find("textarea").val(i),n=a.data("rich_text"),o=a.data("tinyIsVisible");a.css("width","100%"),d.find(".loading_message").hide().end().find(".content").show(),t.hasClass("html")&&(d.css("height","380px"),d.find(".switch_views").show().unbind("click").bind("click",function(e){e.preventDefault(),n?(a.editorBox("toggle"),a.data("tinyIsVisible",!o)):(n=!0,setTimeout(function(){d.find(".html_edit_warning").fadeIn()},250),a.editorBox({tinyOptions:{valid_elements:"*[*]",extended_valid_elements:"*[*]",plugins:"autolink,instructure_external_tools,instructure_contextmenu,instructure_links,instructure_image,instructure_equation,instructure_equella,media,paste,table,inlinepopups"}}),a.data("tinyIsVisible",!o))})),d.find(".textarea").focus()},url:l.replace(/\/download/,"/contents")})}),a(".folder_item .preview_item_link").click(function(e){e.preventDefault(),e.stopPropagation(),o.selectFolder(a(this).parents(".folder_item").data("node"))}),a(".folder_item .rename_item_link,#file_panel .rename_item_link,#folder_panel .rename_item_link").click(function(e){e.preventDefault(),e.stopPropagation();var t=a(this).parents(".folder_item,#file_panel,#folder_panel"),i=t.getTemplateData({textValues:["name"]}).name;t.find(".name").hide().after(a("#rename_entry_field")),a("#rename_entry_field").val(i).focus().select(),a(this).blur()}),a("#rename_entry_field").bind("blur",function(e,t){var i=a(this).parents(".folder_item,#file_panel,#folder_panel");if(0!==i.length){var n=i.getTemplateData({textValues:["name"]}).name,r=a(this).val();if(t!==!1&&""!=r&&n!=r){i.find(".name").text(r);var l=o.itemData(i.data("node")),s=l.root_context_string;if(i.hasClass("folder")||"folder_panel"==i.attr("id")){var d=a.replaceTags(a("#file_context_links ."+s+"_folder_url").attr("href"),"id",l.id);a.ajaxJSON(d,"PUT",{"folder[name]":r},function(e){o.updateFolder(s,{folder:e.folder,already_in_place:!0})},function(){})}else{var d=a.replaceTags(a("#file_context_links ."+s+"_attachment_url").attr("href"),"id",l.id);a.ajaxJSON(d,"PUT",{"attachment[display_name]":r},function(e){o.updateFile(s,e)},function(){})}}i.find(".name").show(),a(this).val("").appendTo(a("#file_context_links")),a(this).triggerHandler("blur",!1)}}),a("#rename_entry_field").keycodes("return esc",function(e){a(this).triggerHandler("blur","return"==e.keyString)}),a(".folder_item .delete_item_link,#folder_panel .delete_item_link,#file_panel .delete_item_link").click(function(e){e.preventDefault(),e.stopPropagation();var t=o.itemData(a(this).parents(".folder_item"));t=t||o.itemData(a(this).parents("#folder_panel,#file_panel").data("node"));a(this).parents(".folder_item").hasClass("file")?"file":"folder";a(this).parents(".folder_item").confirmDelete({message:a(this).parents(".folder_item").hasClass("folder")||a(this).hasClass("folder_url")?i.t("prompts.delete_folder","Are you sure you want to delete this folder and all of its contents?"):i.t("prompts.delete_file","Are you sure you want to delete this file?"),url:a(this).attr("href"),success:function(){c.find(".file_"+t.id+",.folder_"+t.id).filter(".active-node,.active-leaf").length>0&&o.selectFolder(c.find(".file_"+t.id+",.folder_"+t.id).filter(".active-node,.active-leaf").parent("ul").parent("li")),c.find(".file_"+t.id).prev("li.separator").remove(),c.find(".file_"+t.id).remove(),c.find(".folder_"+t.id).prev("li.separator").remove(),c.find(".folder_"+t.id).remove(),o.refreshView(),o.updateQuota(),a(this).slideUp(function(){a(this).remove()})}})}),a(".folder_item:not(.add_item)").click(function(e){var t=a(this);e.preventDefault(),s.filter(".dragging").length>0||a(this).find("#rename_entry_field").length>0||(e.stopPropagation(),t.data("parent_node")&&o.expandFolder(t.data("parent_node")),setTimeout(function(){if(t.hasClass("folder")){o.expandFolder(t.data("node"));var e=function(){o.refreshView(),a(this).unbind("files_load",e)};t.data("node").bind("files_load",e),t.data("node").children(".text").click()}else t.find(".name").focus(),location.href=t.find(".download_url").attr("href")},50))}),a(".folder_item").hover(function(){a(".folder_item_hover").removeClass("folder_item_hover"),a(this).addClass("folder_item_hover")},function(){}),a("#folder_panel .add_file_link").click(function(e){if(e.preventDefault(),!(s.find(".add_form:visible").length>0)){var t=a("#add_file_form").clone(!0).removeAttr("id");s.children(".message").remove(),s.append(t),s.scrollToVisible(t);var i=o.currentItemData();t.fillFormData({folder_id:i.id},{object_name:"attachment"}),t.find("form").attr("action",a("#file_context_links ."+i.context_string+"_attachments_url").attr("href")),t.mouseover(),t.find(":text:first").focus().select()}}),a("#folder_panel .add_folder_link").click(function(e){if(e.preventDefault(),!(s.find(".add_form:visible").length>0)){var t=a("#add_folder_form").clone(!0).removeAttr("id");s.children(".message").remove(),s.find("#folder_panel.addable_content_panel").after(t),s.scrollToVisible(t);var i=o.currentItemData();t.fillFormData({parent_folder_id:i.id},{object_name:"folder"}),t.find("form").attr("action",a("#file_context_links ."+i.context_string+"_folders_url").attr("href")),t.mouseover(),t.find(":text:first").focus().select()}}),a("#add_folder_form :text").keycodes("esc",function(e){"esc"==e.keyString&&a(this).trigger("blur",!0)}),a("#add_folder_form :text").bind("blur",function(e,t){t?a(this).parents("li").remove():a.trim(a(this).val())&&a(this).parents("form").trigger("submit")}),a("#add_folder_form .add_folder_form").formSubmit({beforeSubmit:function(e){return a(this).hasClass("submitting")?!1:(a(this).addClass("submitting"),a(this).find(".name").show().text(e["folder[name]"]),a(this).find(":text").hide(),void a(this).data("root_context_string",o.currentItemData().root_context_string))},success:function(t){a(this).removeClass("submitting");for(var i in r)r[i][0].context_string==a(this).data("root_context_string")&&r[i][1].folders.push(t);var n=r[0][1].folders;r[0][1].folders=e.sortBy(n,function(e){return(e.folder.name||"").toLowerCase()});var l=t.folder,s=c.find(".folder_blank").clone(!0).removeClass("folder_blank");s.addClass("folder folder_"+l.id),s.fillTemplateData({data:{name:l.name,id:l.id}});var d=c.find(".folder_"+l.parent_folder_id);d.children("ul").append("<li class='separator'/>"),d.children("ul").append(s.show()),o.updateFolder(a(this).data("root_context_string"),t),a(this).parents("li").remove(),s.find("span").droppable(o.droppable_options),o.refreshView(l)},error:function(e){a(this).removeClass("submitting"),a(this).formErrors(e)}}),a("#add_file_form .add_file_form").formSubmit({fileUpload:!0,beforeSubmit:function(){a(this).data("context_string",o.currentItemData().context_string),a(this).find(".loading_message").slideDown()},success:function(e){a(this).parents("li").remove(),o.updateFile(a(this).data("context_string"),e),o.updateQuota()},error:function(e){a(this).find(".loading_message").slideUp(),a(this).formErrors(e)}}),a("#add_file_form .cancel_button").click(function(){a(this).parents("li").remove()}),a(".folder_item .lock_item_link,#file_panel .lock_item_link,#folder_panel .lock_item_link").click(function(e){e.preventDefault(),e.stopPropagation();var t="attachment",n=a("#lock_attachment_form"),r=a(this).parents(".folder_item,#file_panel,#folder_panel"),l=o.itemData(r)||o.itemData(r.data("node")),s=a(this).attr("href");(r.hasClass("folder")||a(this).parents("#folder_panel").length>0)&&(t="folder",n=a("#lock_folder_form")),n.attr("action",s),n.data("context_string",l.context_string),a("#lock_item_dialog form").hide(),n.show(),l.lock_at=a.datetimeString(l.last_lock_at,{localized:!1}),l.unlock_at=a.datetimeString(l.last_unlock_at,{localized:!1}),l.locked=l.lock_at||l.unlock_at?"0":"1",a("#lock_item_dialog").fillTemplateData({data:{name:l.name}}),n.fillFormData(l,{object_name:t}),n.find("#folder_just_hide,#attachment_just_hide").attr("checked",!1).change(),n.find(".item_type").text(t),a("#lock_item_dialog").dialog({modal:!0,width:350,title:"folder"==t?i.t("titles.lock_folder","Lock Folder"):i.t("titles.lock_file","Lock File")}).find(".datetime_field").datetime_field()}),a("#folder_just_hide,#attachment_just_hide").change(function(){a(this).parents("form").find(".full_lock").showIf(!a(this).attr("checked")),a(this).parents("form").find(".lock_checkbox").change()}).change(),a("#lock_item_dialog .cancel_button").click(function(){a("#lock_item_dialog").dialog("close")}),a("#lock_item_dialog .lock_checkbox").change(function(){a(this).parents("table").find(".lock_range").showIf(!a(this).attr("checked"))}).change(),a("#lock_attachment_form").formSubmit({processData:function(e){return e["attachment[unlock_at]"]=a.datetime.process(e["attachment[unlock_at]"]),e["attachment[lock_at]"]=a.datetime.process(e["attachment[lock_at]"]),e},beforeSubmit:function(){a(this).loadingImage()},success:function(e){a(this).loadingImage("remove"),a("#lock_item_dialog").dialog("close"),o.updateFile(a(this).data("context_string"),e)}}),a("#lock_folder_form").formSubmit({processData:function(e){return e["folder[unlock_at]"]=a.datetime.process(e["folder[unlock_at]"]),e["folder[lock_at]"]=a.datetime.process(e["folder[lock_at]"]),e},beforeSubmit:function(){a(this).loadingImage()},success:function(e){a(this).loadingImage("remove"),a("#lock_item_dialog").dialog("close"),o.updateFolder(a(this).data("context_string"),{folder:e.folder,already_in_place:!0})}}),a(".folder_item .unlock_item_link,#file_panel .unlock_item_link,#folder_panel .unlock_item_link").click(function(e){e.preventDefault(),e.stopPropagation();var t="attachment",i=a("#lock_attachment_form"),n=a(this).parents(".folder_item,#file_panel,#folder_panel"),r=o.itemData(n)||o.itemData(n.data("node")),l=a(this).attr("href");(n.hasClass("folder")||a(this).parents("#folder_panel").length>0)&&(t="folder",i=a("#lock_folder_form"),l=n.find(".folder_url").attr("href")),n.loadingImage();var s={};s["["+t+"][locked]"]="",s["["+t+"][hidden]"]="",s["["+t+"][lock_at]"]="",s["["+t+"][unlock_at]"]="",n.loadingImage(),a.ajaxJSON(l,"PUT",s,function(e){n.loadingImage("remove"),"attachment"==t?o.updateFile(r.context_string,e):o.updateFolder(r.context_string,{folder:e.folder,already_in_place:!0})},function(){n.loadingImage("remove")})}),""===location.hash||"#"==location.hash){var p=a("#files_structure_list .context:first .name:first").text();location.href="#"+encodeURIComponent(p)}a(document).fragmentChange(function(e,t){setTimeout(function(){o.selectNodeFromPath(t.substring(1)),c.scrollToVisible(a("li.active-node,li.active-leaf").find("span.name").filter(":first"))},100)}).fragmentChange(),setTimeout(function(){a(window).triggerHandler("resize"),a("#file_swf").uploadify({fileObjName:"file",swf:"/flash/uploadify/uploadify.swf",uploader:"s3_url",multi:!0,auto:!1,fileSizeLimit:10737418240,buttonText:"",hideButton:!0,width:60,height:22,cancelImg:"/images/blank.png",onInit:function(){u.text(i.t("links.add_files","Add Files")).triggerHandler("show")},onFallback:function(){d.hide()},onSelect:l.swfFileQueue,onCancel:l.swfCancel,onUploadError:l.swfFileError,onUploadStart:l.swfFileOpen,onUploadProgress:l.swfFileProgress,onUploadSuccess:l.swfFileSuccess})},1e3)})}();var l={ajaxUploadCount:0,swfUploadCount:0,queuedAjaxUploads:[],currentlyUploading:!1,status_status:"hidden",status_request:"hidden",showStatus:function(){l.status_request="shown","hidden"==l.status_status&&(l.status_status="showing",a("#file_uploads_progress").slideDown(null,null,function(){setTimeout(function(){l.status_status="shown","hidden"==l.status_request&&l.hideStatus()},3e3)}))},hideStatus:function(){l.status_request="hidden","shown"==l.status_status&&(l.status_status="hiding",a("#file_uploads_progress").slideUp(null,null,function(){l.status_status="hidden","shown"==l.status_request&&l.showStatus()}))},queueAjaxUpload:function(e,t){l.ajaxUploadCount=l.queuedAjaxUploads.length;var i={file:e,folder_id:t,name:e.name},a=l.initFile(i);a.data("folder",o.currentItemData()),a.find(".status").text("Queued"),l.queuedAjaxUploads.push(i),l.updateUploadCount(),l.uploadAjaxFiles()},uploadAjaxFiles:function(e){if(!l.currentlyUploading||e){var t=l.queuedAjaxUploads.shift();if(t){l.currentlyUploading=!0;var n=l.initFile(t);n.find(".status").text("Uploading"),n.find(".progress_bar").progressbar("value",10);var r=n.data("folder"),s=t.file;a.ajaxFileUpload({url:a("."+r.context_string+"_attachments_url").attr("href"),data:{"attachment[uploaded_data]":s,"attachment[display_name]":s.name,"attachment[folder_id]":r.id,duplicate_handling:t.file.duplicate_handling},method:"POST",success:function(e){setTimeout(function(){l.uploadAjaxFiles(!0)},500);{var t=e.attachment;a.underscore(t.context_type)+"_"+t.context_id}n.find(".cancel_upload_link").hide().end().find(".status").text(i.t("messages.done_uploading","Done uploading")),n.addClass("done"),setTimeout(function(){n.slideUp(function(){n.remove()})},5e3),e.deleted_attachment_ids&&o.deleteAttachmentIds(e.deleted_attachment_ids),o.updateFile(t.context_code,e)},error:function(){setTimeout(function(){l.uploadAjaxFiles(!0)},500),n.find(".status").text(i.t("#errors.failed","Failed")).end().find(".cancel_upload_link").hide()}})}else l.currentlyUploading=!1,l.ajaxUploadCount=0,l.updateUploadCount()}},updateUploadCount:function(){l.ajaxUploadCount=l.queuedAjaxUploads.length,l.currentlyUploading&&l.ajaxUploadCount++;var e=l.swfPreQueued.length+l.swfFiles.length+l.ajaxUploadCount,t=a("#file_uploads .file_upload.errored:visible").length;if(0===e&&0==t){l.hideStatus();var n=a("#file_upload_blank").clone(!0).removeAttr("id").addClass("finished_message").empty();n.text("Finished uploading all files"),a("#file_uploads .file_upload:visible:first").hasClass("finished_message")||(a("#file_uploads").prepend(n),n.slideDown("fast")),n.addClass("finished_message"),n.click(function(){a(this).slideUp(function(){a(this).remove()})}),setTimeout(function(){n.slideUp(function(){n.remove()})},5e3)}else a("#file_uploads_dialog_link").text(i.t("messages.uploading_files",{one:"Uploading 1 File...",other:"Uploading %{count} Files..."},{count:e})),0===e&&a("#file_uploads_dialog_link").text(i.t("messages.error_count",{one:"1 Error",other:"%{count} Errors"},{count:t})),l.showStatus()},fileDialogComplete:function(e,t){try{t>0&&this.startUpload()}catch(i){this.debug(i)}},swfPreQueued:[],swfQueuedAndPendingFiles:[],swfFiles:[],swfFileQueueOnce:function(){var e=l.swfPreQueued,t=o.currentItemData(),i=[];for(idx in e)i.push(e[idx].name);o.preflight(t.id,t.context_string,i,function(t){for(idx in e)e[idx].duplicate_handling=t},l.swfFileQueueNext,function(){for(idx in e)a("#file_swf").uploadify("cancel",e[idx].id)})},swfFileQueue:function(e){l.swfPreQueued.push(e),clearTimeout(l.swfFileQueueOnceTimeout),l.swfFileQueueOnceTimeout=setTimeout(l.swfFileQueueOnce,500)},swfFileQueueNext:function(){var e=l.swfPreQueued.shift();e?l.swfFileQueueReal(e):l.swfQueueComplete()},swfFileQueueReal:function(e){var t=l.initFile(e);t.data("folder",o.currentItemData()),t.find(".status").text(i.t("messages.queued","Queued")),l.swfFiles.push(e);var n=t.data("folder"),r={"attachment[folder_id]":n.id,"attachment[filename]":e.name,"attachment[context_code]":n.context_string,no_redirect:!0,"attachment[duplicate_handling]":e.duplicate_handling,default_content_type:"application/octet-stream"};l.updateUploadCount(),a.ajaxJSON("/files/pending","POST",r,function(i){e.upload_url=i.proxied_upload_url||i.upload_url,e.upload_params=i.upload_params,t.data("success_url",i.success_url),t.hasClass("done")||(l.swfQueuedAndPendingFiles.push(e),l.swfUploadNext()),l.updateUploadCount()},function(n){a.flashError(n&&n.base&&n.base.match(/quota/)?n.base:i.t("upload_error","There was an error uploading your file")),a("#file_swf").uploadify("cancel",e.id),t.find(".cancel_upload_link").hide().end().find(".status").text("Upload Failed")},{skipDefaultError:!0})},swfUploadNext:function(){l.swfQueuedAndPendingFiles.length>0&&(file=l.swfQueuedAndPendingFiles.shift(),file&&(a("#file_swf").uploadify("settings","uploader",file.upload_url),a("#file_swf").uploadify("settings","formData",file.upload_params),a("#file_swf").uploadify("upload",file.id))),l.updateUploadCount()},swfCancel:function(e){var t=l.initFile(e);a("#file_uploads_dialog_link").text(i.t("errors.uploading","Uploading Error")),t.addClass("done"),t.hasClass("errored")||t.hasClass("error_cancelled")||(t.find(".cancel_upload_link").hide().end().find(".status").text("Canceled"),l.swfFiles=a.grep(l.swfFiles,function(t){return t.id!=e.id}))},swfFileError:function(e,t,n,o,r){if(r="undefined"!=typeof r?r:!0,t==SWFUpload.UPLOAD_ERROR.HTTP_ERROR&&"201"==n)return void l.s3Success(e);var s=l.initFile(e);setTimeout(function(){s.addClass("error_cancelled")},50),l.swfFiles=a.grep(l.swfFiles,function(t){return t.id!=e.id}),a("#file_uploads_dialog_link").text(i.t("errors.uploading","Uploading Error")),l.showStatus(),s.find(".cancel_upload_link").hide().end().find(".status").text(i.t("errors.failed_uploading","Failed uploading: %{error_info}",{error_info:o})),s.addClass("done").addClass("errored"),l.swfFileQueueNext()},swfFileOpen:function(e){var t=l.initFile(e);e.upload_url&&a("#file_swf").uploadify("settings","uploader",e.upload_url),e.upload_params&&a("#file_swf").uploadify("settings","formData",e.upload_params),l.swfQueuedAndPendingFiles=a.grep(l.swfQueuedAndPendingFiles,function(t){return t.id!=e.id}),t.find(".progress_bar").progressbar("value",1),t.find(".status").text(i.t("messages.uploading","Uploading"))},swfFileProgress:function(e,t,a,n,o){var r=l.initFile(e);r.find(".status").text(i.t("messages.uploading","Uploading")),r.find(".cancel_upload_link").showIf(o>n),r.find(".progress_bar").progressbar("value",100*n/o)},s3Success:function(e){var t=l.initFile(e);t.find(".status").text(i.t("messages.finalizing","Finalizing"));var n=function(){l.swfFileError(e,"","",i.t("errors.unexpected_response","didn't get back expected response"))};a.ajaxJSON(t.data("success_url"),"GET",{},function(t){t&&t.attachment?(l.swfFileSuccess(e,JSON.stringify(t),!0),t.deleted_attachment_ids&&o.deleteAttachmentIds(t.deleted_attachment_ids)):n()},n)},swfFileSuccess:function(e,t){if(t.indexOf("<PostResponse>")>=0)return void l.s3Success(e);var n=l.initFile(e);l.swfFiles=a.grep(l.swfFiles,function(t){return t.id!=e.id}),n.find(".status").text(i.t("messages.upload_complete","Done uploading")),n.find(".cancel_upload_link").remove(),n.find(".progress_bar").progressbar("value",100),n.addClass("done");var r=n.data("folder").context_string;if(setTimeout(function(){n.slideUp(function(){n.remove()})},5e3),t)try{if(t=a.parseJSON(t),"errors"in t&&!jQuery.isEmptyObject(t.errors))return void l.swfFileError(e,"","",JSON.stringify(t.errors),!1);t.swf=!0,setTimeout(function(){t.deleted_attachment_ids&&o.deleteAttachmentIds(t.deleted_attachment_ids),o.updateFile(r,t)},500)}catch(s){return void l.swfFileError(e,"","",s.toString(),!1)}else n.find(".status").text(i.t("warnings.file_uploaded_without_response","File may have uploaded, but the server failed to respond.  Reload the page to confirm."));l.swfFileQueueNext()},swfQueueComplete:function(){l.updateUploadCount()},initFile:function(e){e.id||(e.id="tmp_"+Math.round(9999*Math.random()));var t=a("#file_upload_"+e.id);return 0===t.length&&(t=a("#file_upload_blank").clone(!0).attr("id","file_upload_"+e.id),a("#file_uploads").append(t),t.find(".progress_bar").progressbar(),t.click(function(e){0===a(this).find(".cancel_upload_link:visible").length&&a(this).hasClass("done")&&(e.preventDefault(),a(this).slideUp(function(){a(this).remove(),l.updateUploadCount()}))}),t.find(".cancel_upload_link").click(function(t){t.preventDefault();(a(this).parents(".file_upload").attr("id")||"").substring(12);a("#file_swf").uploadify("cancel",e.id)})),t.find(".file_name").text(e.name),t.slideDown("fast"),t},attempt:0,file_details:{}}});var swfobject=function(){function e(){if(!Q){try{var e=A.getElementsByTagName("body")[0].appendChild(g("span"));e.parentNode.removeChild(e)}catch(t){return}Q=!0;for(var i=j.length,a=0;i>a;a++)j[a]()}}function t(e){Q?e():j[j.length]=e}function i(e){if(typeof O.addEventListener!=U)O.addEventListener("load",e,!1);else if(typeof A.addEventListener!=U)A.addEventListener("load",e,!1);else if(typeof O.attachEvent!=U)m(O,"onload",e);else if("function"==typeof O.onload){var t=O.onload;O.onload=function(){t(),e()}}else O.onload=e}function a(){P?n():o()}function n(){var e=A.getElementsByTagName("body")[0],t=g(E);t.setAttribute("type",T);var i=e.appendChild(t);if(i){var a=0;!function(){if(typeof i.GetVariable!=U){var n=i.GetVariable("$version");n&&(n=n.split(" ")[1].split(","),H.pv=[parseInt(n[0],10),parseInt(n[1],10),parseInt(n[2],10)])}else if(10>a)return a++,void setTimeout(arguments.callee,10);e.removeChild(t),i=null,o()}()}else o()}function o(){var e=N.length;if(e>0)for(var t=0;e>t;t++){var i=N[t].id,a=N[t].callbackFn,n={success:!1,id:i};if(H.pv[0]>0){var o=h(i);if(o)if(!v(N[t].swfVersion)||H.wk&&H.wk<312)if(N[t].expressInstall&&l()){var u={};u.data=N[t].expressInstall,u.width=o.getAttribute("width")||"0",u.height=o.getAttribute("height")||"0",o.getAttribute("class")&&(u.styleclass=o.getAttribute("class")),o.getAttribute("align")&&(u.align=o.getAttribute("align"));for(var c={},f=o.getElementsByTagName("param"),p=f.length,_=0;p>_;_++)"movie"!=f[_].getAttribute("name").toLowerCase()&&(c[f[_].getAttribute("name")]=f[_].getAttribute("value"));s(u,c,i,a)}else d(o),a&&a(n);else b(i,!0),a&&(n.success=!0,n.ref=r(i),a(n))}else if(b(i,!0),a){var g=r(i);g&&typeof g.SetVariable!=U&&(n.success=!0,n.ref=g),a(n)}}}function r(e){var t=null,i=h(e);if(i&&"OBJECT"==i.nodeName)if(typeof i.SetVariable!=U)t=i;else{var a=i.getElementsByTagName(E)[0];a&&(t=a)}return t}function l(){return!V&&v("6.0.65")&&(H.win||H.mac)&&!(H.wk&&H.wk<312)}function s(e,t,i,a){V=!0,F=a||null,S={success:!1,id:i};var n=h(i);if(n){"OBJECT"==n.nodeName?(k=u(n),w=null):(k=n,w=i),e.id=I,(typeof e.width==U||!/%$/.test(e.width)&&parseInt(e.width,10)<310)&&(e.width="310"),(typeof e.height==U||!/%$/.test(e.height)&&parseInt(e.height,10)<137)&&(e.height="137"),A.title=A.title.slice(0,47)+" - Flash Player Installation";var o=H.ie&&H.win?"ActiveX":"PlugIn",r="MMredirectURL="+O.location.toString().replace(/&/g,"%26")+"&MMplayerType="+o+"&MMdoctitle="+A.title;if(typeof t.flashvars!=U?t.flashvars+="&"+r:t.flashvars=r,H.ie&&H.win&&4!=n.readyState){var l=g("div");i+="SWFObjectNew",l.setAttribute("id",i),n.parentNode.insertBefore(l,n),n.style.display="none",function(){4==n.readyState?n.parentNode.removeChild(n):setTimeout(arguments.callee,10)}()}c(e,t,i)}}function d(e){if(H.ie&&H.win&&4!=e.readyState){var t=g("div");e.parentNode.insertBefore(t,e),t.parentNode.replaceChild(u(e),t),e.style.display="none",function(){4==e.readyState?e.parentNode.removeChild(e):setTimeout(arguments.callee,10)}()}else e.parentNode.replaceChild(u(e),e)}function u(e){var t=g("div");if(H.win&&H.ie)t.innerHTML=e.innerHTML;else{var i=e.getElementsByTagName(E)[0];if(i){var a=i.childNodes;if(a)for(var n=a.length,o=0;n>o;o++)1==a[o].nodeType&&"PARAM"==a[o].nodeName||8==a[o].nodeType||t.appendChild(a[o].cloneNode(!0))}}return t}function c(e,t,i){var a,n=h(i);if(H.wk&&H.wk<312)return a;if(n)if(typeof e.id==U&&(e.id=i),H.ie&&H.win){var o="";for(var r in e)e[r]!=Object.prototype[r]&&("data"==r.toLowerCase()?t.movie=e[r]:"styleclass"==r.toLowerCase()?o+=' class="'+e[r]+'"':"classid"!=r.toLowerCase()&&(o+=" "+r+'="'+e[r]+'"'));var l="";for(var s in t)t[s]!=Object.prototype[s]&&(l+='<param name="'+s+'" value="'+t[s]+'" />');n.outerHTML='<object classid="clsid:D27CDB6E-AE6D-11cf-96B8-444553540000"'+o+">"+l+"</object>",W[W.length]=e.id,a=h(e.id)}else{var d=g(E);d.setAttribute("type",T);for(var u in e)e[u]!=Object.prototype[u]&&("styleclass"==u.toLowerCase()?d.setAttribute("class",e[u]):"classid"!=u.toLowerCase()&&d.setAttribute(u,e[u]));for(var c in t)t[c]!=Object.prototype[c]&&"movie"!=c.toLowerCase()&&f(d,c,t[c]);n.parentNode.replaceChild(d,n),a=d}return a}function f(e,t,i){var a=g("param");a.setAttribute("name",t),a.setAttribute("value",i),e.appendChild(a)}function p(e){var t=h(e);t&&"OBJECT"==t.nodeName&&(H.ie&&H.win?(t.style.display="none",function(){4==t.readyState?_(e):setTimeout(arguments.callee,10)}()):t.parentNode.removeChild(t))}function _(e){var t=h(e);if(t){for(var i in t)"function"==typeof t[i]&&(t[i]=null);t.parentNode.removeChild(t)}}function h(e){var t=null;try{t=A.getElementById(e)}catch(i){}return t}function g(e){return A.createElement(e)}function m(e,t,i){e.attachEvent(t,i),B[B.length]=[e,t,i]}function v(e){var t=H.pv,i=e.split(".");return i[0]=parseInt(i[0],10),i[1]=parseInt(i[1],10)||0,i[2]=parseInt(i[2],10)||0,t[0]>i[0]||t[0]==i[0]&&t[1]>i[1]||t[0]==i[0]&&t[1]==i[1]&&t[2]>=i[2]?!0:!1}function y(e,t,i,a){if(!H.ie||!H.mac){var n=A.getElementsByTagName("head")[0];if(n){var o=i&&"string"==typeof i?i:"screen";if(a&&(D=null,C=null),!D||C!=o){var r=g("style");r.setAttribute("type","text/css"),r.setAttribute("media",o),D=n.appendChild(r),H.ie&&H.win&&typeof A.styleSheets!=U&&A.styleSheets.length>0&&(D=A.styleSheets[A.styleSheets.length-1]),C=o}H.ie&&H.win?D&&typeof D.addRule==E&&D.addRule(e,t):D&&typeof A.createTextNode!=U&&D.appendChild(A.createTextNode(e+" {"+t+"}"))}}}function b(e,t){if(M){var i=t?"visible":"hidden";Q&&h(e)?h(e).style.visibility=i:y("#"+e,"visibility:"+i)}}function x(e){var t=/[\\\"<>\.;]/,i=null!=t.exec(e);return i&&typeof encodeURIComponent!=U?encodeURIComponent(e):e}{var k,w,F,S,D,C,U="undefined",E="object",z="Shockwave Flash",q="ShockwaveFlash.ShockwaveFlash",T="application/x-shockwave-flash",I="SWFObjectExprInst",L="onreadystatechange",O=window,A=document,R=navigator,P=!1,j=[a],N=[],W=[],B=[],Q=!1,V=!1,M=!0,H=function(){var e=typeof A.getElementById!=U&&typeof A.getElementsByTagName!=U&&typeof A.createElement!=U,t=R.userAgent.toLowerCase(),i=R.platform.toLowerCase(),a=/win/.test(i?i:t),n=/mac/.test(i?i:t),o=/webkit/.test(t)?parseFloat(t.replace(/^.*webkit\/(\d+(\.\d+)?).*$/,"$1")):!1,r=!1,l=[0,0,0],s=null;if(typeof R.plugins!=U&&typeof R.plugins[z]==E)s=R.plugins[z].description,!s||typeof R.mimeTypes!=U&&R.mimeTypes[T]&&!R.mimeTypes[T].enabledPlugin||(P=!0,r=!1,s=s.replace(/^.*\s+(\S+\s+\S+$)/,"$1"),l[0]=parseInt(s.replace(/^(.*)\..*$/,"$1"),10),l[1]=parseInt(s.replace(/^.*\.(.*)\s.*$/,"$1"),10),l[2]=/[a-zA-Z]/.test(s)?parseInt(s.replace(/^.*[a-zA-Z]+(.*)$/,"$1"),10):0);else if(typeof O.ActiveXObject!=U)try{var d=new ActiveXObject(q);d&&(s=d.GetVariable("$version"),s&&(r=!0,s=s.split(" ")[1].split(","),l=[parseInt(s[0],10),parseInt(s[1],10),parseInt(s[2],10)]))}catch(u){}return{w3:e,pv:l,wk:o,ie:r,win:a,mac:n}}();!function(){H.w3&&((typeof A.readyState!=U&&"complete"==A.readyState||typeof A.readyState==U&&(A.getElementsByTagName("body")[0]||A.body))&&e(),Q||(typeof A.addEventListener!=U&&A.addEventListener("DOMContentLoaded",e,!1),H.ie&&H.win&&(A.attachEvent(L,function(){"complete"==A.readyState&&(A.detachEvent(L,arguments.callee),e())}),O==top&&!function(){if(!Q){try{A.documentElement.doScroll("left")}catch(t){return void setTimeout(arguments.callee,0)}e()}}()),H.wk&&!function(){return Q?void 0:/loaded|complete/.test(A.readyState)?void e():void setTimeout(arguments.callee,0)}(),i(e)))}(),function(){H.ie&&H.win&&window.attachEvent("onunload",function(){for(var e=B.length,t=0;e>t;t++)B[t][0].detachEvent(B[t][1],B[t][2]);for(var i=W.length,a=0;i>a;a++)p(W[a]);for(var n in H)H[n]=null;H=null;for(var o in swfobject)swfobject[o]=null;swfobject=null})}()}return{registerObject:function(e,t,i,a){if(H.w3&&e&&t){var n={};
n.id=e,n.swfVersion=t,n.expressInstall=i,n.callbackFn=a,N[N.length]=n,b(e,!1)}else a&&a({success:!1,id:e})},getObjectById:function(e){return H.w3?r(e):void 0},embedSWF:function(e,i,a,n,o,r,d,u,f,p){var _={success:!1,id:i};H.w3&&!(H.wk&&H.wk<312)&&e&&i&&a&&n&&o?(b(i,!1),t(function(){a+="",n+="";var t={};if(f&&typeof f===E)for(var h in f)t[h]=f[h];t.data=e,t.width=a,t.height=n;var g={};if(u&&typeof u===E)for(var m in u)g[m]=u[m];if(d&&typeof d===E)for(var y in d)typeof g.flashvars!=U?g.flashvars+="&"+y+"="+d[y]:g.flashvars=y+"="+d[y];if(v(o)){var x=c(t,g,i);t.id==i&&b(i,!0),_.success=!0,_.ref=x}else{if(r&&l())return t.data=r,void s(t,g,i,p);b(i,!0)}p&&p(_)})):p&&p(_)},switchOffAutoHideShow:function(){M=!1},ua:H,getFlashPlayerVersion:function(){return{major:H.pv[0],minor:H.pv[1],release:H.pv[2]}},hasFlashPlayerVersion:v,createSWF:function(e,t,i){return H.w3?c(e,t,i):void 0},showExpressInstall:function(e,t,i,a){H.w3&&l()&&s(e,t,i,a)},removeSWF:function(e){H.w3&&p(e)},createCSS:function(e,t,i,a){H.w3&&y(e,t,i,a)},addDomLoadEvent:t,addLoadEvent:i,getQueryParamValue:function(e){var t=A.location.search||A.location.hash;if(t){if(/\?/.test(t)&&(t=t.split("?")[1]),null==e)return x(t);for(var i=t.split("&"),a=0;a<i.length;a++)if(i[a].substring(0,i[a].indexOf("="))==e)return x(i[a].substring(i[a].indexOf("=")+1))}return""},expressInstallCallback:function(){if(V){var e=h(I);e&&k&&(e.parentNode.replaceChild(k,e),w&&(b(w,!0),H.ie&&H.win&&(k.style.display="block")),F&&F(S)),V=!1}}}}(),SWFUpload;void 0==SWFUpload&&(SWFUpload=function(e){this.initSWFUpload(e)}),SWFUpload.prototype.initSWFUpload=function(e){try{this.customSettings={},this.settings=e,this.eventQueue=[],this.movieName="SWFUpload_"+SWFUpload.movieCount++,this.movieElement=null,SWFUpload.instances[this.movieName]=this,this.initSettings(),this.loadFlash(),this.displayDebugInfo()}catch(t){throw delete SWFUpload.instances[this.movieName],t}},SWFUpload.instances={},SWFUpload.movieCount=0,SWFUpload.version="2.2.0 2009-03-25",SWFUpload.QUEUE_ERROR={QUEUE_LIMIT_EXCEEDED:-100,FILE_EXCEEDS_SIZE_LIMIT:-110,ZERO_BYTE_FILE:-120,INVALID_FILETYPE:-130},SWFUpload.UPLOAD_ERROR={HTTP_ERROR:-200,MISSING_UPLOAD_URL:-210,IO_ERROR:-220,SECURITY_ERROR:-230,UPLOAD_LIMIT_EXCEEDED:-240,UPLOAD_FAILED:-250,SPECIFIED_FILE_ID_NOT_FOUND:-260,FILE_VALIDATION_FAILED:-270,FILE_CANCELLED:-280,UPLOAD_STOPPED:-290},SWFUpload.FILE_STATUS={QUEUED:-1,IN_PROGRESS:-2,ERROR:-3,COMPLETE:-4,CANCELLED:-5},SWFUpload.BUTTON_ACTION={SELECT_FILE:-100,SELECT_FILES:-110,START_UPLOAD:-120},SWFUpload.CURSOR={ARROW:-1,HAND:-2},SWFUpload.WINDOW_MODE={WINDOW:"window",TRANSPARENT:"transparent",OPAQUE:"opaque"},SWFUpload.completeURL=function(e){if("string"!=typeof e||e.match(/^https?:\/\//i)||e.match(/^\//))return e;var t=(window.location.protocol+"//"+window.location.hostname+(window.location.port?":"+window.location.port:""),window.location.pathname.lastIndexOf("/"));return path=0>=t?"/":window.location.pathname.substr(0,t)+"/",path+e},SWFUpload.prototype.initSettings=function(){this.ensureDefault=function(e,t){this.settings[e]=void 0==this.settings[e]?t:this.settings[e]},this.ensureDefault("upload_url",""),this.ensureDefault("preserve_relative_urls",!1),this.ensureDefault("file_post_name","Filedata"),this.ensureDefault("post_params",{}),this.ensureDefault("use_query_string",!1),this.ensureDefault("requeue_on_error",!1),this.ensureDefault("http_success",[]),this.ensureDefault("assume_success_timeout",0),this.ensureDefault("file_types","*.*"),this.ensureDefault("file_types_description","All Files"),this.ensureDefault("file_size_limit",0),this.ensureDefault("file_upload_limit",0),this.ensureDefault("file_queue_limit",0),this.ensureDefault("flash_url","swfupload.swf"),this.ensureDefault("prevent_swf_caching",!0),this.ensureDefault("button_image_url",""),this.ensureDefault("button_width",1),this.ensureDefault("button_height",1),this.ensureDefault("button_text",""),this.ensureDefault("button_text_style","color: #000000; font-size: 16pt;"),this.ensureDefault("button_text_top_padding",0),this.ensureDefault("button_text_left_padding",0),this.ensureDefault("button_action",SWFUpload.BUTTON_ACTION.SELECT_FILES),this.ensureDefault("button_disabled",!1),this.ensureDefault("button_placeholder_id",""),this.ensureDefault("button_placeholder",null),this.ensureDefault("button_cursor",SWFUpload.CURSOR.ARROW),this.ensureDefault("button_window_mode",SWFUpload.WINDOW_MODE.WINDOW),this.ensureDefault("debug",!1),this.settings.debug_enabled=this.settings.debug,this.settings.return_upload_start_handler=this.returnUploadStart,this.ensureDefault("swfupload_loaded_handler",null),this.ensureDefault("file_dialog_start_handler",null),this.ensureDefault("file_queued_handler",null),this.ensureDefault("file_queue_error_handler",null),this.ensureDefault("file_dialog_complete_handler",null),this.ensureDefault("upload_start_handler",null),this.ensureDefault("upload_progress_handler",null),this.ensureDefault("upload_error_handler",null),this.ensureDefault("upload_success_handler",null),this.ensureDefault("upload_complete_handler",null),this.ensureDefault("debug_handler",this.debugMessage),this.ensureDefault("custom_settings",{}),this.customSettings=this.settings.custom_settings,this.settings.prevent_swf_caching&&(this.settings.flash_url=this.settings.flash_url+(this.settings.flash_url.indexOf("?")<0?"?":"&")+"preventswfcaching="+(new Date).getTime()),this.settings.preserve_relative_urls||(this.settings.upload_url=SWFUpload.completeURL(this.settings.upload_url),this.settings.button_image_url=SWFUpload.completeURL(this.settings.button_image_url)),delete this.ensureDefault},SWFUpload.prototype.loadFlash=function(){var e,t;if(null!==document.getElementById(this.movieName))throw"ID "+this.movieName+" is already in use. The Flash Object could not be added";if(e=document.getElementById(this.settings.button_placeholder_id)||this.settings.button_placeholder,void 0==e)throw"Could not find the placeholder element: "+this.settings.button_placeholder_id;t=document.createElement("div"),t.innerHTML=this.getFlashHTML(),e.parentNode.replaceChild(t.firstChild,e),void 0==window[this.movieName]&&(window[this.movieName]=this.getMovieElement())},SWFUpload.prototype.getFlashHTML=function(){return['<object id="',this.movieName,'" type="application/x-shockwave-flash" data="',this.settings.flash_url,'" width="',this.settings.button_width,'" height="',this.settings.button_height,'" class="swfupload">','<param name="wmode" value="',this.settings.button_window_mode,'" />','<param name="movie" value="',this.settings.flash_url,'" />','<param name="quality" value="high" />','<param name="menu" value="false" />','<param name="allowScriptAccess" value="always" />','<param name="flashvars" value="'+this.getFlashVars()+'" />',"</object>"].join("")},SWFUpload.prototype.getFlashVars=function(){var e=this.buildParamString(),t=this.settings.http_success.join(",");return["movieName=",encodeURIComponent(this.movieName),"&amp;uploadURL=",encodeURIComponent(this.settings.upload_url),"&amp;useQueryString=",encodeURIComponent(this.settings.use_query_string),"&amp;requeueOnError=",encodeURIComponent(this.settings.requeue_on_error),"&amp;httpSuccess=",encodeURIComponent(t),"&amp;assumeSuccessTimeout=",encodeURIComponent(this.settings.assume_success_timeout),"&amp;params=",encodeURIComponent(e),"&amp;filePostName=",encodeURIComponent(this.settings.file_post_name),"&amp;fileTypes=",encodeURIComponent(this.settings.file_types),"&amp;fileTypesDescription=",encodeURIComponent(this.settings.file_types_description),"&amp;fileSizeLimit=",encodeURIComponent(this.settings.file_size_limit),"&amp;fileUploadLimit=",encodeURIComponent(this.settings.file_upload_limit),"&amp;fileQueueLimit=",encodeURIComponent(this.settings.file_queue_limit),"&amp;debugEnabled=",encodeURIComponent(this.settings.debug_enabled),"&amp;buttonImageURL=",encodeURIComponent(this.settings.button_image_url),"&amp;buttonWidth=",encodeURIComponent(this.settings.button_width),"&amp;buttonHeight=",encodeURIComponent(this.settings.button_height),"&amp;buttonText=",encodeURIComponent(this.settings.button_text),"&amp;buttonTextTopPadding=",encodeURIComponent(this.settings.button_text_top_padding),"&amp;buttonTextLeftPadding=",encodeURIComponent(this.settings.button_text_left_padding),"&amp;buttonTextStyle=",encodeURIComponent(this.settings.button_text_style),"&amp;buttonAction=",encodeURIComponent(this.settings.button_action),"&amp;buttonDisabled=",encodeURIComponent(this.settings.button_disabled),"&amp;buttonCursor=",encodeURIComponent(this.settings.button_cursor)].join("")},SWFUpload.prototype.getMovieElement=function(){if(void 0==this.movieElement&&(this.movieElement=document.getElementById(this.movieName)),null===this.movieElement)throw"Could not find Flash element";return this.movieElement},SWFUpload.prototype.buildParamString=function(){var e=this.settings.post_params,t=[];if("object"==typeof e)for(var i in e)e.hasOwnProperty(i)&&t.push(encodeURIComponent(i.toString())+"="+encodeURIComponent(e[i].toString()));return t.join("&amp;")},SWFUpload.prototype.destroy=function(){try{this.cancelUpload(null,!1);var e=null;if(e=this.getMovieElement(),e&&"unknown"==typeof e.CallFunction){for(var t in e)try{"function"==typeof e[t]&&(e[t]=null)}catch(i){}try{e.parentNode.removeChild(e)}catch(a){}}return window[this.movieName]=null,SWFUpload.instances[this.movieName]=null,delete SWFUpload.instances[this.movieName],this.movieElement=null,this.settings=null,this.customSettings=null,this.eventQueue=null,this.movieName=null,!0}catch(n){return!1}},SWFUpload.prototype.displayDebugInfo=function(){this.debug(["---SWFUpload Instance Info---\n","Version: ",SWFUpload.version,"\n","Movie Name: ",this.movieName,"\n","Settings:\n","	","upload_url:               ",this.settings.upload_url,"\n","	","flash_url:                ",this.settings.flash_url,"\n","	","use_query_string:         ",this.settings.use_query_string.toString(),"\n","	","requeue_on_error:         ",this.settings.requeue_on_error.toString(),"\n","	","http_success:             ",this.settings.http_success.join(", "),"\n","	","assume_success_timeout:   ",this.settings.assume_success_timeout,"\n","	","file_post_name:           ",this.settings.file_post_name,"\n","	","post_params:              ",this.settings.post_params.toString(),"\n","	","file_types:               ",this.settings.file_types,"\n","	","file_types_description:   ",this.settings.file_types_description,"\n","	","file_size_limit:          ",this.settings.file_size_limit,"\n","	","file_upload_limit:        ",this.settings.file_upload_limit,"\n","	","file_queue_limit:         ",this.settings.file_queue_limit,"\n","	","debug:                    ",this.settings.debug.toString(),"\n","	","prevent_swf_caching:      ",this.settings.prevent_swf_caching.toString(),"\n","	","button_placeholder_id:    ",this.settings.button_placeholder_id.toString(),"\n","	","button_placeholder:       ",this.settings.button_placeholder?"Set":"Not Set","\n","	","button_image_url:         ",this.settings.button_image_url.toString(),"\n","	","button_width:             ",this.settings.button_width.toString(),"\n","	","button_height:            ",this.settings.button_height.toString(),"\n","	","button_text:              ",this.settings.button_text.toString(),"\n","	","button_text_style:        ",this.settings.button_text_style.toString(),"\n","	","button_text_top_padding:  ",this.settings.button_text_top_padding.toString(),"\n","	","button_text_left_padding: ",this.settings.button_text_left_padding.toString(),"\n","	","button_action:            ",this.settings.button_action.toString(),"\n","	","button_disabled:          ",this.settings.button_disabled.toString(),"\n","	","custom_settings:          ",this.settings.custom_settings.toString(),"\n","Event Handlers:\n","	","swfupload_loaded_handler assigned:  ",("function"==typeof this.settings.swfupload_loaded_handler).toString(),"\n","	","file_dialog_start_handler assigned: ",("function"==typeof this.settings.file_dialog_start_handler).toString(),"\n","	","file_queued_handler assigned:       ",("function"==typeof this.settings.file_queued_handler).toString(),"\n","	","file_queue_error_handler assigned:  ",("function"==typeof this.settings.file_queue_error_handler).toString(),"\n","	","upload_start_handler assigned:      ",("function"==typeof this.settings.upload_start_handler).toString(),"\n","	","upload_progress_handler assigned:   ",("function"==typeof this.settings.upload_progress_handler).toString(),"\n","	","upload_error_handler assigned:      ",("function"==typeof this.settings.upload_error_handler).toString(),"\n","	","upload_success_handler assigned:    ",("function"==typeof this.settings.upload_success_handler).toString(),"\n","	","upload_complete_handler assigned:   ",("function"==typeof this.settings.upload_complete_handler).toString(),"\n","	","debug_handler assigned:             ",("function"==typeof this.settings.debug_handler).toString(),"\n"].join(""))},SWFUpload.prototype.addSetting=function(e,t,i){return this.settings[e]=void 0==t?i:t},SWFUpload.prototype.getSetting=function(e){return void 0!=this.settings[e]?this.settings[e]:""},SWFUpload.prototype.callFlash=function(functionName,argumentArray){argumentArray=argumentArray||[];var movieElement=this.getMovieElement(),returnValue,returnString;try{returnString=movieElement.CallFunction('<invoke name="'+functionName+'" returntype="javascript">'+__flash__argumentsToXML(argumentArray,0)+"</invoke>"),returnValue=eval(returnString)}catch(ex){throw"Call to "+functionName+" failed"}return void 0!=returnValue&&"object"==typeof returnValue.post&&(returnValue=this.unescapeFilePostParams(returnValue)),returnValue},SWFUpload.prototype.selectFile=function(){this.callFlash("SelectFile")},SWFUpload.prototype.selectFiles=function(){this.callFlash("SelectFiles")},SWFUpload.prototype.startUpload=function(e){this.callFlash("StartUpload",[e])},SWFUpload.prototype.cancelUpload=function(e,t){t!==!1&&(t=!0),this.callFlash("CancelUpload",[e,t])},SWFUpload.prototype.stopUpload=function(){this.callFlash("StopUpload")},SWFUpload.prototype.getStats=function(){return this.callFlash("GetStats")},SWFUpload.prototype.setStats=function(e){this.callFlash("SetStats",[e])},SWFUpload.prototype.getFile=function(e){return"number"==typeof e?this.callFlash("GetFileByIndex",[e]):this.callFlash("GetFile",[e])},SWFUpload.prototype.addFileParam=function(e,t,i){return this.callFlash("AddFileParam",[e,t,i])},SWFUpload.prototype.removeFileParam=function(e,t){this.callFlash("RemoveFileParam",[e,t])},SWFUpload.prototype.setUploadURL=function(e){this.settings.upload_url=e.toString(),this.callFlash("SetUploadURL",[e])},SWFUpload.prototype.setPostParams=function(e){this.settings.post_params=e,this.callFlash("SetPostParams",[e])},SWFUpload.prototype.addPostParam=function(e,t){this.settings.post_params[e]=t,this.callFlash("SetPostParams",[this.settings.post_params])},SWFUpload.prototype.removePostParam=function(e){delete this.settings.post_params[e],this.callFlash("SetPostParams",[this.settings.post_params])},SWFUpload.prototype.setFileTypes=function(e,t){this.settings.file_types=e,this.settings.file_types_description=t,this.callFlash("SetFileTypes",[e,t])},SWFUpload.prototype.setFileSizeLimit=function(e){this.settings.file_size_limit=e,this.callFlash("SetFileSizeLimit",[e])},SWFUpload.prototype.setFileUploadLimit=function(e){this.settings.file_upload_limit=e,this.callFlash("SetFileUploadLimit",[e])},SWFUpload.prototype.setFileQueueLimit=function(e){this.settings.file_queue_limit=e,this.callFlash("SetFileQueueLimit",[e])},SWFUpload.prototype.setFilePostName=function(e){this.settings.file_post_name=e,this.callFlash("SetFilePostName",[e])},SWFUpload.prototype.setUseQueryString=function(e){this.settings.use_query_string=e,this.callFlash("SetUseQueryString",[e])},SWFUpload.prototype.setRequeueOnError=function(e){this.settings.requeue_on_error=e,this.callFlash("SetRequeueOnError",[e])},SWFUpload.prototype.setHTTPSuccess=function(e){"string"==typeof e&&(e=e.replace(" ","").split(",")),this.settings.http_success=e,this.callFlash("SetHTTPSuccess",[e])},SWFUpload.prototype.setAssumeSuccessTimeout=function(e){this.settings.assume_success_timeout=e,this.callFlash("SetAssumeSuccessTimeout",[e])},SWFUpload.prototype.setDebugEnabled=function(e){this.settings.debug_enabled=e,this.callFlash("SetDebugEnabled",[e])},SWFUpload.prototype.setButtonImageURL=function(e){void 0==e&&(e=""),this.settings.button_image_url=e,this.callFlash("SetButtonImageURL",[e])},SWFUpload.prototype.setButtonDimensions=function(e,t){this.settings.button_width=e,this.settings.button_height=t;var i=this.getMovieElement();void 0!=i&&(i.style.width=e+"px",i.style.height=t+"px"),this.callFlash("SetButtonDimensions",[e,t])},SWFUpload.prototype.setButtonText=function(e){this.settings.button_text=e,this.callFlash("SetButtonText",[e])},SWFUpload.prototype.setButtonTextPadding=function(e,t){this.settings.button_text_top_padding=t,this.settings.button_text_left_padding=e,this.callFlash("SetButtonTextPadding",[e,t])},SWFUpload.prototype.setButtonTextStyle=function(e){this.settings.button_text_style=e,this.callFlash("SetButtonTextStyle",[e])},SWFUpload.prototype.setButtonDisabled=function(e){this.settings.button_disabled=e,this.callFlash("SetButtonDisabled",[e])},SWFUpload.prototype.setButtonAction=function(e){this.settings.button_action=e,this.callFlash("SetButtonAction",[e])},SWFUpload.prototype.setButtonCursor=function(e){this.settings.button_cursor=e,this.callFlash("SetButtonCursor",[e])},SWFUpload.prototype.queueEvent=function(e,t){void 0==t?t=[]:t instanceof Array||(t=[t]);var i=this;if("function"==typeof this.settings[e])this.eventQueue.push(function(){this.settings[e].apply(this,t)}),setTimeout(function(){i.executeNextEvent()},0);else if(null!==this.settings[e])throw"Event handler "+e+" is unknown or is not a function"},SWFUpload.prototype.executeNextEvent=function(){var e=this.eventQueue?this.eventQueue.shift():null;"function"==typeof e&&e.apply(this)},SWFUpload.prototype.unescapeFilePostParams=function(e){var t,i=/[$]([0-9a-f]{4})/i,a={};if(void 0!=e){for(var n in e.post)if(e.post.hasOwnProperty(n)){t=n;for(var o;null!==(o=i.exec(t));)t=t.replace(o[0],String.fromCharCode(parseInt("0x"+o[1],16)));a[t]=e.post[n]}e.post=a}return e},SWFUpload.prototype.testExternalInterface=function(){try{return this.callFlash("TestExternalInterface")}catch(e){return!1}},SWFUpload.prototype.flashReady=function(){var e=this.getMovieElement();return e?(this.cleanUp(e),void this.queueEvent("swfupload_loaded_handler")):void this.debug("Flash called back ready but the flash movie can't be found.")},SWFUpload.prototype.cleanUp=function(e){try{if(this.movieElement&&"unknown"==typeof e.CallFunction){this.debug("Removing Flash functions hooks (this should only run in IE and should prevent memory leaks)");for(var t in e)try{"function"==typeof e[t]&&(e[t]=null)}catch(i){}}}catch(a){}window.__flash__removeCallback=function(e,t){try{e&&(e[t]=null)}catch(i){}}},SWFUpload.prototype.fileDialogStart=function(){this.queueEvent("file_dialog_start_handler")},SWFUpload.prototype.fileQueued=function(e){e=this.unescapeFilePostParams(e),this.queueEvent("file_queued_handler",e)},SWFUpload.prototype.fileQueueError=function(e,t,i){e=this.unescapeFilePostParams(e),this.queueEvent("file_queue_error_handler",[e,t,i])},SWFUpload.prototype.fileDialogComplete=function(e,t,i){this.queueEvent("file_dialog_complete_handler",[e,t,i])},SWFUpload.prototype.uploadStart=function(e){e=this.unescapeFilePostParams(e),this.queueEvent("return_upload_start_handler",e)},SWFUpload.prototype.returnUploadStart=function(e){var t;if("function"==typeof this.settings.upload_start_handler)e=this.unescapeFilePostParams(e),t=this.settings.upload_start_handler.call(this,e);else if(void 0!=this.settings.upload_start_handler)throw"upload_start_handler must be a function";void 0===t&&(t=!0),t=!!t,this.callFlash("ReturnUploadStart",[t])},SWFUpload.prototype.uploadProgress=function(e,t,i){e=this.unescapeFilePostParams(e),this.queueEvent("upload_progress_handler",[e,t,i])},SWFUpload.prototype.uploadError=function(e,t,i){e=this.unescapeFilePostParams(e),this.queueEvent("upload_error_handler",[e,t,i])},SWFUpload.prototype.uploadSuccess=function(e,t,i){e=this.unescapeFilePostParams(e),this.queueEvent("upload_success_handler",[e,t,i])},SWFUpload.prototype.uploadComplete=function(e){e=this.unescapeFilePostParams(e),this.queueEvent("upload_complete_handler",e)},SWFUpload.prototype.debug=function(e){this.queueEvent("debug_handler",e)},SWFUpload.prototype.debugMessage=function(e){if(this.settings.debug){var t,i=[];if("object"==typeof e&&"string"==typeof e.name&&"string"==typeof e.message){for(var a in e)e.hasOwnProperty(a)&&i.push(a+": "+e[a]);t=i.join("\n")||"",i=t.split("\n"),t="EXCEPTION: "+i.join("\nEXCEPTION: "),SWFUpload.Console.writeLine(t)}else SWFUpload.Console.writeLine(e)}},SWFUpload.Console={},SWFUpload.Console.writeLine=function(e){var t,i;try{t=document.getElementById("SWFUpload_Console"),t||(i=document.createElement("form"),document.getElementsByTagName("body")[0].appendChild(i),t=document.createElement("textarea"),t.id="SWFUpload_Console",t.style.fontFamily="monospace",t.setAttribute("wrap","off"),t.wrap="off",t.style.overflow="auto",t.style.width="700px",t.style.height="350px",t.style.margin="5px",i.appendChild(t)),t.value+=e+"\n",t.scrollTop=t.scrollHeight-t.clientHeight}catch(a){alert("Exception: "+a.name+" Message: "+a.message)}},function(e){var t={init:function(t,a){return this.each(function(){var n=e(this),o=n.clone(),r=e.extend({id:n.attr("id"),swf:"uploadify.swf",uploader:"uploadify.php",auto:!0,buttonClass:"",buttonCursor:"hand",buttonImage:null,buttonText:"SELECT FILES",checkExisting:!1,debug:!1,fileObjName:"Filedata",fileSizeLimit:0,fileTypeDesc:"All Files",fileTypeExts:"*.*",height:30,method:"post",multi:!0,formData:{},preventCaching:!0,progressData:"percentage",queueID:!1,queueSizeLimit:999,removeCompleted:!0,removeTimeout:3,requeueErrors:!1,successTimeout:30,uploadLimit:0,width:120,overrideEvents:[]},t),l={assume_success_timeout:r.successTimeout,button_placeholder_id:r.id,button_width:r.width,button_height:r.height,button_text:null,button_text_style:null,button_text_top_padding:0,button_text_left_padding:0,button_action:r.multi?SWFUpload.BUTTON_ACTION.SELECT_FILES:SWFUpload.BUTTON_ACTION.SELECT_FILE,button_disabled:!1,button_cursor:"arrow"==r.buttonCursor?SWFUpload.CURSOR.ARROW:SWFUpload.CURSOR.HAND,button_window_mode:SWFUpload.WINDOW_MODE.TRANSPARENT,debug:r.debug,requeue_on_error:r.requeueErrors,file_post_name:r.fileObjName,file_size_limit:r.fileSizeLimit,file_types:r.fileTypeExts,file_types_description:r.fileTypeDesc,file_queue_limit:r.queueSizeLimit,file_upload_limit:r.uploadLimit,flash_url:r.swf,prevent_swf_caching:r.preventCaching,post_params:r.formData,upload_url:r.uploader,use_query_string:"get"==r.method,file_dialog_complete_handler:i.onDialogClose,file_dialog_start_handler:i.onDialogOpen,file_queued_handler:i.onSelect,file_queue_error_handler:i.onSelectError,swfupload_loaded_handler:r.onSWFReady,upload_complete_handler:i.onUploadComplete,upload_error_handler:i.onUploadError,upload_progress_handler:i.onUploadProgress,upload_start_handler:i.onUploadStart,upload_success_handler:i.onUploadSuccess};a&&(l=e.extend(l,a)),l=e.extend(l,r);var s=swfobject.getFlashPlayerVersion(),d=s.major>=9;if(d){window["uploadify_"+r.id]=new SWFUpload(l);var u=window["uploadify_"+r.id];n.data("uploadify",u);var c=e("<div />",{id:r.id,"class":"uploadify",css:{height:r.height+"px",width:r.width+"px"}});e("#"+u.movieName).wrap(c),c=e("#"+r.id),c.data("uploadify",u);var f=e("<div />",{id:r.id+"-button","class":"uploadify-button "+r.buttonClass});if(r.buttonImage&&f.css({"background-image":"url('"+r.buttonImage+"')","text-indent":"-9999px"}),f.html('<span class="uploadify-button-text">'+r.buttonText+"</span>").css({height:r.height+"px","line-height":r.height+"px",width:r.width+"px"}),c.append(f),e("#"+u.movieName).css({position:"absolute","z-index":1}),!r.queueID){var p=e("<div />",{id:r.id+"-queue","class":"uploadify-queue"});c.after(p),u.settings.queueID=r.id+"-queue",u.settings.defaultQueue=!0}u.queueData={files:{},filesSelected:0,filesQueued:0,filesReplaced:0,filesCancelled:0,filesErrored:0,uploadsSuccessful:0,uploadsErrored:0,averageSpeed:0,queueLength:0,queueSize:0,uploadSize:0,queueBytesUploaded:0,uploadQueue:[],errorMsg:"Some files were not added to the queue:"},u.original=o,u.wrapper=c,u.button=f,u.queue=p,r.onInit&&r.onInit.call(n,u)}else r.onFallback&&r.onFallback.call(n)})},cancel:function(){var t=arguments;this.each(function(){var i=e(this),a=i.data("uploadify"),n=a.settings,o=-1;if(t[0])if("*"==t[0]){var r=a.queueData.queueLength;e("#"+n.queueID).find(".uploadify-queue-item").each(function(){o++,t[1]===!0?a.cancelUpload(e(this).attr("id"),!1):a.cancelUpload(e(this).attr("id")),e(this).find(".data").removeClass("data").html(" - Cancelled"),e(this).find(".uploadify-progress-bar").remove(),e(this).delay(1e3+100*o).fadeOut(500,function(){e(this).remove()})}),a.queueData.queueSize=0,a.queueData.queueLength=0,n.onClearQueue&&n.onClearQueue.call(i,r)}else for(var l=0;l<t.length;l++)a.cancelUpload(t[l]),e("#"+t[l]).find(".data").removeClass("data").html(" - Cancelled"),e("#"+t[l]).find(".uploadify-progress-bar").remove(),e("#"+t[l]).delay(1e3+100*l).fadeOut(500,function(){e(this).remove()});else{var s=e("#"+n.queueID).find(".uploadify-queue-item").get(0);$item=e(s),a.cancelUpload($item.attr("id")),$item.find(".data").removeClass("data").html(" - Cancelled"),$item.find(".uploadify-progress-bar").remove(),$item.delay(1e3).fadeOut(500,function(){e(this).remove()})}})},destroy:function(){this.each(function(){var t=e(this),i=t.data("uploadify"),a=i.settings;i.destroy(),a.defaultQueue&&e("#"+a.queueID).remove(),e("#"+a.id).replaceWith(i.original),a.onDestroy&&a.onDestroy.call(this),delete i})},disable:function(t){this.each(function(){var i=e(this),a=i.data("uploadify"),n=a.settings;t?(a.button.addClass("disabled"),n.onDisable&&n.onDisable.call(this)):(a.button.removeClass("disabled"),n.onEnable&&n.onEnable.call(this)),a.setButtonDisabled(t)})},settings:function(t,i,a){var n=arguments,o=i;return this.each(function(){var r=e(this),l=r.data("uploadify"),s=l.settings;if("object"==typeof n[0])for(var d in i)setData(d,i[d]);if(1===n.length)o=s[t];else{switch(t){case"uploader":l.setUploadURL(i);break;case"formData":a||(i=e.extend(s.formData,i)),l.setPostParams(s.formData);break;case"method":l.setUseQueryString("get"==i?!0:!1);break;case"fileObjName":l.setFilePostName(i);break;case"fileTypeExts":l.setFileTypes(i,s.fileTypeDesc);break;case"fileTypeDesc":l.setFileTypes(s.fileTypeExts,i);break;case"fileSizeLimit":l.setFileSizeLimit(i);break;case"uploadLimit":l.setFileUploadLimit(i);break;case"queueSizeLimit":l.setFileQueueLimit(i);break;case"buttonImage":l.button.css("background-image",settingValue);break;case"buttonCursor":l.setButtonCursor("arrow"==i?SWFUpload.CURSOR.ARROW:SWFUpload.CURSOR.HAND);break;case"buttonText":e("#"+s.id+"-button").find(".uploadify-button-text").html(i);break;case"width":l.setButtonDimensions(i,s.height);break;case"height":l.setButtonDimensions(s.width,i);break;case"multi":l.setButtonAction(i?SWFUpload.BUTTON_ACTION.SELECT_FILES:SWFUpload.BUTTON_ACTION.SELECT_FILE)}s[t]=i}}),1===n.length?o:void 0},stop:function(){this.each(function(){var t=e(this),i=t.data("uploadify");i.queueData.averageSpeed=0,i.queueData.uploadSize=0,i.queueData.bytesUploaded=0,i.queueData.uploadQueue=[],i.stopUpload()})},upload:function(){var t=arguments;this.each(function(){var i=e(this),a=i.data("uploadify");if(a.queueData.averageSpeed=0,a.queueData.uploadSize=0,a.queueData.bytesUploaded=0,a.queueData.uploadQueue=[],t[0])if("*"==t[0])a.queueData.uploadSize=a.queueData.queueSize,a.queueData.uploadQueue.push("*"),a.startUpload();else{for(var n=0;n<t.length;n++)a.queueData.uploadSize+=a.queueData.files[t[n]].size,a.queueData.uploadQueue.push(t[n]);a.startUpload(a.queueData.uploadQueue.shift())}else a.startUpload()})}},i={onDialogOpen:function(){var e=this.settings;this.queueData.errorMsg="Some files were not added to the queue:",this.queueData.filesReplaced=0,this.queueData.filesCancelled=0,e.onDialogOpen&&e.onDialogOpen.call(this)},onDialogClose:function(t,i,a){var n=this.settings;this.queueData.filesErrored=t-i,this.queueData.filesSelected=t,this.queueData.filesQueued=i-this.queueData.filesCancelled,this.queueData.queueLength=a,e.inArray("onDialogClose",n.overrideEvents)<0&&this.queueData.filesErrored>0&&alert(this.queueData.errorMsg),n.onDialogClose&&n.onDialogClose.call(this,this.queueData),n.auto&&e("#"+n.id).uploadify("upload","*")},onSelect:function(t){var i=this.settings,a={};for(var n in this.queueData.files)if(a=this.queueData.files[n],1!=a.uploaded&&a.name==t.name){var o=confirm('The file named "'+t.name+'" is already in the queue.\nDo you want to replace the existing item in the queue?');if(!o)return this.cancelUpload(t.id),this.queueData.filesCancelled++,!1;e("#"+a.id).remove(),this.cancelUpload(a.id),this.queueData.filesReplaced++}var r=Math.round(t.size/1024),l="KB";r>1e3&&(r=Math.round(r/1e3),l="MB");var s=r.toString().split(".");r=s[0],s.length>1&&(r+="."+s[1].substr(0,2)),r+=l;var d=t.name;d.length>25&&(d=d.substr(0,25)+"..."),e.inArray("onSelect",i.overrideEvents)<0&&e("#"+i.queueID).append('<div id="'+t.id+'" class="uploadify-queue-item">					<div class="cancel">						<a href="javascript:$(\'#'+i.id+"').uploadify('cancel', '"+t.id+'\')">X</a>					</div>					<span class="fileName">'+d+" ("+r+')</span><span class="data"></span>					<div class="uploadify-progress">						<div class="uploadify-progress-bar"><!--Progress Bar--></div>					</div>				</div>'),this.queueData.queueSize+=t.size,this.queueData.files[t.id]=t,i.onSelect&&i.onSelect.apply(this,arguments)},onSelectError:function(t,i,a){var n=this.settings;if(e.inArray("onSelectError",n.overrideEvents)<0)switch(i){case SWFUpload.QUEUE_ERROR.QUEUE_LIMIT_EXCEEDED:this.queueData.errorMsg+=n.queueSizeLimit>a?"\nThe number of files selected exceeds the remaining upload limit ("+a+").":"\nThe number of files selected exceeds the queue size limit ("+n.queueSizeLimit+").";break;case SWFUpload.QUEUE_ERROR.FILE_EXCEEDS_SIZE_LIMIT:this.queueData.errorMsg+='\nThe file "'+t.name+'" exceeds the size limit ('+n.fileSizeLimit+").";break;case SWFUpload.QUEUE_ERROR.ZERO_BYTE_FILE:this.queueData.errorMsg+='\nThe file "'+t.name+'" is empty.';break;case SWFUpload.QUEUE_ERROR.FILE_EXCEEDS_SIZE_LIMIT:this.queueData.errorMsg+='\nThe file "'+t.name+'" is not an accepted file type ('+n.fileTypeDesc+")."}i!=SWFUpload.QUEUE_ERROR.QUEUE_LIMIT_EXCEEDED&&delete this.queueData.files[t.id],n.onSelectError&&n.onSelectError.apply(this,arguments)},onQueueComplete:function(){this.settings.onQueueComplete&&this.settings.onQueueComplete.call(this,this.settings.queueData)},onUploadComplete:function(t){var i=this.settings,a=this,n=this.getStats();if(this.queueData.queueLength=n.files_queued,"*"==this.queueData.uploadQueue[0]?this.queueData.queueLength>0?this.startUpload():(this.queueData.uploadQueue=[],i.onQueueComplete&&i.onQueueComplete.call(this,this.queueData)):this.queueData.uploadQueue.length>0?this.startUpload(this.queueData.uploadQueue.shift()):(this.queueData.uploadQueue=[],i.onQueueComplete&&i.onQueueComplete.call(this,this.queueData)),e.inArray("onUploadComplete",i.overrideEvents)<0)if(i.removeCompleted)switch(t.filestatus){case SWFUpload.FILE_STATUS.COMPLETE:setTimeout(function(){e("#"+t.id)&&(a.queueData.queueSize-=t.size,a.queueData.queueLength-=1,delete a.queueData.files[t.id],e("#"+t.id).fadeOut(500,function(){e(this).remove()}))},1e3*i.removeTimeout);break;case SWFUpload.FILE_STATUS.ERROR:i.requeueErrors||setTimeout(function(){e("#"+t.id)&&(a.queueData.queueSize-=t.size,a.queueData.queueLength-=1,delete a.queueData.files[t.id],e("#"+t.id).fadeOut(500,function(){e(this).remove()}))},1e3*i.removeTimeout)
}else t.uploaded=!0;i.onUploadComplete&&i.onUploadComplete.call(this,t)},onUploadError:function(t,i,a){var n=this.settings,o="Error";switch(i){case SWFUpload.UPLOAD_ERROR.HTTP_ERROR:o="HTTP Error ("+a+")";break;case SWFUpload.UPLOAD_ERROR.MISSING_UPLOAD_URL:o="Missing Upload URL";break;case SWFUpload.UPLOAD_ERROR.IO_ERROR:o="IO Error";break;case SWFUpload.UPLOAD_ERROR.SECURITY_ERROR:o="Security Error";break;case SWFUpload.UPLOAD_ERROR.UPLOAD_LIMIT_EXCEEDED:alert("The upload limit has been reached ("+a+")."),o="Exceeds Upload Limit";break;case SWFUpload.UPLOAD_ERROR.UPLOAD_FAILED:o="Failed";break;case SWFUpload.UPLOAD_ERROR.SPECIFIED_FILE_ID_NOT_FOUND:break;case SWFUpload.UPLOAD_ERROR.FILE_VALIDATION_FAILED:o="Validation Error";break;case SWFUpload.UPLOAD_ERROR.FILE_CANCELLED:o="Cancelled",this.queueData.queueSize-=t.size,this.queueData.queueLength-=1,(t.status==SWFUpload.FILE_STATUS.IN_PROGRESS||e.inArray(t.id,this.queueData.uploadQueue)>=0)&&(this.queueData.uploadSize-=t.size),n.onCancel&&n.onCancel.call(this,t),delete this.queueData.files[t.id];break;case SWFUpload.UPLOAD_ERROR.UPLOAD_STOPPED:o="Stopped"}e.inArray("onUploadError",n.overrideEvents)<0&&(i!=SWFUpload.UPLOAD_ERROR.FILE_CANCELLED&&i!=SWFUpload.UPLOAD_ERROR.UPLOAD_STOPPED&&e("#"+t.id).addClass("uploadify-error"),e("#"+t.id).find(".uploadify-progress-bar").css("width","1px"),i!=SWFUpload.UPLOAD_ERROR.SPECIFIED_FILE_ID_NOT_FOUND&&t.status!=SWFUpload.FILE_STATUS.COMPLETE&&e("#"+t.id).find(".data").html(" - "+o));var r=this.getStats();this.queueData.uploadsErrored=r.upload_errors,n.onUploadError&&n.onUploadError.call(this,t,i,a,o)},onUploadProgress:function(t,i,a){var n=this.settings,o=new Date,r=o.getTime(),l=r-this.timer;l>500&&(this.timer=r);var s=i-this.bytesLoaded;this.bytesLoaded=i;var d=this.queueData.queueBytesUploaded+i,u=Math.round(i/a*100),c="KB/s",f=0,p=s/1024/(l/1e3);p=Math.floor(10*p)/10,this.queueData.averageSpeed=Math.floor(this.queueData.averageSpeed>0?(this.queueData.averageSpeed+p)/2:p),p>1e3&&(f=.001*p,this.queueData.averageSpeed=Math.floor(f),c="MB/s"),e.inArray("onUploadProgress",n.overrideEvents)<0&&("percentage"==n.progressData?e("#"+t.id).find(".data").html(" - "+u+"%"):"speed"==n.progressData&&l>500&&e("#"+t.id).find(".data").html(" - "+this.queueData.averageSpeed+c),e("#"+t.id).find(".uploadify-progress-bar").css("width",u+"%")),n.onUploadProgress&&n.onUploadProgress.call(this,t,i,a,d,this.queueData.uploadSize)},onUploadStart:function(t){var i=this.settings,a=new Date;this.timer=a.getTime(),this.bytesLoaded=0,0==this.queueData.uploadQueue.length&&(this.queueData.uploadSize=t.size),i.checkExisting&&e.ajax({type:"POST",async:!1,url:i.checkExisting,data:{filename:t.name},success:function(i){if(1==i){var a=confirm('A file with the name "'+t.name+'" already exists on the server.\nWould you like to replace the existing file?');a||(this.cancelUpload(t.id),e("#"+t.id).remove(),this.queueData.uploadQueue.length>0&&this.queueData.queueLength>0&&("*"==this.queueData.uploadQueue[0]?this.startUpload():this.startUpload(this.queueData.uploadQueue.shift())))}}}),i.onUploadStart&&i.onUploadStart.call(this,t)},onUploadSuccess:function(t,i,a){var n=this.settings,o=this.getStats();this.queueData.uploadsSuccessful=o.successful_uploads,this.queueData.queueBytesUploaded+=t.size,e.inArray("onUploadSuccess",n.overrideEvents)<0&&e("#"+t.id).find(".data").html(" - Complete"),n.onUploadSuccess&&n.onUploadSuccess.call(this,t,i,a)}};e.fn.uploadify=function(i){return t[i]?t[i].apply(this,Array.prototype.slice.call(arguments,1)):"object"!=typeof i&&i?void e.error("The method "+i+" does not exist in $.uploadify"):t.init.apply(this,arguments)}}($),define("uploadify",["jquery"],function(e){return function(){var t;return t||e.$}}(this)),function(){require(["jquery","full_files","jquery.google-analytics","uploadify"],function(e){return e(function(){return e(".manage_collaborations").on("click",function(){return e.trackEvent("files","click","manage_collaborations")})})})}.call(this),define("compiled/bundles/full_files",function(){});