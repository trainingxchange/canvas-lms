(function(){define(["../start_app","ember","../shared_ajax_fixtures"],function(t,e,n){var r,i,o,s,c,u;return r=null,n.create(),i=function(t,e){return equal(find(t).prop("disabled"),e)},s=function(t,e){return equal(t,find(e).val())},o=function(t,e){return equal(t,find(e).find("option:selected").text())},c=function(t,n){return equal(e.$.trim(find(".assignmentsPanel "+t).text()),n)},u=function(t,e,n){return equal(e,n),s(t.id,"#student_select"),o(t.name,"#student_select")},module("screenreader_gradebook student/assignment navigation: on page load",{setup:function(){var e=this;return r=t(),visit("/").then(function(){return e.controller=r.__container__.lookup("controller:screenreader_gradebook")})},teardown:function(){return e.run(r,"destroy")}}),test("Previous Student button is disabled",function(){return i(".student_navigation .previous_object:first",!0)}),test("Previous Assignment button is disabled",function(){return i(".assignment_navigation .previous_object",!0)}),test("Next Student button is active",function(){return i(".student_navigation .next_object:first",!1)}),test("Next Assignment button is active",function(){return i(".assignment_navigation .next_object",!1)}),test("no student or assignment is loaded",function(){return c(".student_selection","Select a student to view additional information here."),c(".assignment_selection","Select an assignment to view additional information here.")}),module("screenreader_gradebook student/assignment navigation: with first item selected",{setup:function(){var n=this;return r=t(),visit("/").then(function(){return n.controller=r.__container__.lookup("controller:screenreader_gradebook"),e.run(function(){return n.controller.set("selectedStudent",n.controller.get("students.firstObject")),n.controller.set("selectedAssignment",n.controller.get("assignments.firstObject"))})})},teardown:function(){return e.run(r,"destroy")}}),test("Previous buttons are disabled",function(){return i(".student_navigation .previous_object:first",!0),i(".assignment_navigation .previous_object",!0),c(".student_selection","Bob"),c(".assignment_selection","Z Eats Soup")}),test("clicking Next Student button displays next student",function(){var t,e=this;return t=this.controller.get("selectedStudent"),s(t.id,"#student_select"),click(".student_navigation .next_object:first").then(function(){var n,r;return n=e.controller.get("selectedStudent"),s(n.id,"#student_select"),notEqual(t.id,n.id),r=e.controller.get("students").indexOf(t)+1,equal(r,e.controller.get("students").indexOf(n))})}),test("clicking Next Assignment button displays next assignment",function(){var t,e=this;return t=this.controller.get("selectedAssignment"),s(t.id,"#assignment_select"),click(".assignment_navigation .next_object").then(function(){var n,r;return n=e.controller.get("selectedAssignment"),s(n.id,"#assignment_select"),notEqual(t,n),r=e.controller.get("assignments").indexOf(t)+1,equal(r,e.controller.get("assignments").indexOf(n))})}),test("clicking next then previous will refocus on next student",function(){return click(".student_navigation .next_object:first").then(function(){return click(".student_navigation .previous_object:first").then(function(){return equal($(".student_navigation .next_object:first")[0],document.activeElement)})})}),test("clicking next then previous will refocus on next assignment",function(){return click(".assignment_navigation .next_object").then(function(){return click(".assignment_navigation .previous_object").then(function(){return equal($(".assignment_navigation .next_object")[0],document.activeElement)})})}),module("screenreader_gradebook student/assignment navigation: with second item selected",{setup:function(){var n=this;return r=t(),visit("/").then(function(){return n.controller=r.__container__.lookup("controller:screenreader_gradebook"),e.run(function(){return n.controller.set("selectedStudent",n.controller.get("students").objectAt(1)),n.controller.set("selectedAssignment",n.controller.get("assignments").objectAt(1))})})},teardown:function(){return e.run(r,"destroy")}}),test("Previous/Next Student buttons are both active",function(){return i(".student_navigation .previous_object:first",!1),i(".student_navigation .next_object:first",!1)}),test("Previous/Next Assignment buttons are both active",function(){return i(".assignment_navigation .previous_object",!1),i(".assignment_navigation .next_object",!1)}),module("screenreader_gradebook student/assignment navigation: with last item selected",{setup:function(){var n=this;return r=t(),visit("/").then(function(){return n.controller=r.__container__.lookup("controller:screenreader_gradebook"),e.run(function(){return n.controller.set("selectedStudent",n.controller.get("students.lastObject")),n.controller.set("selectedAssignment",n.controller.get("assignments.lastObject"))})})},teardown:function(){return e.run(r,"destroy")}}),test("Previous Student button is active",function(){return i(".student_navigation .previous_object:first",!1)}),test("Previous Assignment button is active",function(){return i(".assignment_navigation .previous_object",!1)}),test("Next Student button is disabled",function(){return i(".student_navigation .next_object:first",!0)}),test("Next Assignment button is disabled",function(){return i(".assignment_navigation .next_object",!0)}),test("clicking Previous Student button displays previous student",function(){var t,e=this;return t=this.controller.get("selectedStudent"),s(t.id,"#student_select"),click(".student_navigation .previous_object:first").then(function(){var n,r;return n=e.controller.get("selectedStudent"),s(n.id,"#student_select"),notEqual(t.id,n.id),r=e.controller.get("students").indexOf(t)-1,equal(r,e.controller.get("students").indexOf(n))})}),test("clicking Previous Assignment button displays previous assignment",function(){var t,e=this;return t=this.controller.get("selectedAssignment"),s(t.id,"#assignment_select"),click(".assignment_navigation .previous_object").then(function(){var n,r;return n=e.controller.get("selectedAssignment"),s(n.id,"#assignment_select"),notEqual(t.id,n.id),r=e.controller.get("assignments").indexOf(t)-1,equal(r,e.controller.get("assignments").indexOf(n))})}),test("clicking previous then next will reset the focus for students",function(){return click(".student_navigation .previous_object:first").then(function(){return click(".student_navigation .next_object:first").then(function(){return equal($(".student_navigation .previous_object:first")[0],document.activeElement)})})}),test("clicking previous then next will reset the focus for assignments",function(){return click(".assignment_navigation .previous_object").then(function(){return click(".assignment_navigation .next_object").then(function(){return equal($(".assignment_navigation .previous_object")[0],document.activeElement)})})}),module("screenreader_gradebook assignment navigation: display update",{setup:function(){var n=this;return r=t(),visit("/").then(function(){return n.controller=r.__container__.lookup("controller:screenreader_gradebook"),e.run(function(){return n.controller.set("selectedStudent",n.controller.get("students.firstObject")),n.controller.set("selectedAssignment",n.controller.get("assignments.firstObject"))})})},teardown:function(){return e.run(r,"destroy")}}),test("screenreader_gradebook assignment selection: grade for field updates",function(){var t,n,r,i=this;return t="label[for='student_and_assignment_grade']",r=this.controller.get("selectedAssignment.name"),c(t,"Grade for: "+r),e.run(function(){return i.controller.set("selectedAssignment",i.controller.get("assignments").objectAt(2))}),n=this.controller.get("selectedAssignment.name"),c(t,"Grade for: "+n)}),module("screenreader_gradebook assignment navigation: assignment sorting",{setup:function(){var e=this;return r=t(),visit("/").then(function(){return e.controller=r.__container__.lookup("controller:screenreader_gradebook")})},teardown:function(){var t=this;return e.run(function(){return t.controller.set("assignmentSort",t.controller.get("assignmentSortOptions").findBy("value","assignment_group"))}),e.run(r,"destroy")}}),test("alphabetical",function(){var t,n,r=this;return t=this.controller.get("assignments.firstObject"),e.run(function(){return r.controller.set("assignmentSort",r.controller.get("assignmentSortOptions").findBy("value","alpha"))}),i(".assignment_navigation .next_object",!1),i(".assignment_navigation .previous_object",!0),n=this.controller.get("assignments.firstObject"),notEqual(t,n),click(".assignment_navigation .next_object").then(function(){return s(n.id,"#assignment_select")})}),test("due date",function(){var t,n,r=this;return t=this.controller.get("assignments.firstObject"),e.run(function(){return r.controller.set("assignmentSort",r.controller.get("assignmentSortOptions").findBy("value","due_date"))}),i(".assignment_navigation .next_object",!1),i(".assignment_navigation .previous_object",!0),n=this.controller.get("assignments.firstObject"),notEqual(t,n),click(".assignment_navigation .next_object").then(function(){return s(n.id,"#assignment_select")})}),test("changing sorting option with selectedAssignment",function(){var t=this;return e.run(function(){return t.controller.set("assignmentSort",t.controller.get("assignmentSortOptions").findBy("value","alpha"))}),click(".assignment_navigation .next_object").then(function(){var n,r;return n=t.controller.get("selectedAssignment"),s(n.id,"#assignment_select"),equal(n.name,"Apples are good"),r=t.controller.get("assignments").objectAt(t.controller.get("assignmentIndex")+1),click(".assignment_navigation .next_object").then(function(){return s(r.id,"#assignment_select"),notEqual(n.id,r.id),equal(r.name,"Big Bowl of Nachos"),click(".assignment_navigation .previous_object").then(function(){var r,i,o,c;return o=t.controller.get("selectedAssignment"),equal(o.id,n.id),s(o.id,"#assignment_select"),i=t.controller.get("assignmentIndex"),e.run(function(){return t.controller.set("assignmentSort",t.controller.get("assignmentSortOptions").findBy("value","due_date"))}),equal(o.id,t.controller.get("selectedAssignment.id")),notEqual(i,t.controller.get("assignmentIndex")),c=t.controller.get("assignmentIndex"),r=t.controller.get("assignments").objectAt(c+1),click(".assignment_navigation .next_object").then(function(){return s(r.id,"#assignment_select")})})})})}),module("screenreader_gradebook student navigation: section selection",{setup:function(){var n=this;return r=t(),visit("/").then(function(){return n.controller=r.__container__.lookup("controller:screenreader_gradebook"),e.run(function(){return n.controller.set("selectedSection",n.controller.get("sections.lastObject"))})})},teardown:function(){return e.run(r,"destroy")}}),test("prev/next still work",function(){var t=this;return i(".student_navigation .previous_object:first",!0),i(".student_navigation .next_object:first",!1),click(".student_navigation .next_object:first").then(function(){var e,n;return e=t.controller.get("selectedStudent"),n=t.controller.get("studentIndex"),i(".student_navigation .previous_object:first",!0),u(e,n,0),click(".student_navigation .next_object:first").then(function(){var r;return r=t.controller.get("selectedStudent"),n=t.controller.get("studentIndex"),i(".student_navigation .previous_object:first",!1),u(r,n,1),notEqual(e,r)}),click(".student_navigation .previous_object:first").then(function(){return i(".student_navigation .previous_object:first",!0),i(".student_navigation .next_object:first",!1)})})}),test("resets selectedStudent when student is not in both sections",function(){var t=this;return click(".student_navigation .next_object:first").then(function(){var n,r;return n=t.controller.get("selectedStudent"),e.run(function(){return t.controller.set("selectedSection",t.controller.get("sections.firstObject"))}),r=t.controller.get("selectedStudent"),notEqual(n,r),equal(r,null),click(".student_navigation .next_object:first").then(function(){var e;return e=t.controller.get("selectedStudent"),notEqual(e,n),notEqual(e,r)})})}),test("maintains selectedStudent when student is in both sections and updates navigation points",function(){var t=this;return e.run(function(){return t.controller.set("selectedStudent",t.controller.get("students").objectAt(4))}),visit("/").then(function(){var n,r,s;return i(".student_navigation .previous_object:first",!1),i(".student_navigation .next_object:first",!1),s=t.controller.get("selectedStudent"),o(s.name,"#student_select"),o(t.controller.get("selectedSection.name"),"#section_select"),r=t.controller.get("studentsInSelectedSection").indexOf(s),equal(r,1),equal(t.controller.get("studentIndex"),r),e.run(function(){return t.controller.set("selectedSection",t.controller.get("sections.firstObject"))}),i(".student_navigation .previous_object:first",!1),i(".student_navigation .next_object:first",!1),n=t.controller.get("selectedStudent"),o(n.name,"#student_select"),o(t.controller.get("selectedSection.name"),"#section_select"),equal(s,n),r=t.controller.get("studentsInSelectedSection").indexOf(s),equal(r,3),equal(t.controller.get("studentIndex"),r)})}),module("screenreader_gradebook student/assignment navigation: announcing selection with aria-live",{setup:function(){var n=this;return r=t(),visit("/").then(function(){return n.controller=r.__container__.lookup("controller:screenreader_gradebook"),e.run(function(){return n.controller.set("selectedStudent",n.controller.get("students.firstObject")),n.controller.set("selectedAssignment",n.controller.get("assignments.firstObject"))})})},teardown:function(){return e.run(r,"destroy")}}),test("aria-announcer",function(){var t=this;return equal(e.$.trim(find(".aria-announcer").text()),""),click(".student_navigation .next_object:first").then(function(){var n;return n=t.controller.get("selectedStudent.name"),equal(e.$.trim(find(".aria-announcer").text()),n)}),click(".assignment_navigation .next_object").then(function(){var n;return n=t.controller.get("selectedAssignment.name"),equal(e.$.trim(find(".aria-announcer").text()),n)}),click("#hide_names_checkbox").then(function(){return e.run(function(){return equal(e.$.trim(find(".aria-announcer").text()),"")})})})})}).call(this);