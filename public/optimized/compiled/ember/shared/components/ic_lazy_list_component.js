(function(){define(["../register","ember","../../shared/xhr/parse_link_header","underscore","../templates/components/ic-lazy-list"],function(t,e,i,n){var r,s,o;return o=n.throttle,r=e.$(window),s=e.Component.extend({tagName:"ic-lazy-list",registerWithConstructor:function(){return this.get("meta.next")?this.constructor.register(this):void 0}.observes("meta.next"),unregisterFromConstructor:function(){return this.get("meta.next")?void 0:this.constructor.unregister(this)}.observes("meta.next"),setData:function(){return this.set("data",e.ArrayProxy.create({content:[]})),this.set("meta",e.Object.create())}.on("init"),loadRecords:function(t){return this.set("isLoading",!0),e.$.getJSON(t||this.get("href"),this.ajaxCallback.bind(this))}.on("didInsertElement"),loadNextRecords:function(){return this.loadRecords(this.get("meta.next"))},ajaxCallback:function(t,e,i){return this.get("data").pushObjects(this.normalize(t,e,i)),this.set("meta",this.extractMeta(t,e,i)),this.set("isLoading",!1)},normalize:function(t){var e;return e=this.get("data-key"),e?t[e]:t},extractMeta:function(t,e,n){return i(n)}}),s.reopenClass({views:[],register:function(t){return this.views.addObject(t),1===this.views.length&&r.on("scroll.ic-lazy-list",o(this.checkViews.bind(this),100)),e.run.scheduleOnce("afterRender",this,"checkViews")},unregister:function(t){return this.views.removeObject(t),0===this.views.length?r.off("scroll.ic-lazy-list"):void 0},checkViews:function(){var t,e,i,n,r;for(r=this.views,i=0,n=r.length;n>i;i++)e=r[i],e.get("isLoading")||(t=e.get("element").getBoundingClientRect().bottom,t<=window.innerHeight&&e.loadNextRecords());return null}}),t("component","ic-lazy-list",s)})}).call(this);