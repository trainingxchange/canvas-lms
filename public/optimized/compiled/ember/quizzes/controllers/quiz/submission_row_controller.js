(function(){define(["ember","../../shared/seconds_to_time","../../shared/environment","i18n!quizzez_submission_row","../../mixins/submission_time"],function(t,i,e,s,u){return t.ObjectController.extend(u,{needs:["quiz","quiz_moderate"],allowedAttempts:Ember.computed.alias("quizSubmission.quiz.allowedAttempts"),multipleAttemptsAllowed:Ember.computed.alias("quizSubmission.quiz.multipleAttemptsAllowed"),keptScore:Ember.computed.alias("quizSubmission.keptScore"),quizPointsPossible:Ember.computed.alias("quizSubmission.quizPointsPossible"),hasActiveSubmission:Ember.computed.bool("quizSubmission.startedAt"),quiz:Ember.computed.alias("controllers.quiz.model"),okayToReload:Ember.computed.bool("controllers.quiz_moderate.okayToReload"),selected:!1,attempts:function(){return this.get("hasActiveSubmission")?this.get("quizSubmission.attempt"):void 0}.property("quizSubmission.attempt"),friendlyScore:function(){var t;if(!this.get("isActive")&&(this.get("keptScore")||0===this.get("keptScore")))return t=Math.round(100*this.get("keptScore"))/100,""+t+" / "+this.get("quizPointsPossible")}.property("keptScore","quizPointsPossible","isActive"),remainingAttempts:function(){var t,i;if(!this.get("unlimitedAttempts"))return i=this.get("hasActiveSubmission")?parseInt(this.get("allowedAttempts"),10)-parseInt(this.get("attempts"),10):this.get("quiz.allowedAttempts"),t=this.get("quizSubmission.extraAttempts"),t&&(i+=parseInt(t,10)),Math.max(i,0)}.property("attempts","allowedAttempts","mulitpleAttemptsAllowed","unlimitedAttempts","quizSubmission.extraAttempts"),remainingStatusLabel:function(){return this.get("unlimitedAttempts")?s.t("unlimited","Unlimited"):""}.property("unlimitedAttempts"),extraTimeAllowed:function(){return this.get("quizSubmission.extraTime")&&this.get("quizSubmission.extraTime")>0}.property("quizSubmission.extraTime"),extraTimeOnAttempt:function(){return s.t("gets_extra_minutes","gets %{num} extra minutes on each attempt",{num:this.get("quizSubmission.extraTime")})}.property("quizSubmission.extraTime"),unlimitedAttempts:function(){return this.get("quiz.multipleAttemptsAllowed")&&-1===this.get("quiz.allowedAttempts")}.property("quiz.multipleAttemptsAllowed","quiz.allowedAttempts"),historyLink:function(){var t,i,s;return this.get("quizSubmission.id")?(i="history?quiz_submission_id="+this.get("quizSubmission.id"),s=this.get("controllers.quiz.model.id"),t=e.get("courseId"),"/courses/"+t+"/quizzes/"+s+"/"+i):null}.property("quizSubmission.id"),extendable:function(){var t,i,e;return t=this.get("quizSubmission.endAt"),e=new Date,i=e.setHours(e.getHours()-1),this.get("quizSubmission.isUntaken")&&this.get("quiz.timeLimit")&&t&&t>i}.property("quizSubmission.isUntaken","quiz.timeLimit","quizSubmission.endAt")})})}).call(this);