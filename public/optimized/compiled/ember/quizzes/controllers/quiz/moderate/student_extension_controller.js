(function(){define(["ember","ic-ajax","i18n!quiz_extensions"],function(t,e,n){var i;return i=t.ArrayController.extend({needs:["quiz"],quiz:Ember.computed.alias("controllers.quiz.model"),extension:Ember.Object.create,title:n.t("student_extensions","Student Extensions"),extensionsFor:function(){var t;return 1===this.get("length")?(t=this.get("firstObject.name"),n.t("extensions_student","Extensions for %{student}",{student:t})):n.t("extensions_num_students","Extensions for %{num} Students",{num:this.get("length")})}.property("@each"),modalHeight:function(){var t;return t=220,this.get("quiz.timeLimit")&&(t+=60),this.get("unlimitedAttempts")||(t+=60),t}.property("quiz.timeLimit","unlimitedAttempts"),unlimitedAttempts:function(){return this.get("quiz.multipleAttemptsAllowed")&&-1===this.get("quiz.allowedAttempts")}.property("quiz.multipleAttemptsAllowed","quiz.allowedAttempts"),extraAttemptsNote:function(){return n.t("everyone_gets_attempts","everyone already gets %{num}",{num:this.get("quiz.allowedAttempts")})}.property("quiz.allowedAttempts"),extraTimeNote:function(){return n.t("everyone_gets_time","everyone already gets %{num} minutes",{num:this.get("quiz.timeLimit")})}.property("quiz.timeLimit"),setupExtension:function(){var t,e;return 1===this.get("length")?(e=this.get("firstObject.quizSubmission"),this.set("extension.extraAttempts",e.get("extraAttempts")),this.set("extension.extraTime",e.get("extraTime")),this.set("extension.manuallyUnlocked",e.get("manuallyUnlocked"))):(t=this.everyProperty("quizSubmission.manuallyUnlocked",!0),this.set("extension.manuallyUnlocked",!!this.get("length")&&t))}.observes("model"),actions:{submit:function(){var t,i,s=this;return i=this.get("model").map(function(t){return{user_id:t.get("id"),extra_attempts:s.get("extension.extraAttempts"),extra_time:s.get("extension.extraTime"),manually_unlocked:s.get("extension.manuallyUnlocked")}}),t={url:this.get("quiz").get("quizExtensionsUrl"),data:JSON.stringify({quiz_extensions:i}),type:"POST",dataType:"json",contentType:"application/json",headers:{Accepts:"application/vnd.api+json"}},e.raw(t).then(function(){return $.flashMessage(n.t("extensions_successfully_added","Extensions Successfully Added")),s.send("refreshData")})}}})})}).call(this);