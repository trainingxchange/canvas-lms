(function(){define(["ember","ic-ajax","i18n!quiz_message_students"],function(t,e,s){var i;return i=t.computed.equal,t.ArrayController.extend({needs:["quiz"],quiz:t.computed.alias("controllers.quiz.model"),title:s.t("message_students_who","Message Students Who..."),recipientGroups:function(){return[t.Object.create({id:"submitted",name:s.t("students_who_have_taken_the_quiz","Students Who Have Taken the Quiz")}),t.Object.create({id:"unsubmitted",name:s.t("student_who_have_not_taken_the_quiz","Students Who Have Not Taken the Quiz")})]}.property("quiz.submittedStudents","quiz.unsubmittedStudents"),recipients:function(){return this.get("submitted"===this.get("selectedRecipientGroup")?"quiz.submittedStudents":"quiz.unsubmittedStudents")}.property("selectedRecipientGroup","quiz.submittedStudents","quiz.unsubmittedStudents"),showUnsubmitted:i("selectedRecipientGroup","unsubmitted"),noRecipients:i("recipients.length",0),moreRecipientsLabel:function(){var t,e,i;return"submitted"===this.get("selectedRecipientGroup")?(t=this.store.metadataFor("submittedStudent").pagination,e=this.get("quiz.submittedStudents.length")):(t=this.store.metadataFor("unsubmittedStudent").pagination,e=this.get("quiz.unsubmittedStudents.length")),i=t?t.count:0,i>e?s.t("and_num_more_students","and %{num} more students",{num:i-e}):void 0}.property("selectedRecipientGroup","quiz.submittedStudents","quiz.unsubmittedStudents"),modalHeight:function(){return 325+10*this.get("recipients.length")}.property("recipients","recipients.isFulfilled"),actions:{submit:function(){return this.get("messageBody")?(e.request({url:this.get("quiz.messageStudentsUrl"),data:JSON.stringify({conversations:[{recipients:this.get("selectedRecipientGroup"),body:this.get("messageBody")}]}),type:"POST",dataType:"json",contentType:"application/json"}),t.$.flashMessage(s.t("message_sent_successfully","Message sent successfully"))):t.$.flashWarning(s.t("message_not_sent_because_empty","Message not sent because it was left empty"))}}})})}).call(this);