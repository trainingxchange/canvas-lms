(function(){define(["ember","../start_app","../shared_ajax_fixtures","../environment_setup","ic-ajax","jquery","../test_title","jqueryui/dialog"],function(t,n,e,i,r,o,u){var s,c,a,l,h;return c=null,a=e.QUIZZES[0],s={fixtures:e},l=null,module("Quiz Show Integration for Teachers",{setup:function(){return c=n(),e.create(),l=c.__container__.lookup("store:main")},teardown:function(){return t.run(c,"destroy")}}),h=function(t,n){return test(t,function(){return visit("/1").then(n)})},u({path:"/1",title:"Alt practice test: Overview"}),h("shows attributes",function(){var t,n;return t=find("#quiz-show").html(),n=function(n,e){return ok(t.match(n),"shows "+e)},ok(-1!==t.indexOf(a.description),"doesn't escape server-sanitized HTML"),n(a.title,"quiz title"),n(a.points_possible,"points possible")}),h("shows assignment group",function(){var t;return t=find("#quiz-show").text(),ok(t.match(s.name))}),h("show page shows submission html",function(){var t;return t=find("#quiz-show").text(),ok(t.match("submission html!"))}),h("allows user to delete a quiz",function(){var t;return t=null,click("ic-menu-trigger").then(function(){return click("ic-menu-item.js-delete")}).then(function(){return stop(),l.find("quiz",1).then(function(n){return t=n})}).then(function(){return start(),r.defineFixture("/api/v1/courses/1/quizzes/1",{response:{},jqXHR:{statusCode:204},textStatus:"success"}),click(o(".confirm-dialog-confirm-btn"))}).then(function(){return ok(t.get("isDeleted"),"quiz deleted")})}),h("allows locking/unlocking from the dropdown menu",function(){var t,n,e;return e=null,n=null,t=function(){return click("ic-menu-trigger").then(function(){return click("ic-menu-item.js-due-date-toggler")})},stop(),l.find("quiz",1).then(function(t){return e=t,n=e.get("lockAt"),start()}),t().then(function(){return ok(e.get("lockAt")!==n,"lock date updated")}).then(function(){return t()}).then(function(){return ok(!e.get("lockAt"),"can unlock quiz")})}),h("allows sending messages to students",function(){var t;return t=sinon.fakeServer.create(),t.respondWith("POST","http://localhost:3000/courses/1/quizzes/1/submission_users/message",JSON.stringify({status:"created"})),t.autoRespond=!0,click("ic-menu-trigger").then(function(){return click(".js-message-students")}).then(function(){return fillIn("#message-body","Ohi"),sinon.spy(o,"ajax")}).then(function(){return click(".ui-dialog .btn.btn-primary")}).then(function(){var n,e;return n=o.ajax.getCall(0).args[0],e=n.url,equal(e,"http://localhost:3000/courses/1/quizzes/1/submission_users/message"),t.restore(),o.ajax.restore()})}),h("shows a link to take the quiz in the dropdown",function(){return click("ic-menu-trigger").then(function(){return stop(),l.find("quiz",1)}).then(function(t){return start(),equal(o(find(".js-take-quiz")).attr("href"),t.get("takeQuizUrl"))})}),h("displays a rubric link in the dropdown",function(){return click("ic-menu-trigger").then(function(){return equal(find("ic-menu-item .icon-rubric").length,1)})}),module("Quiz Show Integration for Students",{setup:function(){return c=n(),l=c.__container__.lookup("store:main")},teardown:function(){return t.run(c,"destroy")}}),h=function(t,n){return test(t,function(){return visit("/2").then(n)})},h("show page shows submission html",function(){var t;return t=find("#quiz-show").text(),ok(t.match("submission html!"))}),h("shows attributes",function(){var t,n;return t=find("#quiz-show").html(),n=function(n,e){return ok(t.match(n),"shows "+e)},ok(-1!==t.indexOf(a.description),"doesn't escape server-sanitized HTML"),n(a.title,"quiz title"),n(a.points_possible,"points possible")}),h("doesnt show teacher actions",function(){return ok(!find(".teacher-action-buttons").length,"shoudln't show teacher action buttons")}),h("shows student actions",function(){return ok(find(".student-action-buttons").length,"shoud show student action buttons")}),h("doesnt show tabs",function(){return ok(!find("#quiz-show-tabs").length,"should not have tabs")})})}).call(this);