(function(){define(["ic-ajax","ember","underscore","../start_app","../environment_setup"],function(t,e,r,n){var o,u,s,i,c,a;return s=e.run,o=null,i=null,a=null,u=function(t){return r.extend({completion:0,context_id:1,context_type:"Quizzes::QuizStatistics",created_at:"2014-04-02T09:40:32Z",id:1,message:null,tag:"Quizzes::QuizStatistics",updated_at:"2014-04-02T09:40:36Z",user_id:null,workflow_state:"running",url:"http://localhost:3000/api/v1/progress/1"},t)},module("Progress",{setup:function(){return o=n(),s(function(){var e,r,n;return r=o.__container__,n=r.lookup("store:main"),i=n.createRecord("progress",u()),e=r.lookup("adapter:progress"),e.ajax=function(e,r){return t.request({url:e,type:r})}})},teardown:function(){return clearTimeout(a),s(o,"destroy")}}),c=function(t,e){return asyncTest(t,function(){return a=setTimeout(function(){return ok(!1,"timed out"),start()},1e3),e()})},c("#trackCompletion: it polls until complete",function(){return expect(1),t.defineFixture("/api/v1/progress/1",{response:u({workflow_state:"completed"}),jqXHR:{},textStatus:"success"}),s(function(){return i.trackCompletion(5).then(function(){return ok(!0,"notifies me when it's done"),start()})})}),c("#trackCompletion: it reports failures",function(){return expect(1),t.defineFixture("/api/v1/progress/1",{response:u({workflow_state:"failed"}),jqXHR:{},textStatus:"success"}),s(function(){return i.trackCompletion(5).then(function(){return ok(!1,"progress success callback should never be called"),start()},function(){return ok(!0,"progress failure callback should be called"),start()})})})})}).call(this);