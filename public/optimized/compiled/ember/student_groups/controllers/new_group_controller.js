(function(){define(["ember","ic-ajax"],function(e){var t;return t=e.ObjectController.extend({needs:["student_groups","users"],joinLevel:"parent_context_auto_join",name:"",nameError:function(){var e;return e=this.get("name").length,0===e||e>255}.property("name.length"),selectOptions:[{value:"parent_context_auto_join",desc:"Course members are free to join"},{value:"invitation_only",desc:"Membership by invitation only"}],buildInvites:function(){var e;return e={},this.get("controllers.users").forEach(function(t){return t.get("invite")?e[t.get("id")]=1:void 0}),e},actions:{createGroup:function(){var e,t,n=this;return this.nameError?void 0:(t=this.buildInvites(),e=this.store.createRecord("group",{name:this.get("name"),join_level:this.get("joinLevel"),course_id:ENV.course_id,invites:t}),e.save().then(function(e){var t;return n.set("name",""),t=e.toJSON(),t.id=e.id,n.get("controllers.student_groups.groups").pushObject(t)}))}}})})}).call(this);