(function(){var n={}.hasOwnProperty,t=function(t,i){function e(){this.constructor=t}for(var r in i)n.call(i,r)&&(t[r]=i[r]);return e.prototype=i.prototype,t.prototype=new e,t.__super__=i.prototype,t};define(["underscore","Backbone","compiled/util/UniqueDropdownCollection"],function(n,i,e){var r,s;return r=function(e){function r(){return s=r.__super__.constructor.apply(this,arguments)}return t(r,e),r.prototype.initialize=function(n,t){var e,s;return null==t&&(t={}),e=t||{},this.assignments=e.assignments,this.ag_id=e.ag_id,t.possibleValues=(null!=(s=this.assignments)?s.map(function(n){return n.id}):void 0)||[],t.propertyName="chosen_id",t.model=i.Model,r.__super__.initialize.apply(this,arguments)},r.prototype.updateAssignments=function(n){return this.assignments=n},r.prototype.updateAssignmentGroupId=function(n){return this.ag_id=n},r.prototype.toAssignments=function(t){var i,e=this;return i=this.assignments.map(function(n){var i;return i=e.availableValues.find(function(t){return n.id===t.id}),i||n.id===t?n.toView():void 0}),n.compact(i)},r.prototype.parse=function(n){var t,i,e,r,s,o,u;for(i=[],r=o=0,u=n.length;u>o;r=++o)e=n[r],(t=this.findAssignment(e))&&(s={id:n.id||r,chosen:t.name(),chosen_id:t.get("id"),label_id:this.ag_id||"new"},i.push(s));return i},r.prototype.findAssignment=function(n){return this.assignments.find(function(t){return t.id===n})},r.prototype.findNextAvailable=function(){var n,t=this;return n=this.assignments.find(function(n){return t.availableValues.find(function(t){return n.id===t.id})}),this.availableValues.get(n.id)},r}(e)})}).call(this);