(function(){var t={}.hasOwnProperty,e=function(e,n){function r(){this.constructor=e}for(var o in n)t.call(n,o)&&(e[o]=n[o]);return r.prototype=n.prototype,e.prototype=new r,e.__super__=n.prototype,e};define(["Backbone","compiled/models/Entry","compiled/arr/walk"],function(t,n,r){var o,i;return o=function(t){function o(){return i=o.__super__.constructor.apply(this,arguments)}return e(o,t),o.prototype.defaults={perPage:50,initialPage:0},o.prototype.model=n,o.prototype.totalPages=function(){return Math.ceil(this.length/this.options.perPage)},o.prototype.getPage=function(t){var e;return"next"===t?this.getPage(this.currentPage+1):(this.currentPage=t,e=this.getPageIndicies(t),this.toArray().slice(e.start,e.end))},o.prototype.getPageIndicies=function(t){var e,n;return n=t*this.options.perPage,e=n+this.options.perPage,{start:n,end:e}},o.prototype.getPageAsCollection=function(t,e){return null==e&&(e=this.options),t=new this.constructor(this.getPage(t),e),t.fullCollection=this,t},o.prototype.setAllReadState=function(t){return this.each(function(e){return e.set("read_state",t)})},o.prototype.getEntryData=function(t){var e,n,o,i,s,a,l,u,p,c,g=this;if(n=null,s=null,o=0,r(this.toJSON(),"replies",function(e){var r;return r=null!=g.get(e.id),null===n&&r&&(s=e),r?o=0:null===n&&(o+=1),e.id+""===t?n=e:void 0}),null==s||null==n)return null;for(a=this.indexOf(this.get(s.id)),i=u=0,p=this.totalPages();(p>=0?p>=u:u>=p)&&(c=this.getPageIndicies(i),l=c.start,e=c.end,!(a>=l&&e>a));i=p>=0?++u:--u);return{entry:n,rootParent:s,page:i,levels:o}},o}(t.Collection)})}).call(this);