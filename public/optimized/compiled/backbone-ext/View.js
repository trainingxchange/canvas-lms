(function(){var t=function(t,e){return function(){return t.apply(e,arguments)}},e={}.hasOwnProperty,i=function(t,i){function r(){this.constructor=t}for(var n in i)e.call(i,n)&&(t[n]=i[n]);return r.prototype=i.prototype,t.prototype=new r,t.__super__=i.prototype,t},r=[].slice;define(["jquery","vendor/backbone","underscore","str/htmlEscape","compiled/util/mixin"],function(e,n,o,s,h){var c;return n.View=function(n){function p(){return this.renderView=t(this.renderView,this),this.createBindings=t(this.createBindings,this),this.render=t(this.render,this),c=p.__super__.constructor.apply(this,arguments)}return i(p,n),p.prototype.defaults={},p.prototype.els=null,p.optionProperty=function(t){return this.__optionProperties__=(this.__optionProperties__||[]).concat([t])},p.optionProperty("template"),p.child=function(t,e){var i;return this.optionProperty(t),null==(i=this.__childViews__)&&(this.__childViews__=[]),this.__childViews__=this.__childViews__.concat([{name:t,selector:e}])},p.prototype.initialize=function(t){var e,i,r,n;if(this.options=o.extend({},this.defaults,t),this.setOptionProperties(),this.storeChildrenViews(),this.$el.data("view",this),this._setViewProperties(),this.__initialize__)for(n=this.__initialize__,i=0,r=n.length;r>i;i++)e=n[i],e.call(this);return this.attach(),this},p.prototype.storeChildrenViews=function(){var t=this;if(this.constructor.__childViews__)return this.children=o.map(this.constructor.__childViews__,function(e){return t[e.name]})},p.prototype.setOptionProperties=function(){var t,e,i,r,n;for(r=this.constructor.__optionProperties__,n=[],e=0,i=r.length;i>e;e++)t=r[e],n.push(void 0!==this.options[t]?this[t]=this.options[t]:void 0);return n},p.prototype.render=function(){return this.renderEl(),this._afterRender(),this},p.prototype.renderEl=function(){return this.template?this.$el.html(this.template(this.toJSON())):void 0},p.prototype.cacheEls=function(){var t,e,i,r;if(this.els){i=this.els,r=[];for(e in i)t=i[e],r.push(this[t]=this.$(e));return r}},p.prototype._afterRender=function(){return this.cacheEls(),this.createBindings(),this.options.views&&this.renderViews(),this.renderChildViews(),this.afterRender()},p.prototype.afterRender=function(){var t,e,i,r,n;if(this.__afterRender__){for(r=this.__afterRender__,n=[],e=0,i=r.length;i>e;e++)t=r[e],n.push(t.call(this));return n}},p.prototype.attach=function(){var t,e,i,r,n;if(this.__attach__){for(r=this.__attach__,n=[],e=0,i=r.length;i>e;e++)t=r[e],n.push(t.call(this));return n}},p.prototype.toJSON=function(){var t,e;return e=this.model||this.collection,t=e?e.present?e.present():e.toJSON():this.options,t.cid=this.cid,null!=window.ENV&&(t.ENV=window.ENV),t},p.prototype.renderChildViews=function(){var t,e,i,r,n,o,s;if(this.constructor.__childViews__){for(o=this.constructor.__childViews__,r=0,n=o.length;n>r;r++)s=o[r],t=s.name,e=s.selector,null==this[t]&&"undefined"!=typeof console&&null!==console&&"function"==typeof console.warn&&console.warn("I need a child view '"+t+"' but one was not provided"),this[t]&&(i=this.$(e),this[t].setElement(i),this[t].render());return null}},p.prototype.createBindings=function(){var t=this;return this.$("[data-bind]").each(function(i,r){var n,o;return n=e(r),o=n.data("bind"),t.model.on("change:"+o,function(e,i){return n.html(t.format(o,i))})})},p.prototype.format=function(t,e){return s(e)},p.prototype.stopPropagation=function(t){return t.stopPropagation()},p.mixin=function(){var t;return t=1<=arguments.length?r.call(arguments,0):[],h.apply(null,[this].concat(r.call(t)))},p.prototype.renderViews=function(){return o.each(this.options.views,this.renderView)},p.prototype.renderView=function(t,e){var i,r;return i=this.$("#"+e),i.length||(i=this.$("."+e)),t.setElement(i),t.render(),null!=(r=this[e])?r:this[e]=t},p.prototype.hide=function(){return this.$el.hide()},p.prototype.show=function(){return this.$el.show()},p.prototype.toggle=function(){return this.$el.toggle()},p.prototype._setViewProperties=function(){this.setViewProperties!==!1&&(this.model&&(this.model.view=this),this.collection&&(this.collection.view=this))},p}(n.View),n.View})}).call(this);