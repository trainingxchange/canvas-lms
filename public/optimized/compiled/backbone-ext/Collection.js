(function(){var t={}.hasOwnProperty,e=function(e,n){function r(){this.constructor=e}for(var i in n)t.call(n,i)&&(e[i]=n[i]);return r.prototype=n.prototype,e.prototype=new r,e.__super__=n.prototype,e},n=[].slice;define(["vendor/backbone","underscore","compiled/util/mixin","compiled/backbone-ext/DefaultUrlMixin"],function(t,r,i,o){var s;return t.Collection=function(t){function l(){return s=l.__super__.constructor.apply(this,arguments)}return e(l,t),l.mixin=function(){var t;return t=1<=arguments.length?n.call(arguments,0):[],i.apply(null,[this].concat(n.call(t)))},l.mixin(o),l.prototype.defaults={params:void 0,resourceName:void 0,contextAssetString:void 0},l.optionProperty=function(t){return this.__optionProperties__=(this.__optionProperties__||[]).concat([t])},l.prototype.setOptionProperties=function(){var t,e,n,r,i;for(r=this.constructor.__optionProperties__,i=[],e=0,n=r.length;n>e;e++)t=r[e],i.push(void 0!==this.options[t]?this[t]=this.options[t]:void 0);return i},l.prototype.initialize=function(t,e){return this.options=r.extend({},this.defaults,e),this.setOptionProperties(),l.__super__.initialize.apply(this,arguments)},l.prototype.setParam=function(t,e){var n,r;return null==(r=(n=this.options).params)&&(n.params={}),this.options.params[t]=e,this.trigger("setParam",t,e)},l.prototype.setParams=function(t){var e,n;for(e in t)n=t[e],this.setParam(e,n);return this.trigger("setParams",t)},l.prototype.deleteParam=function(t){var e;return null!=(e=this.options.params)&&delete e[t],this.trigger("deleteParam",t)},l.prototype.fetch=function(t){var e=this;return null==t&&(t={}),null==t.data&&null!=this.options.params&&(t.data=this.options.params),l.__super__.fetch.call(this,t).fail(function(t){return e.trigger("fetch:fail",t)})},l.prototype.url=function(){return this._defaultUrl()},l.optionProperty("contextAssetString"),l.optionProperty("resourceName"),l.prototype.parse=function(t,e){var n,i,o,s,p,a;return null==t?l.__super__.parse.apply(this,arguments):(a=r.pick(t,"meta","links","linked"),r.isEmpty(a)?l.__super__.parse.apply(this,arguments):(i=r.omit(t,"meta","links","linked"),r.isEmpty(i)?l.__super__.parse.apply(this,arguments):(n=r.keys(i),p=r.first(n),s=i[p],null==s?l.__super__.parse.apply(this,arguments):(n.length>1&&"undefined"!=typeof console&&null!==console&&"function"==typeof console.warn&&console.warn("Found more then one primary collection, using '"+p+"'."),o={},r.each(a.linked||{},function(t,e){return o[e]=r.indexBy(t,"id")}),r.isEmpty(o)?l.__super__.parse.call(this,s,e):(r.each(this.sideLoad||{},function(t,e){var n,i;return r.isBoolean(t)&&t&&(t={}),r.isString(t)&&(t={collection:t}),r.isObject(t)?(i=t.foreignKey,n=t.collection,null==i&&(i=""+e),null==n&&(n=""+e+"s"),n=o[n]||{},r.each(s,function(t){var s,l;if(t.links){if(l=null,s=t.links[i],r.isArray(s)){if(r.isEmpty(n)&&(n=o[e]||o[i],null==n))throw"Could not find linked collection for '"+e+"' using '"+i+"'.";l=r.map(s,function(t){return n[t]})}else l=n[s];return null!=s&&null!=l&&(t[e]=l,delete t.links[i],r.isEmpty(t.links))?delete t.links:void 0}})):void 0}),l.__super__.parse.call(this,s,e))))))},l}(t.Collection)})}).call(this);