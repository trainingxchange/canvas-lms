(function(){define(["i18n!developer_keys","jquery","jst/developer_key","jst/developer_key_form","compiled/fn/preventDefault","jquery.ajaxJSON","jquery.instructure_date_and_time","jqueryui/dialog"],function(e,t,n,a,i){var r,o,l,d;return d=0,o=function(a){var i;return a.icon_image_url=a.icon_url||"/images/blank.png",a.name||(a.name=e.t("unnamed_tool","Unnamed Tool")),a.user_name||(a.user_name=e.t("no_user","No User")),a.created=t.datetimeString(a.created_at),a.last_auth=t.datetimeString(a.last_auth_at),a.last_access=t.datetimeString(a.last_access_at),i=t(n(a)),i.data("key",a)},r=function(n,i){var r;return r=t(a(n||{})),r.formSubmit({beforeSubmit:function(){return t("#edit_dialog button.submit").text(e.t("button.saving","Saving Key..."))},disableWhileLoading:!0,success:function(e){var n;return t("#edit_dialog").dialog("close"),n=o(e),i?i.after(n).remove():t("#keys tbody").prepend(n)},error:function(){return t("#edit_dialog button.submit").text(e.t("button.saving_failed","Saving Key Failed"))}}),r},l=function(){var e;return t("#loading").attr("class","loading"),d++,e=t.ajaxJSON("/api/v1/developer_keys?page="+d,"GET",{},function(n){var a,i,r,u;for(r=0,u=n.length;u>r;r++)i=n[r],a=o(i),t("#keys tbody").append(a);return e.getAllResponseHeaders().match(/rel="next"/)?d>1?l():t("#loading").attr("class","show_more"):t("#loading").attr("class","")})},l(),t("#keys").on("click",".delete_link",i(function(){var n,a;return n=t(this).closest(".key"),a=n.data("key"),n.confirmDelete({url:"/api/v1/developer_keys/"+a.id,message:e.t("messages.confirm_delete","Are you sure you want to delete this developer key?"),success:function(){return n.remove()}})})).on("click",".edit_link",i(function(){var e,n,a;return n=t(this).closest(".key"),a=n.data("key"),e=r(a,n),t("#edit_dialog").empty().append(e).dialog("open")})),t(".add_key").click(function(e){var n;return e.preventDefault(),n=r(),t("#edit_dialog").empty().append(n).dialog("open")}),t("#edit_dialog").html(a({})).dialog({autoOpen:!1,width:350}).on("click",".cancel",function(){return t("#edit_dialog").dialog("close")}),t(".show_all").click(function(){return l()})})}).call(this);