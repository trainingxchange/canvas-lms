(function(){define(["jquery"],function(){var t;return t=function(){function t(t){var e,o,s,n,r,i;if(this.blocks=[],t)for(n=0,r=t.length;r>n;n++)i=t[n],s=i[0],e=i[1],o=i[2],this.add(s,e,o)}return t.prototype.add=function(t,e,o){return this.blocks.push({start:t,end:e,locked:o})},t.prototype.consolidate=function(){var t,e,o,s,n,r;for(this.sort(),e=[],e.last=function(){return this[this.length-1]},r=this.blocks,s=0,n=r.length;n>s;s++)t=r[s],e.last()?(o=e.last(),o.end.getTime()!==t.start.getTime()||o.locked||t.locked?e.push(t):o.end=t.end):e.push(t);return this.blocks=e},t.prototype.split=function(t){var e,o,s,n,r,i,l;for(this.consolidate(),n=60*t*1e3,l=this.blocks,r=0,i=l.length;i>r;r++)if(e=l[r],!e.locked)for(;e.end-e.start>60*t*1e3;)s=e.start,o=new Date(e.start.getTime()+n),e.start=new Date(e.start.getTime()+n),this.add(s,o);return this.sort()},t.prototype.sort=function(){return this.blocks=this.blocks.sort(function(t,e){return t.end<=e.start?-1:1})},t.prototype["delete"]=function(t){return null!=t&&this.blocks.length>t&&!this.blocks[t].locked?this.blocks.splice(t,1):void 0},t.prototype.reset=function(){return this.blocks=[]},t}()})}).call(this);