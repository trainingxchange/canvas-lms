(function(){define(["jquery","compiled/calendar/CommonEvent","compiled/calendar/CommonEvent.Assignment","compiled/calendar/CommonEvent.AssignmentOverride","compiled/calendar/CommonEvent.CalendarEvent","compiled/str/splitAssetString"],function(e,n,t,i,a,s){return function(e,o){var r,c,l,d,_,m,g,v,u,f,p,w,x;if(null===e)return v=new n,v.allPossibleContexts=o,v;if(r=e.context_code,d=e.effective_context_code||r,f=e.assignment_overrides?"assignment_override":e.assignment||e.assignment_group_id?"assignment":"calendar_event",e=e.assignment_overrides?{assignment:e.assignment,assignment_override:e.assignment_overrides[0]}:e.assignment||e.calendar_event||e,e.hidden)return null;for(null==r&&(r=e.context_code),null==d&&(d=e.effective_context_code||e.context_code),_=null,p=0,w=o.length;w>p;p++)if(l=o[p],l.asset_string===d){_=l;break}return null===_?null:(r!==d&&(u=s(r)),c=u&&(g=_[u[0]])?function(){var e,n,t;for(t=[],e=0,n=g.length;n>e;e++)m=g[e],m.id===u[1]&&t.push(m);return t}()[0]:void 0,v="assignment"===f?new t(e,_):"assignment_override"===f?new i(e,_):new a(e,_,c),v.can_edit=!1,v.can_delete=!1,_.can_create_calendar_events&&(v.can_edit=!0,v.can_delete=!0),"locked"===v.object.workflow_state&&(v.can_edit=!1),v.object.appointment_group_id&&_.can_create_calendar_events&&(v.can_edit=!0),(null!=(x=v.assignment)?x.frozen:void 0)&&(v.can_delete=!1),v)}})}).call(this);