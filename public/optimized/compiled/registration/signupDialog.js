(function(){define(["jquery","underscore","i18n!registration","compiled/fn/preventDefault","compiled/registration/registrationErrors","jst/registration/teacherDialog","jst/registration/studentDialog","jst/registration/parentDialog","compiled/util/addPrivacyLinkToDialog","compiled/jquery/validate","jquery.instructure_forms","jquery.instructure_date_and_time"],function(e,t,r,i,n,o,s,u,a){var l,c,d;return l={},d={teacherDialog:o,studentDialog:s,parentDialog:u},c=function(t,r){var o,s,u,f;if(d[t])return s=null!=(f=l[t])?f:l[t]=e("<div />"),s.html(d[t]({account:ENV.ACCOUNT.registration_settings,terms_required:ENV.ACCOUNT.terms_required,terms_url:ENV.ACCOUNT.terms_of_use_url,privacy_url:ENV.ACCOUNT.privacy_policy_url})),s.find(".date-field").datetime_field(),s.find(".signup_link").click(i(function(){return s.dialog("close"),c(e(this).data("template"),e(this).prop("title"))})),o=s.find("form"),o.formSubmit({required:function(){var e,t,r,i;for(r=o.find(":input[name]").not("[type=hidden]"),i=[],e=0,t=r.length;t>e;e++)u=r[e],i.push(u.name);return i}(),disableWhileLoading:"spin_on_success",errorFormatter:n,success:function(e){return window.location=e.course?"/courses/"+e.course.course.id+"?registration_success=1":"/?registration_success=1"}}),s.dialog({resizable:!1,title:r,width:550,open:function(){return e(this).find("a").eq(0).blur(),e(this).find(":input").eq(0).focus(),"function"==typeof c.afterRender?c.afterRender():void 0},close:function(){return"function"==typeof c.teardown&&c.teardown(),e(".error_box").filter(":visible").remove()}}),s.fixDialogButtons(),ENV.ACCOUNT.terms_required?void 0:a(s)},c.templates=d,c})}).call(this);